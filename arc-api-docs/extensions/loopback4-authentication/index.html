
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Main documentation for ARC">
      
      
      
      
        <link rel="prev" href="../loopback4-audit-log/">
      
      
        <link rel="next" href="../loopback4-authorization/">
      
      
      <link rel="icon" href="../../../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.19">
    
    
      
        <title>Index - ARC</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.7e37652d.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#loopback4-authentication" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="ARC" class="md-header__button md-logo" aria-label="ARC" data-md-component="logo">
      
  <img src="../../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ARC
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Index
            
          </span>
        </div>
      </div>
    </div>
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/sourcefuse/arc-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="ARC" class="md-nav__button md-logo" aria-label="ARC" data-md-component="logo">
      
  <img src="../../../assets/logo.png" alt="logo">

    </a>
    ARC
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/sourcefuse/arc-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    ARC API
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            ARC API
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Packages
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Packages
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_2_1" id="__nav_2_2_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Cache
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2_1">
            <span class="md-nav__icon md-icon"></span>
            Cache
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/cache/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Index
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/cache/modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_1_3" >
        
          
          <label class="md-nav__link" for="__nav_2_2_1_3" id="__nav_2_2_1_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Classes
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_2_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2_1_3">
            <span class="md-nav__icon md-icon"></span>
            Classes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/cache/classes/CacheManager/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CacheManager
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/cache/classes/CachePluginComponent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CachePluginComponent
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/cache/classes/RedisCacheStrategy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RedisCacheStrategy
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_1_4" >
        
          
          <label class="md-nav__link" for="__nav_2_2_1_4" id="__nav_2_2_1_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Enums
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_2_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2_1_4">
            <span class="md-nav__icon md-icon"></span>
            Enums
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/cache/enums/CacheStrategyTypes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CacheStrategyTypes
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_1_5" >
        
          
          <label class="md-nav__link" for="__nav_2_2_1_5" id="__nav_2_2_1_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Interfaces
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_2_1_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2_1_5">
            <span class="md-nav__icon md-icon"></span>
            Interfaces
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/cache/interfaces/CacheEntity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CacheEntity
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/cache/interfaces/CachePluginComponentOptions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CachePluginComponentOptions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/cache/interfaces/ICacheMixin/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ICacheMixin
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/cache/interfaces/ICacheStrategy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ICacheStrategy
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_1_6" >
        
          
          <label class="md-nav__link" for="__nav_2_2_1_6" id="__nav_2_2_1_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_2_1_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2_1_6">
            <span class="md-nav__icon md-icon"></span>
            Modules
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/cache/modules/CachePluginComponentBindings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CachePluginComponentBindings
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2_2" id="__nav_2_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Core
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2_2">
            <span class="md-nav__icon md-icon"></span>
            Core
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Index
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_2_2_3" id="__nav_2_2_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Classes
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_2_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2_2_3">
            <span class="md-nav__icon md-icon"></span>
            Classes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/classes/AnyAdapter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AnyAdapter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/classes/AuthenticateSwaggerMiddlewareInterceptor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AuthenticateSwaggerMiddlewareInterceptor
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/classes/BaseEntity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    BaseEntity
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/classes/BearerVerifierComponent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    BearerVerifierComponent
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/classes/BelongsToRestResolver/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    BelongsToRestResolver
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/classes/CasbinSecureSequence/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CasbinSecureSequence
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/classes/CoreComponent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CoreComponent
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/classes/CoreEntity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CoreEntity
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/classes/CoreModel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CoreModel
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/classes/DefaultSoftCrudRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DefaultSoftCrudRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/classes/DefaultTransactionalUserModifyRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DefaultTransactionalUserModifyRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/classes/DefaultUserModifyCrudRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DefaultUserModifyCrudRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/classes/FileExtensions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FileExtensions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/classes/HasManyRestResolver/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    HasManyRestResolver
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/classes/HasOneRestResolver/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    HasOneRestResolver
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/classes/HttpAuthenticationVerifierProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    HttpAuthenticationVerifierProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/classes/LoggerExtensionComponent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LoggerExtensionComponent
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/classes/ProxyBuilderComponent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ProxyBuilderComponent
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/classes/RestServiceModifier/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RestServiceModifier
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/classes/RevokedToken/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RevokedToken
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/classes/RevokedTokenRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RevokedTokenRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/classes/SecureSequence/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SecureSequence
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/classes/ServiceSequence/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ServiceSequence
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/classes/SuccessResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SuccessResponse
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/classes/SwaggerAuthenticationComponent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SwaggerAuthenticationComponent
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/classes/TenantGuardService/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TenantGuardService
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/classes/TenantUtilitiesComponent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TenantUtilitiesComponent
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/classes/UpsertResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UpsertResponse
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/classes/UserModifiableEntity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserModifiableEntity
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/classes/ValueResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ValueResponse
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_2_2_4" id="__nav_2_2_2_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Enums
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_2_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2_2_4">
            <span class="md-nav__icon md-icon"></span>
            Enums
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/enums/AuthProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AuthProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/enums/AuthenticateErrorKeys/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AuthenticateErrorKeys
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/enums/BearerVerifierType/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    BearerVerifierType
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/enums/ConfigKey/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ConfigKey
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/enums/Gender/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gender
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/enums/HttpMethod/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    HttpMethod
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/enums/LOGGER.LOG_LEVEL/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LOGGER.LOG LEVEL
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/enums/LocaleKey/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LocaleKey
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/enums/RoleTypes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RoleTypes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/enums/STATUS_CODE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    STATUS CODE
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/enums/TenantStatus/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TenantStatus
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/enums/TenantUtilitiesErrorKeys/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TenantUtilitiesErrorKeys
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/enums/UserStatus/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserStatus
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_2_5" >
        
          
          <label class="md-nav__link" for="__nav_2_2_2_5" id="__nav_2_2_2_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Interfaces
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_2_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2_2_5">
            <span class="md-nav__icon md-icon"></span>
            Interfaces
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/interfaces/Adapter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Adapter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/interfaces/BearerVerifierConfig/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    BearerVerifierConfig
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/interfaces/CoreConfig/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CoreConfig
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/interfaces/ExternalIdentifierEnabledEntity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ExternalIdentifierEnabledEntity
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/interfaces/IAuthUserWithPermissions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IAuthUserWithPermissions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/interfaces/IBaseEntity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IBaseEntity
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/interfaces/IBaseEntityConfig/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IBaseEntityConfig
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/interfaces/ICommand/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ICommand
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/interfaces/ICrudRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ICrudRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/interfaces/ILogger/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ILogger
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/interfaces/IRestResolver/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IRestResolver
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/interfaces/IServiceConfig/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IServiceConfig
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/interfaces/ITenantGuard/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ITenantGuard
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/interfaces/ITenantUtilitiesOptions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ITenantUtilitiesOptions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/interfaces/IUserModifiableEntity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IUserModifiableEntity
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/interfaces/IUserModifiableEntityConfig/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IUserModifiableEntityConfig
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/interfaces/IUserPrefs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IUserPrefs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/interfaces/UserInToken/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserInToken
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_2_6" >
        
          
          <label class="md-nav__link" for="__nav_2_2_2_6" id="__nav_2_2_2_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_2_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2_2_6">
            <span class="md-nav__icon md-icon"></span>
            Modules
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/modules/BearerVerifierBindings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    BearerVerifierBindings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/modules/LOGGER.BINDINGS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LOGGER.BINDINGS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/modules/LOGGER/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LOGGER
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/modules/OASBindings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OASBindings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/modules/ProxyBuilderBindings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ProxyBuilderBindings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/modules/SFCoreBindings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SFCoreBindings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/modules/SwaggerAuthenticationBindings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SwaggerAuthenticationBindings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/core/modules/TenantUtilitiesBindings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TenantUtilitiesBindings
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_2_3" id="__nav_2_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Feature toggle
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2_3">
            <span class="md-nav__icon md-icon"></span>
            Feature toggle
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/feature-toggle/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Index
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/feature-toggle/modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_3_3" >
        
          
          <label class="md-nav__link" for="__nav_2_2_3_3" id="__nav_2_2_3_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Classes
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_2_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2_3_3">
            <span class="md-nav__icon md-icon"></span>
            Classes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/feature-toggle/classes/FeatureFlagActionProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FeatureFlagActionProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/feature-toggle/classes/FeatureFlagMetadataProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FeatureFlagMetadataProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/feature-toggle/classes/FeatureHandlerService/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FeatureHandlerService
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/feature-toggle/classes/FeatureToggleComponent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FeatureToggleComponent
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_3_4" >
        
          
          <label class="md-nav__link" for="__nav_2_2_3_4" id="__nav_2_2_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Interfaces
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_2_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2_3_4">
            <span class="md-nav__icon md-icon"></span>
            Interfaces
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/feature-toggle/interfaces/FeatureFlagMetadata/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FeatureFlagMetadata
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/feature-toggle/interfaces/FeatureHandler/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FeatureHandler
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/feature-toggle/interfaces/FilterStrategy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FilterStrategy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/feature-toggle/interfaces/IAuthUserWithDisabledFeat/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IAuthUserWithDisabledFeat
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_3_5" >
        
          
          <label class="md-nav__link" for="__nav_2_2_3_5" id="__nav_2_2_3_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_2_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2_3_5">
            <span class="md-nav__icon md-icon"></span>
            Modules
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/feature-toggle/modules/StrategyBindings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    StrategyBindings
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Services
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Services
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_1" >
        
          
          <label class="md-nav__link" for="__nav_2_3_1" id="__nav_2_3_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Audit service
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_1">
            <span class="md-nav__icon md-icon"></span>
            Audit service
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/audit-service/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Index
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/audit-service/modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/audit-service/openapi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Openapi
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_1_4" >
        
          
          <label class="md-nav__link" for="__nav_2_3_1_4" id="__nav_2_3_1_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Classes
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_1_4">
            <span class="md-nav__icon md-icon"></span>
            Classes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/audit-service/classes/AuditLog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AuditLog
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/audit-service/classes/AuditLogExportProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AuditLogExportProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/audit-service/classes/AuditLogRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AuditLogRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/audit-service/classes/AuditServiceComponent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AuditServiceComponent
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/audit-service/classes/ColumnBuilderProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ColumnBuilderProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/audit-service/classes/CustomFilter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CustomFilter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/audit-service/classes/ExportHandlerProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ExportHandlerProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/audit-service/classes/ExportToCsvProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ExportToCsvProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/audit-service/classes/Job/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Job
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/audit-service/classes/JobProcessingService/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    JobProcessingService
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/audit-service/classes/JobRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    JobRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/audit-service/classes/MappingLog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MappingLog
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/audit-service/classes/MappingLogRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MappingLogRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/audit-service/classes/QuerySelectedFilesProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    QuerySelectedFilesProvider
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_1_5" >
        
          
          <label class="md-nav__link" for="__nav_2_3_1_5" id="__nav_2_3_1_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Enums
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_1_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_1_5">
            <span class="md-nav__icon md-icon"></span>
            Enums
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/audit-service/enums/FileStatusKey/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FileStatusKey
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/audit-service/enums/PermissionKey/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PermissionKey
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_1_6" >
        
          
          <label class="md-nav__link" for="__nav_2_3_1_6" id="__nav_2_3_1_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Interfaces
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_1_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_1_6">
            <span class="md-nav__icon md-icon"></span>
            Interfaces
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/audit-service/interfaces/ArchiveOutput/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ArchiveOutput
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/audit-service/interfaces/AwsS3Config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AwsS3Config
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/audit-service/interfaces/ExportResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ExportResponse
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/audit-service/interfaces/IAuditServiceConfig/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IAuditServiceConfig
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_1_7" >
        
          
          <label class="md-nav__link" for="__nav_2_3_1_7" id="__nav_2_3_1_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_1_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_1_7">
            <span class="md-nav__icon md-icon"></span>
            Modules
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/audit-service/modules/AWSS3Bindings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AWSS3Bindings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/audit-service/modules/AuditLogExportServiceBindings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AuditLogExportServiceBindings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/audit-service/modules/AuditServiceBindings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AuditServiceBindings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/audit-service/modules/ColumnBuilderServiceBindings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ColumnBuilderServiceBindings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/audit-service/modules/ExportHandlerServiceBindings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ExportHandlerServiceBindings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/audit-service/modules/ExportToCsvServiceBindings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ExportToCsvServiceBindings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/audit-service/modules/QuerySelectedFilesServiceBindings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    QuerySelectedFilesServiceBindings
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_2" >
        
          
          <label class="md-nav__link" for="__nav_2_3_2" id="__nav_2_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Authentication service
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_2">
            <span class="md-nav__icon md-icon"></span>
            Authentication service
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Index
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/openapi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Openapi
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_3_2_4" id="__nav_2_3_2_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Classes
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_2_4">
            <span class="md-nav__icon md-icon"></span>
            Classes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/AppleOauth2SignupProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AppleOauth2SignupProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/AppleOauth2VerifyProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AppleOauth2VerifyProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/ApplePostVerifyProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ApplePostVerifyProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/ApplePreVerifyProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ApplePreVerifyProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/AuthClient/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AuthClient
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/AuthClientRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AuthClientRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/AuthRefreshTokenRequest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AuthRefreshTokenRequest
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/AuthSecureClient/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AuthSecureClient
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/AuthSecureClientRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AuthSecureClientRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/AuthTokenRequest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AuthTokenRequest
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/AuthUser/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AuthUser
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/AuthenticationServiceComponent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AuthenticationServiceComponent
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/AzureAdSignupProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AzureAdSignupProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/AzureAdVerifyProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AzureAdVerifyProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/AzurePostVerifyProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AzurePostVerifyProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/AzurePreVerifyProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AzurePreVerifyProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/BearerTokenVerifyProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    BearerTokenVerifyProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/ClientAuthRequest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ClientAuthRequest
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/ClientPasswordVerifyProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ClientPasswordVerifyProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/CodeWriterProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CodeWriterProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/CognitoOauth2SignupProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CognitoOauth2SignupProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/CognitoOauth2VerifyProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CognitoOauth2VerifyProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/CognitoPostVerifyProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CognitoPostVerifyProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/CognitoPreVerifyProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CognitoPreVerifyProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/DeviceInfo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DeviceInfo
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/FacebookOauth2SignupProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FacebookOauth2SignupProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/FacebookOauth2VerifyProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FacebookOauth2VerifyProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/FacebookPostVerifyProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FacebookPostVerifyProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/FacebookPreVerifyProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FacebookPreVerifyProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/ForgetPasswordDto/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ForgetPasswordDto
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/ForgetPasswordResponseDto/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ForgetPasswordResponseDto
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/ForgotPasswordProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ForgotPasswordProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/GoogleAuthenticationProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GoogleAuthenticationProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/GoogleAuthenticatorVerifyProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GoogleAuthenticatorVerifyProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/GoogleOauth2SignupProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GoogleOauth2SignupProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/GoogleOauth2VerifyProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GoogleOauth2VerifyProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/GooglePostVerifyProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GooglePostVerifyProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/GooglePreVerifyProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GooglePreVerifyProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/InstagramOauth2SignupProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    InstagramOauth2SignupProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/InstagramOauth2VerifyProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    InstagramOauth2VerifyProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/InstagramPostVerifyProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    InstagramPostVerifyProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/InstagramPreVerifyProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    InstagramPreVerifyProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/JWTAsymmetricSignerProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    JWTAsymmetricSignerProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/JWTAsymmetricVerifierProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    JWTAsymmetricVerifierProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/JWTSymmetricSignerProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    JWTSymmetricSignerProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/JWTSymmetricVerifierProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    JWTSymmetricVerifierProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/JwtPayloadProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    JwtPayloadProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/KeyCloakPostVerifyProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    KeyCloakPostVerifyProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/KeyCloakPreVerifyProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    KeyCloakPreVerifyProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/KeyCloakSignupProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    KeyCloakSignupProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/KeycloakAuthenticationProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    KeycloakAuthenticationProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/KeycloakVerifyProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    KeycloakVerifyProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/LocalPasswordVerifyProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LocalPasswordVerifyProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/LocalPreSignupProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LocalPreSignupProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/LocalSignupProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LocalSignupProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/LocalUserProfileDto/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LocalUserProfileDto
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/LoginActivity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LoginActivity
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/LoginActivityRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LoginActivityRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/LoginHelperService/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LoginHelperService
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/LoginRequest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LoginRequest
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/OauthCodeReaderProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OauthCodeReaderProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/Otp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Otp
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/OtpCache/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OtpCache
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/OtpCacheRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OtpCacheRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/OtpGenerateProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OtpGenerateProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/OtpLoginRequest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OtpLoginRequest
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/OtpProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OtpProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/OtpRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OtpRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/OtpSendRequest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OtpSendRequest
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/OtpSenderProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OtpSenderProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/OtpService/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OtpService
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/OtpVerifyProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OtpVerifyProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/RefreshToken/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RefreshToken
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/RefreshTokenRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RefreshTokenRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/RefreshTokenRequest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RefreshTokenRequest
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/ResetPassword/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ResetPassword
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/ResetPasswordWithClient/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ResetPasswordWithClient
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/ResourceOwnerVerifyProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ResourceOwnerVerifyProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/RevokedToken/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RevokedToken
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/RevokedTokenRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RevokedTokenRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/Role/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Role
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/RoleRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RoleRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/SamlPostVerifyProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SamlPostVerifyProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/SamlPreVerifyProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SamlPreVerifyProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/SamlSignupProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SamlSignupProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/SamlVerifyProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SamlVerifyProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/SecureClientPasswordVerifyProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SecureClientPasswordVerifyProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/SecureResourceOwnerVerifyProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SecureResourceOwnerVerifyProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/SignupBearerVerifyProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SignupBearerVerifyProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/SignupRequest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SignupRequest
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/SignupRequestDto/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SignupRequestDto
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/SignupRequestResponseDto/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SignupRequestResponseDto
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/SignupTokenHandlerProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SignupTokenHandlerProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/SignupWithTokenReponseDto/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SignupWithTokenReponseDto
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/Tenant/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tenant
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/TenantConfig/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TenantConfig
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/TenantConfigRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TenantConfigRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/TenantRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TenantRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/TokenResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TokenResponse
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/User/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    User
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/UserCredentials/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserCredentials
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/UserCredentialsRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserCredentialsRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/UserLevelPermission/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserLevelPermission
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/UserLevelPermissionRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserLevelPermissionRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/UserLevelResource/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserLevelResource
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/UserLevelResourceRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserLevelResourceRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/UserRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/UserTenant/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserTenant
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/UserTenantRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserTenantRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/classes/UserValidationProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserValidationProvider
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_2_5" >
        
          
          <label class="md-nav__link" for="__nav_2_3_2_5" id="__nav_2_3_2_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Enums
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_2_5">
            <span class="md-nav__icon md-icon"></span>
            Enums
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/enums/ActiveUsersRange/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ActiveUsersRange
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/enums/LoginType/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LoginType
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/enums/ModelPropertyDescriptionString/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ModelPropertyDescriptionString
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/enums/OtpMethodType/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OtpMethodType
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/enums/PermissionKey/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PermissionKey
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_2_6" >
        
          
          <label class="md-nav__link" for="__nav_2_3_2_6" id="__nav_2_3_2_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Interfaces
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_2_6">
            <span class="md-nav__icon md-icon"></span>
            Interfaces
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/interfaces/ActiveUsersGroupData/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ActiveUsersGroupData
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/interfaces/CodeResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CodeResponse
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/interfaces/ExternalTokens/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ExternalTokens
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/interfaces/IAuthClientDTO/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IAuthClientDTO
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/interfaces/IAuthServiceConfig/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IAuthServiceConfig
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/interfaces/IDeviceInfo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IDeviceInfo
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/interfaces/IMfaConfig/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IMfaConfig
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/interfaces/IOtpConfig/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IOtpConfig
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/interfaces/IUserActivity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IUserActivity
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/interfaces/OtpResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OtpResponse
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/interfaces/QrCodeCheckResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    QrCodeCheckResponse
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/interfaces/QrCodeCreateResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    QrCodeCreateResponse
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/interfaces/UserCredentialsRelations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserCredentialsRelations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/interfaces/UserRelations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserRelations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/interfaces/UserTenantRelations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserTenantRelations
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_2_7" >
        
          
          <label class="md-nav__link" for="__nav_2_3_2_7" id="__nav_2_3_2_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_2_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_2_7">
            <span class="md-nav__icon md-icon"></span>
            Modules
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/modules/AuthCodeBindings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AuthCodeBindings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/modules/AuthServiceBindings.UserValidationServiceBindings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AuthServiceBindings.UserValidationServiceBindings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/modules/AuthServiceBindings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AuthServiceBindings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/modules/SignUpBindings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SignUpBindings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/modules/UserValidationServiceBindings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserValidationServiceBindings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/authentication-service/modules/VerifyBindings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VerifyBindings
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3_3" id="__nav_2_3_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Bpmn service
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_3">
            <span class="md-nav__icon md-icon"></span>
            Bpmn service
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/bpmn-service/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Index
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/bpmn-service/modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/bpmn-service/openapi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Openapi
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_3_4" >
        
          
          <label class="md-nav__link" for="__nav_2_3_3_4" id="__nav_2_3_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Classes
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_3_4">
            <span class="md-nav__icon md-icon"></span>
            Classes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/bpmn-service/classes/BPMTask/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    BPMTask
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/bpmn-service/classes/ExecuteWorkflowDto/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ExecuteWorkflowDto
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/bpmn-service/classes/Workflow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Workflow
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/bpmn-service/classes/WorkflowController/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WorkflowController
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/bpmn-service/classes/WorkflowDto/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WorkflowDto
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/bpmn-service/classes/WorkflowProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WorkflowProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/bpmn-service/classes/WorkflowRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WorkflowRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/bpmn-service/classes/WorkflowServiceComponent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WorkflowServiceComponent
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/bpmn-service/classes/WorkflowVersion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WorkflowVersion
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/bpmn-service/classes/WorkflowVersionRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WorkflowVersionRepository
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_3_5" >
        
          
          <label class="md-nav__link" for="__nav_2_3_3_5" id="__nav_2_3_3_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Enums
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_3_5">
            <span class="md-nav__icon md-icon"></span>
            Enums
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/bpmn-service/enums/ErrorKeys/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ErrorKeys
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/bpmn-service/enums/PermissionKey/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PermissionKey
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_3_6" >
        
          
          <label class="md-nav__link" for="__nav_2_3_3_6" id="__nav_2_3_3_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Interfaces
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_3_6">
            <span class="md-nav__icon md-icon"></span>
            Interfaces
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/bpmn-service/interfaces/CaseDefinition/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CaseDefinition
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/bpmn-service/interfaces/DecisionDefinition/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DecisionDefinition
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/bpmn-service/interfaces/DecisionRequirementDefinition/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DecisionRequirementDefinition
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/bpmn-service/interfaces/DeploymentWithDefinitions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DeploymentWithDefinitions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/bpmn-service/interfaces/IBPMTask/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IBPMTask
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/bpmn-service/interfaces/ICommand/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ICommand
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/bpmn-service/interfaces/IWorkflowServiceConfig/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IWorkflowServiceConfig
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/bpmn-service/interfaces/ProcessDefinition/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ProcessDefinition
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/bpmn-service/interfaces/ProcessInstance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ProcessInstance
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/bpmn-service/interfaces/Variable/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Variable
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/bpmn-service/interfaces/WorflowManager/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WorflowManager
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/bpmn-service/interfaces/WorkflowRelations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WorkflowRelations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/bpmn-service/interfaces/WorkflowVersionRelations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WorkflowVersionRelations
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_3_7" >
        
          
          <label class="md-nav__link" for="__nav_2_3_3_7" id="__nav_2_3_3_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_3_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_3_7">
            <span class="md-nav__icon md-icon"></span>
            Modules
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/bpmn-service/modules/WorkflowServiceBindings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WorkflowServiceBindings
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_4" >
        
          
          <label class="md-nav__link" for="__nav_2_3_4" id="__nav_2_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Chat service
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_4">
            <span class="md-nav__icon md-icon"></span>
            Chat service
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/chat-service/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Index
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/chat-service/modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/chat-service/openapi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Openapi
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_4_4" >
        
          
          <label class="md-nav__link" for="__nav_2_3_4_4" id="__nav_2_3_4_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Classes
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_4_4">
            <span class="md-nav__icon md-icon"></span>
            Classes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/chat-service/classes/AttachmentFile/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AttachmentFile
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/chat-service/classes/AttachmentFileDto/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AttachmentFileDto
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/chat-service/classes/AttachmentFileRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AttachmentFileRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/chat-service/classes/ChatServiceComponent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ChatServiceComponent
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/chat-service/classes/Message/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Message
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/chat-service/classes/MessageRecipient/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MessageRecipient
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/chat-service/classes/MessageRecipientRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MessageRecipientRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/chat-service/classes/MessageRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MessageRepository
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_4_5" >
        
          
          <label class="md-nav__link" for="__nav_2_3_4_5" id="__nav_2_3_4_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Enums
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_4_5">
            <span class="md-nav__icon md-icon"></span>
            Enums
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/chat-service/enums/PermissionKey/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PermissionKey
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_4_6" >
        
          
          <label class="md-nav__link" for="__nav_2_3_4_6" id="__nav_2_3_4_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Interfaces
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_4_6">
            <span class="md-nav__icon md-icon"></span>
            Interfaces
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/chat-service/interfaces/AttachmentFileRelations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AttachmentFileRelations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/chat-service/interfaces/IChatServiceConfig/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IChatServiceConfig
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/chat-service/interfaces/MessageRecipientRelations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MessageRecipientRelations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/chat-service/interfaces/MessageRelations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MessageRelations
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_4_7" >
        
          
          <label class="md-nav__link" for="__nav_2_3_4_7" id="__nav_2_3_4_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_4_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_4_7">
            <span class="md-nav__icon md-icon"></span>
            Modules
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/chat-service/modules/ChatServiceBindings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ChatServiceBindings
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_5" >
        
          
          <label class="md-nav__link" for="__nav_2_3_5" id="__nav_2_3_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Feature toggle service
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_5">
            <span class="md-nav__icon md-icon"></span>
            Feature toggle service
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/feature-toggle-service/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Index
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/feature-toggle-service/modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/feature-toggle-service/openapi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Openapi
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_5_4" >
        
          
          <label class="md-nav__link" for="__nav_2_3_5_4" id="__nav_2_3_5_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Classes
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_5_4">
            <span class="md-nav__icon md-icon"></span>
            Classes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/feature-toggle-service/classes/Feature/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Feature
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/feature-toggle-service/classes/FeatureRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FeatureRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/feature-toggle-service/classes/FeatureToggle/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FeatureToggle
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/feature-toggle-service/classes/FeatureToggleRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FeatureToggleRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/feature-toggle-service/classes/FeatureToggleServiceComponent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FeatureToggleServiceComponent
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/feature-toggle-service/classes/Strategy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Strategy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/feature-toggle-service/classes/StrategyRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    StrategyRepository
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_5_5" >
        
          
          <label class="md-nav__link" for="__nav_2_3_5_5" id="__nav_2_3_5_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Enums
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_5_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_5_5">
            <span class="md-nav__icon md-icon"></span>
            Enums
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/feature-toggle-service/enums/PermissionKey/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PermissionKey
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/feature-toggle-service/enums/StrategyKey/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    StrategyKey
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_5_6" >
        
          
          <label class="md-nav__link" for="__nav_2_3_5_6" id="__nav_2_3_5_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Interfaces
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_5_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_5_6">
            <span class="md-nav__icon md-icon"></span>
            Interfaces
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/feature-toggle-service/interfaces/IToggleServiceConfig/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IToggleServiceConfig
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_5_7" >
        
          
          <label class="md-nav__link" for="__nav_2_3_5_7" id="__nav_2_3_5_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_5_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_5_7">
            <span class="md-nav__icon md-icon"></span>
            Modules
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/feature-toggle-service/modules/FeatureToggleBindings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FeatureToggleBindings
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_6" >
        
          
          <label class="md-nav__link" for="__nav_2_3_6" id="__nav_2_3_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    In mail service
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_6">
            <span class="md-nav__icon md-icon"></span>
            In mail service
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/in-mail-service/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Index
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/in-mail-service/modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/in-mail-service/openapi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Openapi
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_6_4" >
        
          
          <label class="md-nav__link" for="__nav_2_3_6_4" id="__nav_2_3_6_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Classes
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_6_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_6_4">
            <span class="md-nav__icon md-icon"></span>
            Classes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/in-mail-service/classes/Attachment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Attachment
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/in-mail-service/classes/AttachmentRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AttachmentRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/in-mail-service/classes/Group/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Group
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/in-mail-service/classes/GroupRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GroupRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/in-mail-service/classes/IdArrays/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IdArrays
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/in-mail-service/classes/IdResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IdResponse
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/in-mail-service/classes/InMailServiceComponent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    InMailServiceComponent
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/in-mail-service/classes/Message/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Message
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/in-mail-service/classes/MessageRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MessageRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/in-mail-service/classes/Meta/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Meta
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/in-mail-service/classes/MetaRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MetaRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/in-mail-service/classes/Thread/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Thread
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/in-mail-service/classes/ThreadRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ThreadRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/in-mail-service/classes/ThreadView/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ThreadView
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/in-mail-service/classes/ThreadViewRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ThreadViewRepository
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_6_5" >
        
          
          <label class="md-nav__link" for="__nav_2_3_6_5" id="__nav_2_3_6_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Enums
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_6_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_6_5">
            <span class="md-nav__icon md-icon"></span>
            Enums
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/in-mail-service/enums/PartyTypeMarker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PartyTypeMarker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/in-mail-service/enums/PermissionsEnums/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PermissionsEnums
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/in-mail-service/enums/StatusMarker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    StatusMarker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/in-mail-service/enums/StorageMarker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    StorageMarker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/in-mail-service/enums/VisibilityMarker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VisibilityMarker
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_6_6" >
        
          
          <label class="md-nav__link" for="__nav_2_3_6_6" id="__nav_2_3_6_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Interfaces
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_6_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_6_6">
            <span class="md-nav__icon md-icon"></span>
            Interfaces
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/in-mail-service/interfaces/IInMailServiceConfig/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IInMailServiceConfig
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/in-mail-service/interfaces/MessageRelations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MessageRelations
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_6_7" >
        
          
          <label class="md-nav__link" for="__nav_2_3_6_7" id="__nav_2_3_6_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_6_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_6_7">
            <span class="md-nav__icon md-icon"></span>
            Modules
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/in-mail-service/modules/InMailBindings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    InMailBindings
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_7" >
        
          
          <label class="md-nav__link" for="__nav_2_3_7" id="__nav_2_3_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Notification service
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_7">
            <span class="md-nav__icon md-icon"></span>
            Notification service
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/notification-service/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Index
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/notification-service/modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/notification-service/openapi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Openapi
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_7_4" >
        
          
          <label class="md-nav__link" for="__nav_2_3_7_4" id="__nav_2_3_7_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Classes
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_7_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_7_4">
            <span class="md-nav__icon md-icon"></span>
            Classes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/notification-service/classes/AccessResponseDto/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AccessResponseDto
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/notification-service/classes/ChannelManagerProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ChannelManagerProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/notification-service/classes/Notification/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Notification
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/notification-service/classes/NotificationAccess/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NotificationAccess
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/notification-service/classes/NotificationAccessRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NotificationAccessRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/notification-service/classes/NotificationDto/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NotificationDto
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/notification-service/classes/NotificationFilterProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NotificationFilterProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/notification-service/classes/NotificationRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NotificationRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/notification-service/classes/NotificationServiceComponent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NotificationServiceComponent
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/notification-service/classes/NotificationSettingsDto/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NotificationSettingsDto
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/notification-service/classes/NotificationUser/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NotificationUser
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/notification-service/classes/NotificationUserRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NotificationUserRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/notification-service/classes/NotificationUserSettingsProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NotificationUserSettingsProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/notification-service/classes/UserNotificationSettings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserNotificationSettings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/notification-service/classes/UserNotificationSettingsRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserNotificationSettingsRepository
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_7_5" >
        
          
          <label class="md-nav__link" for="__nav_2_3_7_5" id="__nav_2_3_7_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Enums
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_7_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_7_5">
            <span class="md-nav__icon md-icon"></span>
            Enums
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/notification-service/enums/ErrorKeys/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ErrorKeys
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/notification-service/enums/PermissionKey/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PermissionKey
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_7_6" >
        
          
          <label class="md-nav__link" for="__nav_2_3_7_6" id="__nav_2_3_7_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Interfaces
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_7_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_7_6">
            <span class="md-nav__icon md-icon"></span>
            Interfaces
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/notification-service/interfaces/IChannelManager/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IChannelManager
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/notification-service/interfaces/INotifServiceConfig/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    INotifServiceConfig
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/notification-service/interfaces/INotificationSettingFilterFunc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    INotificationSettingFilterFunc
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/notification-service/interfaces/INotificationUserManager/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    INotificationUserManager
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/notification-service/interfaces/NotificationRelations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NotificationRelations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/notification-service/interfaces/NotificationUserRelations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NotificationUserRelations
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_7_7" >
        
          
          <label class="md-nav__link" for="__nav_2_3_7_7" id="__nav_2_3_7_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_7_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_7_7">
            <span class="md-nav__icon md-icon"></span>
            Modules
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/notification-service/modules/NotifServiceBindings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NotifServiceBindings
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_8" >
        
          
          <label class="md-nav__link" for="__nav_2_3_8" id="__nav_2_3_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Oidc service
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_8">
            <span class="md-nav__icon md-icon"></span>
            Oidc service
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/oidc-service/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Index
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/oidc-service/modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/oidc-service/openapi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Openapi
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_8_4" >
        
          
          <label class="md-nav__link" for="__nav_2_3_8_4" id="__nav_2_3_8_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Classes
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_8_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_8_4">
            <span class="md-nav__icon md-icon"></span>
            Classes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/oidc-service/classes/AuthClient/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AuthClient
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/oidc-service/classes/AuthClientRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AuthClientRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/oidc-service/classes/FindAccountProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FindAccountProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/oidc-service/classes/OidcProviderProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OidcProviderProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/oidc-service/classes/OidcServiceComponent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OidcServiceComponent
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/oidc-service/classes/Otp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Otp
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/oidc-service/classes/OtpRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OtpRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/oidc-service/classes/Role/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Role
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/oidc-service/classes/RoleRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RoleRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/oidc-service/classes/Tenant/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tenant
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/oidc-service/classes/TenantConfig/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TenantConfig
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/oidc-service/classes/TenantConfigRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TenantConfigRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/oidc-service/classes/TenantRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TenantRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/oidc-service/classes/User/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    User
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/oidc-service/classes/UserCredentials/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserCredentials
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/oidc-service/classes/UserCredentialsRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserCredentialsRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/oidc-service/classes/UserLevelPermission/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserLevelPermission
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/oidc-service/classes/UserLevelPermissionRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserLevelPermissionRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/oidc-service/classes/UserRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/oidc-service/classes/UserTenant/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserTenant
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/oidc-service/classes/UserTenantRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserTenantRepository
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_8_5" >
        
          
          <label class="md-nav__link" for="__nav_2_3_8_5" id="__nav_2_3_8_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Interfaces
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_8_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_8_5">
            <span class="md-nav__icon md-icon"></span>
            Interfaces
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/oidc-service/interfaces/ExternalTokens/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ExternalTokens
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/oidc-service/interfaces/FindAccountResult/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FindAccountResult
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/oidc-service/interfaces/IAuthClientDTO/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IAuthClientDTO
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/oidc-service/interfaces/IAuthServiceConfig/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IAuthServiceConfig
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/oidc-service/interfaces/IMfaConfig/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IMfaConfig
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/oidc-service/interfaces/UserCredentialsRelations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserCredentialsRelations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/oidc-service/interfaces/UserRelations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserRelations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/oidc-service/interfaces/UserTenantRelations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserTenantRelations
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_8_6" >
        
          
          <label class="md-nav__link" for="__nav_2_3_8_6" id="__nav_2_3_8_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_8_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_8_6">
            <span class="md-nav__icon md-icon"></span>
            Modules
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/oidc-service/modules/OIDCServiceBindings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OIDCServiceBindings
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_9" >
        
          
          <label class="md-nav__link" for="__nav_2_3_9" id="__nav_2_3_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Payment service
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_9">
            <span class="md-nav__icon md-icon"></span>
            Payment service
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/payment-service/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Index
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/payment-service/modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/payment-service/openapi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Openapi
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_9_4" >
        
          
          <label class="md-nav__link" for="__nav_2_3_9_4" id="__nav_2_3_9_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Classes
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_9_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_9_4">
            <span class="md-nav__icon md-icon"></span>
            Classes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/payment-service/classes/GatewayProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GatewayProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/payment-service/classes/Orders/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Orders
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/payment-service/classes/OrdersRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OrdersRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/payment-service/classes/PaymentGateways/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PaymentGateways
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/payment-service/classes/PaymentGatewaysRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PaymentGatewaysRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/payment-service/classes/PaymentServiceComponent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PaymentServiceComponent
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/payment-service/classes/PaypalProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PaypalProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/payment-service/classes/RazorpayProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RazorpayProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/payment-service/classes/StripeProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    StripeProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/payment-service/classes/Subscriptions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Subscriptions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/payment-service/classes/SubscriptionsRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SubscriptionsRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/payment-service/classes/Templates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Templates
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/payment-service/classes/TemplatesRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TemplatesRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/payment-service/classes/Transactions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Transactions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/payment-service/classes/TransactionsRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TransactionsRepository
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_9_5" >
        
          
          <label class="md-nav__link" for="__nav_2_3_9_5" id="__nav_2_3_9_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Enums
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_9_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_9_5">
            <span class="md-nav__icon md-icon"></span>
            Enums
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/payment-service/enums/GatewayType/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GatewayType
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/payment-service/enums/ResponseMessage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ResponseMessage
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/payment-service/enums/Status/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Status
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/payment-service/enums/TemplateName/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TemplateName
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/payment-service/enums/TemplateType/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TemplateType
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_9_6" >
        
          
          <label class="md-nav__link" for="__nav_2_3_9_6" id="__nav_2_3_9_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Interfaces
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_9_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_9_6">
            <span class="md-nav__icon md-icon"></span>
            Interfaces
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/payment-service/interfaces/IGateway/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IGateway
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/payment-service/interfaces/IPayPalConfig/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IPayPalConfig
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/payment-service/interfaces/IRazorpayConfig/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IRazorpayConfig
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/payment-service/interfaces/IStripeConfig/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IStripeConfig
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/payment-service/interfaces/PayPalPaymentGateway/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PayPalPaymentGateway
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/payment-service/interfaces/PaymentServiceComponentOptions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PaymentServiceComponentOptions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/payment-service/interfaces/PaymentServiceConfig/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PaymentServiceConfig
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/payment-service/interfaces/RazorpayOrder/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RazorpayOrder
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/payment-service/interfaces/RazorpayPaymentGateway/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RazorpayPaymentGateway
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/payment-service/interfaces/StripeOrder/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    StripeOrder
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/payment-service/interfaces/StripePaymentGateway/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    StripePaymentGateway
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_9_7" >
        
          
          <label class="md-nav__link" for="__nav_2_3_9_7" id="__nav_2_3_9_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_9_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_9_7">
            <span class="md-nav__icon md-icon"></span>
            Modules
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/payment-service/modules/GatewayBindings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GatewayBindings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/payment-service/modules/PayPalBindings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PayPalBindings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/payment-service/modules/PaymentServiceBindings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PaymentServiceBindings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/payment-service/modules/PaymentServiceComponentBindings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PaymentServiceComponentBindings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/payment-service/modules/RazorpayBindings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RazorpayBindings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/payment-service/modules/StripeBindings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    StripeBindings
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_10" >
        
          
          <label class="md-nav__link" for="__nav_2_3_10" id="__nav_2_3_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Reporting service
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_10">
            <span class="md-nav__icon md-icon"></span>
            Reporting service
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/reporting-service/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Index
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/reporting-service/modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/reporting-service/openapi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Openapi
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_10_4" >
        
          
          <label class="md-nav__link" for="__nav_2_3_10_4" id="__nav_2_3_10_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Classes
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_10_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_10_4">
            <span class="md-nav__icon md-icon"></span>
            Classes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/reporting-service/classes/BaseSequelize/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    BaseSequelize
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/reporting-service/classes/ColumnForDataSourceModel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ColumnForDataSourceModel
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/reporting-service/classes/CreateDashboardDto/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CreateDashboardDto
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/reporting-service/classes/Dashboard/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Dashboard
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/reporting-service/classes/DashboardWidget/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DashboardWidget
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/reporting-service/classes/DataSet/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DataSet
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/reporting-service/classes/DataSetsService/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DataSetsService
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/reporting-service/classes/DataSourcesService/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DataSourcesService
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/reporting-service/classes/IngestionMapping/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IngestionMapping
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/reporting-service/classes/IngestionMappingsService/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IngestionMappingsService
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/reporting-service/classes/MysqlSequelizeStrategy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MysqlSequelizeStrategy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/reporting-service/classes/PsqlSequelizeStrategy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PsqlSequelizeStrategy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/reporting-service/classes/ReportIngestionMessagingService/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ReportIngestionMessagingService
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/reporting-service/classes/ReportingServiceComponent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ReportingServiceComponent
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/reporting-service/classes/StateTracking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    StateTracking
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/reporting-service/classes/StateTrackingService/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    StateTrackingService
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/reporting-service/classes/Widget/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Widget
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_10_5" >
        
          
          <label class="md-nav__link" for="__nav_2_3_10_5" id="__nav_2_3_10_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Interfaces
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_10_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_10_5">
            <span class="md-nav__icon md-icon"></span>
            Interfaces
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/reporting-service/interfaces/CDC/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CDC
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/reporting-service/interfaces/ColumnEntityPair/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ColumnEntityPair
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/reporting-service/interfaces/CustomFilter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CustomFilter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/reporting-service/interfaces/CustomTypeConvertor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CustomTypeConvertor
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/reporting-service/interfaces/DashboardInterface/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DashboardInterface
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/reporting-service/interfaces/DataSetServiceConfig/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DataSetServiceConfig
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/reporting-service/interfaces/DataSourceList/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DataSourceList
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/reporting-service/interfaces/DataStoreAdapter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DataStoreAdapter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/reporting-service/interfaces/DataStoreDataTypeConversionFunctions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DataStoreDataTypeConversionFunctions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/reporting-service/interfaces/IngestReportRecord/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IngestReportRecord
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/reporting-service/interfaces/IngestionHandler/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IngestionHandler
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/reporting-service/interfaces/PermissionModel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PermissionModel
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/reporting-service/interfaces/QueryUtilityInterface/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    QueryUtilityInterface
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/reporting-service/interfaces/S3DataStoreConfiguration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    S3DataStoreConfiguration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/reporting-service/interfaces/SequelizeDataStoreConfiguration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SequelizeDataStoreConfiguration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/reporting-service/interfaces/StructuredQueryInterface/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    StructuredQueryInterface
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/reporting-service/interfaces/WidgetInterface/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WidgetInterface
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_10_6" >
        
          
          <label class="md-nav__link" for="__nav_2_3_10_6" id="__nav_2_3_10_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_10_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_10_6">
            <span class="md-nav__icon md-icon"></span>
            Modules
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/reporting-service/modules/ReportingServiceComponentBindings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ReportingServiceComponentBindings
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_11" >
        
          
          <label class="md-nav__link" for="__nav_2_3_11" id="__nav_2_3_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Scheduler service
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_11">
            <span class="md-nav__icon md-icon"></span>
            Scheduler service
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/scheduler-service/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Index
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/scheduler-service/modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/scheduler-service/openapi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Openapi
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_11_4" >
        
          
          <label class="md-nav__link" for="__nav_2_3_11_4" id="__nav_2_3_11_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Classes
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_11_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_11_4">
            <span class="md-nav__icon md-icon"></span>
            Classes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/scheduler-service/classes/Attachment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Attachment
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/scheduler-service/classes/AttachmentRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AttachmentRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/scheduler-service/classes/Attendee/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Attendee
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/scheduler-service/classes/AttendeeRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AttendeeRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/scheduler-service/classes/AuditLog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AuditLog
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/scheduler-service/classes/AuditLogRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AuditLogRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/scheduler-service/classes/Calendar/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Calendar
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/scheduler-service/classes/CalendarDTO/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CalendarDTO
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/scheduler-service/classes/CalendarEventService/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CalendarEventService
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/scheduler-service/classes/CalendarRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CalendarRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/scheduler-service/classes/CalendarService/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CalendarService
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/scheduler-service/classes/ConditionalAuditLog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ConditionalAuditLog
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/scheduler-service/classes/Event/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Event
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/scheduler-service/classes/EventAttendeeView/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EventAttendeeView
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/scheduler-service/classes/EventAttendeeViewItemDTO/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EventAttendeeViewItemDTO
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/scheduler-service/classes/EventAttendeeViewRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EventAttendeeViewRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/scheduler-service/classes/EventDTO/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EventDTO
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/scheduler-service/classes/EventRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EventRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/scheduler-service/classes/EventService/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EventService
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/scheduler-service/classes/FreeBusyDTO/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FreeBusyDTO
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/scheduler-service/classes/SchedulerServiceComponent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SchedulerServiceComponent
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/scheduler-service/classes/Settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Settings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/scheduler-service/classes/SettingsRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SettingsRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/scheduler-service/classes/Subscription/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Subscription
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/scheduler-service/classes/SubscriptionRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SubscriptionRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/scheduler-service/classes/Theme/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Theme
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/scheduler-service/classes/ThemeRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ThemeRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/scheduler-service/classes/ValidatorService/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ValidatorService
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/scheduler-service/classes/WorkingHour/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WorkingHour
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/scheduler-service/classes/WorkingHourRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WorkingHourRepository
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_11_5" >
        
          
          <label class="md-nav__link" for="__nav_2_3_11_5" id="__nav_2_3_11_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Enums
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_11_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_11_5">
            <span class="md-nav__icon md-icon"></span>
            Enums
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/scheduler-service/enums/AccessRoleType/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AccessRoleType
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/scheduler-service/enums/DayOfWeekType/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DayOfWeekType
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/scheduler-service/enums/ErrorKeys/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ErrorKeys
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/scheduler-service/enums/IdentifierType/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IdentifierType
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/scheduler-service/enums/OwnerType/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OwnerType
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/scheduler-service/enums/PermissionKey/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PermissionKey
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/scheduler-service/enums/ResponseStatusType/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ResponseStatusType
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/scheduler-service/enums/StatusType/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    StatusType
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_11_6" >
        
          
          <label class="md-nav__link" for="__nav_2_3_11_6" id="__nav_2_3_11_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Interfaces
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_11_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_11_6">
            <span class="md-nav__icon md-icon"></span>
            Interfaces
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/scheduler-service/interfaces/AttachmentRelations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AttachmentRelations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/scheduler-service/interfaces/AttendeeRelations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AttendeeRelations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/scheduler-service/interfaces/CalendarRelations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CalendarRelations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/scheduler-service/interfaces/EventRelations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EventRelations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/scheduler-service/interfaces/ISchedulerConfig/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ISchedulerConfig
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/scheduler-service/interfaces/IStartEndTime/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IStartEndTime
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/scheduler-service/interfaces/SubscriptionRelations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SubscriptionRelations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/scheduler-service/interfaces/WorkingHourRelations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WorkingHourRelations
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_11_7" >
        
          
          <label class="md-nav__link" for="__nav_2_3_11_7" id="__nav_2_3_11_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_11_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_11_7">
            <span class="md-nav__icon md-icon"></span>
            Modules
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/scheduler-service/modules/CoreSchedulerBindings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CoreSchedulerBindings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/scheduler-service/modules/SchedulerBindings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SchedulerBindings
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_12" >
        
          
          <label class="md-nav__link" for="__nav_2_3_12" id="__nav_2_3_12_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Search service
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_12">
            <span class="md-nav__icon md-icon"></span>
            Search service
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/search-service/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Index
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/search-service/modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/search-service/openapi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Openapi
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_12_4" >
        
          
          <label class="md-nav__link" for="__nav_2_3_12_4" id="__nav_2_3_12_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Classes
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_12_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_12_4">
            <span class="md-nav__icon md-icon"></span>
            Classes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/search-service/classes/MySqlQueryBuilder/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MySqlQueryBuilder
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/search-service/classes/PsqlQueryBuilder/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PsqlQueryBuilder
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/search-service/classes/QueryList/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    QueryList
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/search-service/classes/RecentSearch/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RecentSearch
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/search-service/classes/RecentSearchRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RecentSearchRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/search-service/classes/SearchFilterProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SearchFilterProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/search-service/classes/SearchProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SearchProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/search-service/classes/SearchQuery/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SearchQuery
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/search-service/classes/SearchQueryBuilder/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SearchQueryBuilder
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/search-service/classes/SearchQueryRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SearchQueryRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/search-service/classes/SearchResult/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SearchResult
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/search-service/classes/SearchResultBase/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SearchResultBase
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/search-service/classes/SearchServiceComponent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SearchServiceComponent
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/search-service/classes/SearchableModel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SearchableModel
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_12_5" >
        
          
          <label class="md-nav__link" for="__nav_2_3_12_5" id="__nav_2_3_12_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Interfaces
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_12_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_12_5">
            <span class="md-nav__icon md-icon"></span>
            Interfaces
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/search-service/interfaces/AndClause/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AndClause
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/search-service/interfaces/OrClause/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OrClause
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/search-service/interfaces/SearchServiceConfig/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SearchServiceConfig
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/search-service/interfaces/Searchable/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Searchable
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_12_6" >
        
          
          <label class="md-nav__link" for="__nav_2_3_12_6" id="__nav_2_3_12_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_12_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_12_6">
            <span class="md-nav__icon md-icon"></span>
            Modules
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/search-service/modules/SearchServiceBindings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SearchServiceBindings
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_13" >
        
          
          <label class="md-nav__link" for="__nav_2_3_13" id="__nav_2_3_13_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Survey service
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_13">
            <span class="md-nav__icon md-icon"></span>
            Survey service
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Index
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/openapi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Openapi
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_13_4" >
        
          
          <label class="md-nav__link" for="__nav_2_3_13_4" id="__nav_2_3_13_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Classes
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_13_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_13_4">
            <span class="md-nav__icon md-icon"></span>
            Classes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/classes/BulkDeleteDto/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    BulkDeleteDto
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/classes/CreateSurveyHelperService/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CreateSurveyHelperService
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/classes/Options/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/classes/OptionsRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OptionsRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/classes/Question/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Question
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/classes/QuestionDto/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    QuestionDto
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/classes/QuestionDuplicateDto/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    QuestionDuplicateDto
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/classes/QuestionDuplicateHelperService/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    QuestionDuplicateHelperService
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/classes/QuestionHelperService/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    QuestionHelperService
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/classes/QuestionOptionService/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    QuestionOptionService
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/classes/QuestionRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    QuestionRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/classes/QuestionTemplate/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    QuestionTemplate
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/classes/QuestionTemplateRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    QuestionTemplateRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/classes/QuestionTemplateResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    QuestionTemplateResponse
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/classes/QuestionTemplateService/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    QuestionTemplateService
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/classes/QuestionTemplatesDto/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    QuestionTemplatesDto
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/classes/Section/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Section
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/classes/SectionRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SectionRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/classes/SectionService/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SectionService
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/classes/Survey/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Survey
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/classes/SurveyCycle/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SurveyCycle
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/classes/SurveyCycleRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SurveyCycleRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/classes/SurveyCycleService/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SurveyCycleService
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/classes/SurveyDto/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SurveyDto
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/classes/SurveyQuestion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SurveyQuestion
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/classes/SurveyQuestionDto/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SurveyQuestionDto
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/classes/SurveyQuestionRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SurveyQuestionRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/classes/SurveyQuestionService/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SurveyQuestionService
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/classes/SurveyRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SurveyRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/classes/SurveyResponder/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SurveyResponder
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/classes/SurveyResponderRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SurveyResponderRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/classes/SurveyResponderService/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SurveyResponderService
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/classes/SurveyResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SurveyResponse
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/classes/SurveyResponseDetail/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SurveyResponseDetail
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/classes/SurveyResponseDetailDto/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SurveyResponseDetailDto
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/classes/SurveyResponseDetailRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SurveyResponseDetailRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/classes/SurveyResponseDto/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SurveyResponseDto
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/classes/SurveyResponseRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SurveyResponseRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/classes/SurveyResponseService/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SurveyResponseService
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/classes/SurveyService/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SurveyService
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/classes/SurveyServiceComponent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SurveyServiceComponent
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/classes/TemplateQuestion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TemplateQuestion
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/classes/TemplateQuestionRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TemplateQuestionRepository
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_13_5" >
        
          
          <label class="md-nav__link" for="__nav_2_3_13_5" id="__nav_2_3_13_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Enums
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_13_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_13_5">
            <span class="md-nav__icon md-icon"></span>
            Enums
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/enums/PermissionKey/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PermissionKey
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/enums/QuestionStatus/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    QuestionStatus
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/enums/QuestionTemplateStatus/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    QuestionTemplateStatus
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/enums/QuestionType/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    QuestionType
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/enums/SurveyStatus/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SurveyStatus
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_13_6" >
        
          
          <label class="md-nav__link" for="__nav_2_3_13_6" id="__nav_2_3_13_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Interfaces
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_13_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_13_6">
            <span class="md-nav__icon md-icon"></span>
            Interfaces
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/interfaces/ISurveyServiceConfig/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ISurveyServiceConfig
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/interfaces/OptionsRelations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OptionsRelations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/interfaces/QuestionRelations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    QuestionRelations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/interfaces/SurveyCycleRelations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SurveyCycleRelations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/interfaces/SurveyRelations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SurveyRelations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/interfaces/SurveyResponderRelations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SurveyResponderRelations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/interfaces/SurveyResponseRelations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SurveyResponseRelations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/interfaces/TemplateQuestionRelations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TemplateQuestionRelations
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_13_7" >
        
          
          <label class="md-nav__link" for="__nav_2_3_13_7" id="__nav_2_3_13_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_13_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_13_7">
            <span class="md-nav__icon md-icon"></span>
            Modules
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/survey-service/modules/SurveyServiceBindings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SurveyServiceBindings
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_14" >
        
          
          <label class="md-nav__link" for="__nav_2_3_14" id="__nav_2_3_14_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Task service
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_14">
            <span class="md-nav__icon md-icon"></span>
            Task service
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/task-service/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Index
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/task-service/modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/task-service/openapi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Openapi
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_14_4" >
        
          
          <label class="md-nav__link" for="__nav_2_3_14_4" id="__nav_2_3_14_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Classes
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_14_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_14_4">
            <span class="md-nav__icon md-icon"></span>
            Classes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/task-service/classes/BpmnProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    BpmnProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/task-service/classes/CamundaService/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CamundaService
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/task-service/classes/ClientAppDTO/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ClientAppDTO
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/task-service/classes/CreateTaskCommand/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CreateTaskCommand
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/task-service/classes/EndTaskCommand/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EndTaskCommand
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/task-service/classes/Event/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Event
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/task-service/classes/EventController/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EventController
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/task-service/classes/EventProcessorService/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EventProcessorService
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/task-service/classes/EventRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EventRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/task-service/classes/EventWorkflow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EventWorkflow
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/task-service/classes/EventWorkflowRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EventWorkflowRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/task-service/classes/HttpClientService/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    HttpClientService
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/task-service/classes/SubscriberDTO/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SubscriberDTO
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/task-service/classes/SystemUserProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SystemUserProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/task-service/classes/Task/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Task
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/task-service/classes/TaskController/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TaskController
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/task-service/classes/TaskDto/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TaskDto
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/task-service/classes/TaskRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TaskRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/task-service/classes/TaskServiceComponent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TaskServiceComponent
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/task-service/classes/TaskUserTaskController/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TaskUserTaskController
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/task-service/classes/TaskWorkFlowRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TaskWorkFlowRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/task-service/classes/TaskWorkflow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TaskWorkflow
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/task-service/classes/UserTask/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserTask
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/task-service/classes/UserTaskRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserTaskRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/task-service/classes/UserTaskService/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserTaskService
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/task-service/classes/UtilityService/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UtilityService
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_14_5" >
        
          
          <label class="md-nav__link" for="__nav_2_3_14_5" id="__nav_2_3_14_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Enums
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_14_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_14_5">
            <span class="md-nav__icon md-icon"></span>
            Enums
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/task-service/enums/EventType/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EventType
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/task-service/enums/Source/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Source
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/task-service/enums/TaskPriority/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TaskPriority
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/task-service/enums/TaskSeverity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TaskSeverity
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/task-service/enums/TaskStatus/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TaskStatus
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/task-service/enums/UserTaskStatus/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserTaskStatus
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_14_6" >
        
          
          <label class="md-nav__link" for="__nav_2_3_14_6" id="__nav_2_3_14_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Interfaces
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_14_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_14_6">
            <span class="md-nav__icon md-icon"></span>
            Interfaces
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/task-service/interfaces/CamundaTask/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CamundaTask
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/task-service/interfaces/ICommand/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ICommand
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/task-service/interfaces/IEvent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IEvent
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/task-service/interfaces/IEventAdapter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IEventAdapter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/task-service/interfaces/IEventProcessor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IEventProcessor
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/task-service/interfaces/IIncomingConnector/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IIncomingConnector
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/task-service/interfaces/IOutgoingConnector/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IOutgoingConnector
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/task-service/interfaces/IUserTaskService/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IUserTaskService
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/task-service/interfaces/Message/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Message
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_14_7" >
        
          
          <label class="md-nav__link" for="__nav_2_3_14_7" id="__nav_2_3_14_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_14_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_14_7">
            <span class="md-nav__icon md-icon"></span>
            Modules
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/task-service/modules/TaskServiceBindings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TaskServiceBindings
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_15" >
        
          
          <label class="md-nav__link" for="__nav_2_3_15" id="__nav_2_3_15_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    User tenant service
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_15">
            <span class="md-nav__icon md-icon"></span>
            User tenant service
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Index
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/openapi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Openapi
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_15_4" >
        
          
          <label class="md-nav__link" for="__nav_2_3_15_4" id="__nav_2_3_15_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Classes
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_15_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_15_4">
            <span class="md-nav__icon md-icon"></span>
            Classes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/classes/AuthClient/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AuthClient
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/classes/AuthClientRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AuthClientRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/classes/Group/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Group
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/classes/GroupRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GroupRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/classes/GroupTenantInterceptor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GroupTenantInterceptor
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/classes/Role/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Role
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/classes/RoleRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RoleRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/classes/Tenant/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tenant
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/classes/TenantConfig/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TenantConfig
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/classes/TenantConfigRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TenantConfigRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/classes/TenantInterceptorInterceptor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TenantInterceptorInterceptor
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/classes/TenantRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TenantRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/classes/User/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    User
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/classes/UserCredentials/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserCredentials
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/classes/UserCredentialsRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserCredentialsRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/classes/UserDto/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserDto
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/classes/UserGroup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserGroup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/classes/UserGroupProjection/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserGroupProjection
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/classes/UserGroupRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserGroupRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/classes/UserGroupService/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserGroupService
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/classes/UserInvitation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserInvitation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/classes/UserInvitationRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserInvitationRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/classes/UserLevelPermission/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserLevelPermission
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/classes/UserLevelPermissionRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserLevelPermissionRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/classes/UserOperationsService/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserOperationsService
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/classes/UserRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/classes/UserTenant/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserTenant
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/classes/UserTenantInterceptorInterceptor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserTenantInterceptorInterceptor
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/classes/UserTenantPrefs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserTenantPrefs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/classes/UserTenantPrefsRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserTenantPrefsRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/classes/UserTenantRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserTenantRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/classes/UserTenantServiceComponent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserTenantServiceComponent
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/classes/UserView/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserView
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/classes/UserViewRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserViewRepository
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_15_5" >
        
          
          <label class="md-nav__link" for="__nav_2_3_15_5" id="__nav_2_3_15_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Enums
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_15_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_15_5">
            <span class="md-nav__icon md-icon"></span>
            Enums
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/enums/AuthProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AuthProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/enums/PermissionKey/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PermissionKey
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/enums/STATUS_CODE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    STATUS CODE
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/enums/TenantStatus/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TenantStatus
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/enums/UserConfigKey/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserConfigKey
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/enums/UserTenantGroupType/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserTenantGroupType
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_15_6" >
        
          
          <label class="md-nav__link" for="__nav_2_3_15_6" id="__nav_2_3_15_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Interfaces
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_15_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_15_6">
            <span class="md-nav__icon md-icon"></span>
            Interfaces
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/interfaces/GroupRelations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GroupRelations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/interfaces/IUserServiceConfig/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IUserServiceConfig
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/interfaces/RoleRelations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RoleRelations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/interfaces/TenantConfigRelations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TenantConfigRelations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/interfaces/TenantRelations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TenantRelations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/interfaces/UserCredentialsRelations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserCredentialsRelations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/interfaces/UserGroupRelations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserGroupRelations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/interfaces/UserRelations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserRelations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/interfaces/UserTenantRelations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserTenantRelations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/interfaces/UserTenantServiceComponentOptions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserTenantServiceComponentOptions
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_15_7" >
        
          
          <label class="md-nav__link" for="__nav_2_3_15_7" id="__nav_2_3_15_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_15_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_15_7">
            <span class="md-nav__icon md-icon"></span>
            Modules
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/modules/UserTenantServiceComponentBindings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserTenantServiceComponentBindings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/user-tenant-service/modules/UserTenantServiceKey/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UserTenantServiceKey
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_16" >
        
          
          <label class="md-nav__link" for="__nav_2_3_16" id="__nav_2_3_16_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Video conferencing service
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_16">
            <span class="md-nav__icon md-icon"></span>
            Video conferencing service
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Index
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/openapi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Openapi
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_16_4" >
        
          
          <label class="md-nav__link" for="__nav_2_3_16_4" id="__nav_2_3_16_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Classes
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_16_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_16_4">
            <span class="md-nav__icon md-icon"></span>
            Classes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/classes/AuditLog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AuditLog
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/classes/AuditLogRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AuditLogRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/classes/ChatArchiveService/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ChatArchiveService
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/classes/ChatSessionService/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ChatSessionService
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/classes/MeetingLinkIdGeneratorProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MeetingLinkIdGeneratorProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/classes/SessionAttendees/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SessionAttendees
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/classes/SessionAttendeesRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SessionAttendeesRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/classes/TwilioProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TwilioProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/classes/VideoChatArchiveController/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VideoChatArchiveController
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/classes/VideoChatSession/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VideoChatSession
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/classes/VideoChatSessionController/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VideoChatSessionController
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/classes/VideoChatSessionRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VideoChatSessionRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/classes/VideoConfServiceComponent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VideoConfServiceComponent
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/classes/VonageProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VonageProvider
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_16_5" >
        
          
          <label class="md-nav__link" for="__nav_2_3_16_5" id="__nav_2_3_16_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Enums
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_16_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_16_5">
            <span class="md-nav__icon md-icon"></span>
            Enums
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/enums/ExternalStorageName/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ExternalStorageName
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/enums/PermissionKeys/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PermissionKeys
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/enums/TwilioStatusCallbackEvents/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TwilioStatusCallbackEvents
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/enums/VonageEnums.ArchiveLayout/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VonageEnums.ArchiveLayout
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/enums/VonageEnums.ArchiveMode/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VonageEnums.ArchiveMode
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/enums/VonageEnums.FallbackType/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VonageEnums.FallbackType
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/enums/VonageEnums.MediaMode/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VonageEnums.MediaMode
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/enums/VonageEnums.OutputMode/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VonageEnums.OutputMode
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/enums/VonageEnums.Role/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VonageEnums.Role
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/enums/VonageEnums.SessionWebhookEvents/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VonageEnums.SessionWebhookEvents
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_16_6" >
        
          
          <label class="md-nav__link" for="__nav_2_3_16_6" id="__nav_2_3_16_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Interfaces
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_16_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_16_6">
            <span class="md-nav__icon md-icon"></span>
            Interfaces
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/interfaces/ArchiveResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ArchiveResponse
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/interfaces/ArchiveResponseList/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ArchiveResponseList
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/interfaces/AzureTargetOptions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AzureTargetOptions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/interfaces/ExternalStorageOptions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ExternalStorageOptions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/interfaces/IArchiveService/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IArchiveService
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/interfaces/IConfig/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IConfig
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/interfaces/ISessionService/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ISessionService
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/interfaces/MeetingOptions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MeetingOptions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/interfaces/MeetingResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MeetingResponse
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/interfaces/ResponseInterface/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ResponseInterface
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/interfaces/SessionOptions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SessionOptions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/interfaces/SessionResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SessionResponse
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/interfaces/TwilioConfig/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TwilioConfig
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/interfaces/TwilioMeetingOptions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TwilioMeetingOptions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/interfaces/TwilioMeetingResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TwilioMeetingResponse
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/interfaces/TwilioS3TargetOptions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TwilioS3TargetOptions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/interfaces/TwilioSessonOptions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TwilioSessonOptions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/interfaces/TwilioVideoChat/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TwilioVideoChat
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/interfaces/TwilioWebhookPayload/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TwilioWebhookPayload
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/interfaces/VideoChatFeatures/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VideoChatFeatures
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/interfaces/VideoChatInterface/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VideoChatInterface
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/interfaces/VideoChatSessionRelation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VideoChatSessionRelation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/interfaces/VonageAzureTargetOptions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VonageAzureTargetOptions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/interfaces/VonageConfig/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VonageConfig
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/interfaces/VonageMeetingOptions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VonageMeetingOptions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/interfaces/VonageMeetingResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VonageMeetingResponse
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/interfaces/VonageS3TargetOptions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VonageS3TargetOptions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/interfaces/VonageSessionOptions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VonageSessionOptions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/interfaces/VonageSessionWebhookPayload/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VonageSessionWebhookPayload
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/interfaces/VonageVideoChat/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VonageVideoChat
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/interfaces/WebhookPayloadParameters/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WebhookPayloadParameters
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_16_7" >
        
          
          <label class="md-nav__link" for="__nav_2_3_16_7" id="__nav_2_3_16_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_16_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_16_7">
            <span class="md-nav__icon md-icon"></span>
            Modules
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/modules/ServiceBindings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ServiceBindings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/modules/TwilioBindings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TwilioBindings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/modules/VideoChatBindings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VideoChatBindings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/modules/VonageBindings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VonageBindings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/video-conferencing-service/modules/VonageEnums/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VonageEnums
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Extensions
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            Extensions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Index
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Authentication
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../loopback4-authorization" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Authorization
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../loopback4-audit-log" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Audit Logs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../loopback4-soft-delete" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Soft Delete
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../loopback4-ratelimiter" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Rate Limiter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../loopback4-s3" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AWS S3
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../loopback4-kafka-client" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kafka Client
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../loopback4-helmet" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Helmet.js
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../loopback4-notifications" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Notifications
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../loopback4-vault" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    HashiCorp's Vault
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    ARC IaC
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            ARC IaC
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    IaC Modules
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            IaC Modules
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_1" >
        
          
          <label class="md-nav__link" for="__nav_3_2_1" id="__nav_3_2_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    AWS
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2_1">
            <span class="md-nav__icon md-icon"></span>
            AWS
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-refarch-control-tower-aft" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Control Tower AFT
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-arc-bootstrap" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Environment Bootstrap
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_1_3" >
        
          
          <label class="md-nav__link" for="__nav_3_2_1_3" id="__nav_3_2_1_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Network
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_3_2_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2_1_3">
            <span class="md-nav__icon md-icon"></span>
            Network
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-ref-arch-network" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Network
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-ref-arch-network/docs/module-usage-guide" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Module Usage Guide
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_1_4" >
        
          
          <label class="md-nav__link" for="__nav_3_2_1_4" id="__nav_3_2_1_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    RDBMS
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_3_2_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2_1_4">
            <span class="md-nav__icon md-icon"></span>
            RDBMS
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-ref-arch-db" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Aurora
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-ref-arch-db/docs/module-usage-guide" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Module Usage Guide
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/arc-lambda" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ARC Lambda
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/arc-cdk" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ARC CDK
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_1_7" >
        
          
          <label class="md-nav__link" for="__nav_3_2_1_7" id="__nav_3_2_1_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    ECS
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_3_2_1_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2_1_7">
            <span class="md-nav__icon md-icon"></span>
            ECS
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-arc-ecs" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ECS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-arc-ecs/docs/module-usage-guide" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Module Usage Guide
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_1_8" >
        
          
          <label class="md-nav__link" for="__nav_3_2_1_8" id="__nav_3_2_1_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    EKS
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_3_2_1_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2_1_8">
            <span class="md-nav__icon md-icon"></span>
            EKS
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-ref-arch-eks" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EKS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-ref-arch-eks/docs/module-usage-guide" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Module Usage Guide
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-refarch-tags" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tags
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_1_10" >
        
          
          <label class="md-nav__link" for="__nav_3_2_1_10" id="__nav_3_2_1_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    OpenSearch
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_3_2_1_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2_1_10">
            <span class="md-nav__icon md-icon"></span>
            OpenSearch
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-arc-opensearch" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OpenSearch
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-arc-opensearch/docs/module-usage-guide" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Module Usage Guide
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/typescript-lambda-boilerplate" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TypeScript Lambda Boilerplate
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-cloud-custodian" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cloud Custodian
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_1_13" >
        
          
          <label class="md-nav__link" for="__nav_3_2_1_13" id="__nav_3_2_1_13_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    CloudFront
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_3_2_1_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2_1_13">
            <span class="md-nav__icon md-icon"></span>
            CloudFront
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-arc-cloudfront" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CloudFront
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-arc-cloudfront/docs/module-usage-guide" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Module Usage Guide
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_1_14" >
        
          
          <label class="md-nav__link" for="__nav_3_2_1_14" id="__nav_3_2_1_14_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Elasticache
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_3_2_1_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2_1_14">
            <span class="md-nav__icon md-icon"></span>
            Elasticache
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-arc-cache" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    cache
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-arc-cache/docs/module-usage-guide" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Module Usage Guide
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_1_15" >
        
          
          <label class="md-nav__link" for="__nav_3_2_1_15" id="__nav_3_2_1_15_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    ARC CICD
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_3_2_1_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2_1_15">
            <span class="md-nav__icon md-icon"></span>
            ARC CICD
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-arc-cicd" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    cicd
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-arc-cicd/docs/module-usage-guide" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Module Usage Guide
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_1_16" >
        
          
          <label class="md-nav__link" for="__nav_3_2_1_16" id="__nav_3_2_1_16_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Healthcheck
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_3_2_1_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2_1_16">
            <span class="md-nav__icon md-icon"></span>
            Healthcheck
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-arc-healthcheck" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Healthcheck
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-arc-healthcheck/docs/module-usage-guide" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Module Usage Guide
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_1_17" >
        
          
          <label class="md-nav__link" for="__nav_3_2_1_17" id="__nav_3_2_1_17_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    KMS
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_3_2_1_17_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2_1_17">
            <span class="md-nav__icon md-icon"></span>
            KMS
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-arc-kms" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    KMS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-arc-kms/docs/module-usage-guide" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Module Usage Guide
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-arc-common-data" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ARC Common Data
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_1_19" >
        
          
          <label class="md-nav__link" for="__nav_3_2_1_19" id="__nav_3_2_1_19_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Waf
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_3_2_1_19_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2_1_19">
            <span class="md-nav__icon md-icon"></span>
            Waf
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-arc-waf" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Waf
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-arc-waf/docs/module-usage-guide" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Module Usage Guide
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_1_20" >
        
          
          <label class="md-nav__link" for="__nav_3_2_1_20" id="__nav_3_2_1_20_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Vpn
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_3_2_1_20_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2_1_20">
            <span class="md-nav__icon md-icon"></span>
            Vpn
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-arc-vpn" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Vpn
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-arc-vpn/docs/module-usage-guide" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Module Usage Guide
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_1_21" >
        
          
          <label class="md-nav__link" for="__nav_3_2_1_21" id="__nav_3_2_1_21_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    GitHub-Runner
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_3_2_1_21_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2_1_21">
            <span class="md-nav__icon md-icon"></span>
            GitHub-Runner
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-arc-github-runner" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GitHub-Runner
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-arc-github-runner/docs/module-usage-guide" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Module Usage Guide
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_1_22" >
        
          
          <label class="md-nav__link" for="__nav_3_2_1_22" id="__nav_3_2_1_22_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Workspaces
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_3_2_1_22_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2_1_22">
            <span class="md-nav__icon md-icon"></span>
            Workspaces
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-arc-workspace" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Workspace
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-arc-workspace/docs/module-usage-guide" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Module Usage Guide
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_1_23" >
        
          
          <label class="md-nav__link" for="__nav_3_2_1_23" id="__nav_3_2_1_23_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Postgres-Management
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_3_2_1_23_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2_1_23">
            <span class="md-nav__icon md-icon"></span>
            Postgres-Management
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-postgresql-aws-arc-mgmt" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Postgresql
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-postgresql-aws-arc-mgmt/docs/module-usage-guide" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Module Usage Guide
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_1_24" >
        
          
          <label class="md-nav__link" for="__nav_3_2_1_24" id="__nav_3_2_1_24_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Security
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_3_2_1_24_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2_1_24">
            <span class="md-nav__icon md-icon"></span>
            Security
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-arc-security" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Security
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-arc-security/docs/module-usage-guide" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Module Usage Guide
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_1_25" >
        
          
          <label class="md-nav__link" for="__nav_3_2_1_25" id="__nav_3_2_1_25_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Synthetic-Monitoring
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_3_2_1_25_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2_1_25">
            <span class="md-nav__icon md-icon"></span>
            Synthetic-Monitoring
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-arc-synthetic-monitoring" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Synthetic-Monitoring
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-arc-synthetic-monitoring/docs/module-usage-guide" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Module Usage Guide
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_1_26" >
        
          
          <label class="md-nav__link" for="__nav_3_2_1_26" id="__nav_3_2_1_26_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    ARC Backup
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_3_2_1_26_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2_1_26">
            <span class="md-nav__icon md-icon"></span>
            ARC Backup
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-arc-backup" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Backup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-arc-backup/docs/module-usage-guide" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Module Usage Guide
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_1_27" >
        
          
          <label class="md-nav__link" for="__nav_3_2_1_27" id="__nav_3_2_1_27_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Billing
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_3_2_1_27_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2_1_27">
            <span class="md-nav__icon md-icon"></span>
            Billing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-arc-billing" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Billing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-arc-billing/docs/module-usage-guide" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Module Usage Guide
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_1_28" >
        
          
          <label class="md-nav__link" for="__nav_3_2_1_28" id="__nav_3_2_1_28_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Document-DB
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_3_2_1_28_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2_1_28">
            <span class="md-nav__icon md-icon"></span>
            Document-DB
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-arc-document-db" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Document-DB
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-arc-document-db/docs/module-usage-guide" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Module Usage Guide
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_1_29" >
        
          
          <label class="md-nav__link" for="__nav_3_2_1_29" id="__nav_3_2_1_29_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    GitHub
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_3_2_1_29_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2_1_29">
            <span class="md-nav__icon md-icon"></span>
            GitHub
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-arc-github-iam" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IAM
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-arc-github-iam/docs/module-usage-guide" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Module Usage Guide
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_1_30" >
        
          
          <label class="md-nav__link" for="__nav_3_2_1_30" id="__nav_3_2_1_30_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    EC2
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_3_2_1_30_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2_1_30">
            <span class="md-nav__icon md-icon"></span>
            EC2
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-arc-ec2" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EC2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-arc-ec2/docs/module-usage-guide" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Module Usage Guide
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_1_31" >
        
          
          <label class="md-nav__link" for="__nav_3_2_1_31" id="__nav_3_2_1_31_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    S3
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_3_2_1_31_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2_1_31">
            <span class="md-nav__icon md-icon"></span>
            S3
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-arc-s3" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    S3
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-arc-s3/docs/module-usage-guide" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Module Usage Guide
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_1_32" >
        
          
          <label class="md-nav__link" for="__nav_3_2_1_32" id="__nav_3_2_1_32_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Kinesis-Stream
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_3_2_1_32_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2_1_32">
            <span class="md-nav__icon md-icon"></span>
            Kinesis-Stream
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-arc-kinesis-stream" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kinesis-Stream
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-arc-kinesis-stream/docs/module-usage-guide" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Module Usage Guide
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_1_33" >
        
          
          <label class="md-nav__link" for="__nav_3_2_1_33" id="__nav_3_2_1_33_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Transit-Gateway
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_3_2_1_33_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2_1_33">
            <span class="md-nav__icon md-icon"></span>
            Transit-Gateway
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-arc-transit-gateway" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Transit-Gateway
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-arc-transit-gateway/docs/module-usage-guide" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Module Usage Guide
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_1_34" >
        
          
          <label class="md-nav__link" for="__nav_3_2_1_34" id="__nav_3_2_1_34_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    DMS
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_3_2_1_34_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2_1_34">
            <span class="md-nav__icon md-icon"></span>
            DMS
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-arc-dms" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DMS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-aws-dms/docs/module-usage-guide" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Module Usage Guide
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_1_35" >
        
          
          <label class="md-nav__link" for="__nav_3_2_1_35" id="__nav_3_2_1_35_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Backstage
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_3_2_1_35_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2_1_35">
            <span class="md-nav__icon md-icon"></span>
            Backstage
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/arc-backstage-ecs-app" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ECS
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2_2" id="__nav_3_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Cloud Native
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2_2">
            <span class="md-nav__icon md-icon"></span>
            Cloud Native
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/modules/terraform-k8s-app" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kubernetes App
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Reference Architectures
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            Reference Architectures
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/reference_architectures/aws_account_baseline" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AWS Account Baseline
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/reference_architectures/control_tower_aft_setup" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Control Tower and AFT
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/reference_architectures/control_tower_lza_setup" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Control Tower and LZA
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/reference_architectures/map_migrations" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MAP Migrations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/reference_architectures/backstage_mono_repo_setup" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Backstage Mono Repo Setup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/reference_architectures/pre-commit-usage-guide" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pre-Commit Usage
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/reference_architectures/arc_iac_lza" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ARC IaC and LZA
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/reference_architectures/network_baseline" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Network Baseline
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/reference_architectures/ecs_platform_baseline" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ECS Platform Baseline
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/reference_architectures/eks_platform_baseline" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EKS Platform Baseline
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/reference_architectures/lambda_platform_baseline" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lambda Platform Baseline
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/reference_architectures/windows_basic_platform_baseline" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Windows Basic Platform Baseline
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-iac-docs/reference_architectures/windows_enterprise_platform_baseline" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Windows Enterprise Platform Baseline
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    ARC Monthly Updates
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            ARC Monthly Updates
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-newsletter/september2025/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    September 2025
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-newsletter/july2025/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    July 2025
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-newsletter/february2025/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    February 2025
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-newsletter/january2025/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    January 2025
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-newsletter/december2024/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    December 2024
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-newsletter/november2024/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    November 2024
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-newsletter/october2024/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    October 2024
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-newsletter/september2024/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    September 2024
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    ARC SaaS
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            ARC SaaS
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Services
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            Services
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2_1" >
        
          
          <label class="md-nav__link" for="__nav_5_2_1" id="__nav_5_2_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Orchestrator service
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2_1">
            <span class="md-nav__icon md-icon"></span>
            Orchestrator service
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/orchestrator-service/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Index
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/orchestrator-service/modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2_1_3" >
        
          
          <label class="md-nav__link" for="__nav_5_2_1_3" id="__nav_5_2_1_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Classes
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_5_2_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2_1_3">
            <span class="md-nav__icon md-icon"></span>
            Classes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/orchestrator-service/classes/BuilderService/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    BuilderService
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/orchestrator-service/classes/OrchestratorService/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OrchestratorService
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/orchestrator-service/classes/OrchestratorServiceComponent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OrchestratorServiceComponent
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/orchestrator-service/classes/TenantDeploymentHandlerProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TenantDeploymentHandlerProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/orchestrator-service/classes/TenantDeprovisioningHandlerProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TenantDeprovisioningHandlerProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/orchestrator-service/classes/TenantProvisioningFailureHandlerProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TenantProvisioningFailureHandlerProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/orchestrator-service/classes/TenantProvisioningHandlerProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TenantProvisioningHandlerProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/orchestrator-service/classes/TenantProvisioningSuccessHandlerProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TenantProvisioningSuccessHandlerProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/orchestrator-service/classes/TierDetailsProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TierDetailsProvider
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2_1_4" >
        
          
          <label class="md-nav__link" for="__nav_5_2_1_4" id="__nav_5_2_1_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Enums
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_5_2_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2_1_4">
            <span class="md-nav__icon md-icon"></span>
            Enums
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/orchestrator-service/enums/DefaultEventTypes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DefaultEventTypes
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2_1_5" >
        
          
          <label class="md-nav__link" for="__nav_5_2_1_5" id="__nav_5_2_1_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Interfaces
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_5_2_1_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2_1_5">
            <span class="md-nav__icon md-icon"></span>
            Interfaces
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/orchestrator-service/interfaces/BuilderServiceInterface/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    BuilderServiceInterface
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/orchestrator-service/interfaces/OrchestratorServiceInterface/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OrchestratorServiceInterface
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2_1_6" >
        
          
          <label class="md-nav__link" for="__nav_5_2_1_6" id="__nav_5_2_1_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_5_2_1_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2_1_6">
            <span class="md-nav__icon md-icon"></span>
            Modules
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/orchestrator-service/modules/OrchestratorServiceBindings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OrchestratorServiceBindings
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2_2" id="__nav_5_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Subscription service
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2_2">
            <span class="md-nav__icon md-icon"></span>
            Subscription service
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/subscription-service/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Index
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/subscription-service/modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2_2_3" >
        
          
          <label class="md-nav__link" for="__nav_5_2_2_3" id="__nav_5_2_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Classes
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_5_2_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2_2_3">
            <span class="md-nav__icon md-icon"></span>
            Classes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/subscription-service/classes/BillingCycle/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    BillingCycle
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/subscription-service/classes/BillingCycleRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    BillingCycleRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/subscription-service/classes/Currency/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Currency
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/subscription-service/classes/CurrencyRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CurrencyRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/subscription-service/classes/Plan/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Plan
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/subscription-service/classes/PlanRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PlanRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/subscription-service/classes/PlanSizes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PlanSizes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/subscription-service/classes/PlanSizesRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PlanSizesRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/subscription-service/classes/Resource/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Resource
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/subscription-service/classes/ResourceRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ResourceRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/subscription-service/classes/Service/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Service
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/subscription-service/classes/ServiceRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ServiceRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/subscription-service/classes/Subscription/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Subscription
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/subscription-service/classes/SubscriptionRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SubscriptionRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/subscription-service/classes/SubscriptionServiceApplication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SubscriptionServiceApplication
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/subscription-service/classes/SubscriptionServiceComponent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SubscriptionServiceComponent
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2_2_4" >
        
          
          <label class="md-nav__link" for="__nav_5_2_2_4" id="__nav_5_2_2_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Enums
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_5_2_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2_2_4">
            <span class="md-nav__icon md-icon"></span>
            Enums
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/subscription-service/enums/BillingCycleDuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    BillingCycleDuration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/subscription-service/enums/SubscriptionStatus/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SubscriptionStatus
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2_2_5" >
        
          
          <label class="md-nav__link" for="__nav_5_2_2_5" id="__nav_5_2_2_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Interfaces
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_5_2_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2_2_5">
            <span class="md-nav__icon md-icon"></span>
            Interfaces
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/subscription-service/interfaces/ISubscriptionServiceConfig/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ISubscriptionServiceConfig
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/subscription-service/interfaces/PlanRelations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PlanRelations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/subscription-service/interfaces/PlanSizesRelations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PlanSizesRelations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/subscription-service/interfaces/ResourceRelations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ResourceRelations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/subscription-service/interfaces/ServiceRelations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ServiceRelations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/subscription-service/interfaces/SubscriptionRelations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SubscriptionRelations
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2_2_6" >
        
          
          <label class="md-nav__link" for="__nav_5_2_2_6" id="__nav_5_2_2_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_5_2_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2_2_6">
            <span class="md-nav__icon md-icon"></span>
            Modules
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/subscription-service/modules/SubscriptionServiceBindings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SubscriptionServiceBindings
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2_3" >
        
          
          <label class="md-nav__link" for="__nav_5_2_3" id="__nav_5_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Tenant management service
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2_3">
            <span class="md-nav__icon md-icon"></span>
            Tenant management service
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Index
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2_3_3" >
        
          
          <label class="md-nav__link" for="__nav_5_2_3_3" id="__nav_5_2_3_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Classes
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_5_2_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2_3_3">
            <span class="md-nav__icon md-icon"></span>
            Classes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/classes/Address/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Address
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/classes/AddressRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AddressRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/classes/Contact/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contact
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/classes/ContactRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ContactRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/classes/CreateLeadDTO/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CreateLeadDTO
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/classes/CryptoHelperService/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CryptoHelperService
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/classes/EventConnector/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EventConnector
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/classes/Invoice/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Invoice
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/classes/InvoicePDFGenerator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    InvoicePDFGenerator
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/classes/InvoiceRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    InvoiceRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/classes/Lead/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lead
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/classes/LeadAuthenticator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LeadAuthenticator
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/classes/LeadRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LeadRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/classes/LeadToken/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LeadToken
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/classes/LeadTokenRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LeadTokenRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/classes/LeadTokenVerifierProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LeadTokenVerifierProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/classes/NotificationService/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NotificationService
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/classes/OnboardingService/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OnboardingService
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/classes/ProvisioningDTO/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ProvisioningDTO
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/classes/ProvisioningService/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ProvisioningService
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/classes/Resource/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Resource
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/classes/ResourceRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ResourceRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/classes/SubscriptionDTO/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SubscriptionDTO
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/classes/SystemUserProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SystemUserProvider
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/classes/Tenant/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tenant
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/classes/TenantManagementServiceComponent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TenantManagementServiceComponent
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/classes/TenantMgmtServiceApplication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TenantMgmtServiceApplication
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/classes/TenantOnboardDTO/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TenantOnboardDTO
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/classes/TenantRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TenantRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/classes/VerifyLeadResponseDTO/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VerifyLeadResponseDTO
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/classes/WebhookDTO/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WebhookDTO
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/classes/WebhookSecret/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WebhookSecret
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/classes/WebhookSecretRepository/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WebhookSecretRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/classes/WebhookTenantManagementServiceComponent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WebhookTenantManagementServiceComponent
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/classes/WebhookVerifierProvider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WebhookVerifierProvider
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2_3_4" >
        
          
          <label class="md-nav__link" for="__nav_5_2_3_4" id="__nav_5_2_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Enums
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_5_2_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2_3_4">
            <span class="md-nav__icon md-icon"></span>
            Enums
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/enums/EventTypes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EventTypes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/enums/InvoiceStatus/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    InvoiceStatus
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/enums/NotificationType/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NotificationType
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/enums/ResourceTypes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ResourceTypes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/enums/SubscriptionStatus/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SubscriptionStatus
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/enums/TenantStatus/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TenantStatus
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/enums/WebhookStatus/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WebhookStatus
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/enums/WebhookType/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WebhookType
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2_3_5" >
        
          
          <label class="md-nav__link" for="__nav_5_2_3_5" id="__nav_5_2_3_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Interfaces
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_5_2_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2_3_5">
            <span class="md-nav__icon md-icon"></span>
            Interfaces
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/interfaces/IBillingCycle/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IBillingCycle
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/interfaces/ICurrency/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ICurrency
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/interfaces/IEventConnector/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IEventConnector
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/interfaces/IMetaData/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IMetaData
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/interfaces/IPlan/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IPlan
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/interfaces/IProvisioningService/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IProvisioningService
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/interfaces/ISubscription/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ISubscription
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/interfaces/ITenantManagementServiceConfig/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ITenantManagementServiceConfig
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/interfaces/IWebhookHandler/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IWebhookHandler
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/interfaces/InvoiceRelations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    InvoiceRelations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/interfaces/LeadRelations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LeadRelations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/interfaces/ResourceRelations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ResourceRelations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/interfaces/TenantRelations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TenantRelations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/interfaces/WebhookNotificationServiceType/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WebhookNotificationServiceType
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2_3_6" >
        
          
          <label class="md-nav__link" for="__nav_5_2_3_6" id="__nav_5_2_3_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_5_2_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2_3_6">
            <span class="md-nav__icon md-icon"></span>
            Modules
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/services/tenant-management-service/modules/TenantManagementServiceBindings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TenantManagementServiceBindings
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-saas-docs/eks" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EKS
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    ARC UI
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            ARC UI
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-ui-docs/arc-react" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ARC React
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2" >
        
          
          <label class="md-nav__link" for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    ARC Angular
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2">
            <span class="md-nav__icon md-icon"></span>
            ARC Angular
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-ui-docs/arc-angular" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    BoilerPlate
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2_2" >
        
          
          <label class="md-nav__link" for="__nav_6_2_2" id="__nav_6_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Libraries
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2_2">
            <span class="md-nav__icon md-icon"></span>
            Libraries
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-ui-docs/arc-angular/libraries/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-ui-docs/arc-angular/libraries/search" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Search
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-ui-docs/arc-angular/libraries/user-onboarding" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    User-Onboarding
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-ui-docs/arc-angular/libraries/workflow" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Workflow-Creator
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arc-ui-docs/arc-saas-react" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ARC SaaS React
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#install" class="md-nav__link">
    <span class="md-ellipsis">
      Install
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quick-starter" class="md-nav__link">
    <span class="md-ellipsis">
      Quick Starter
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#detailed-usage" class="md-nav__link">
    <span class="md-ellipsis">
      Detailed Usage
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Detailed Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#oauth2-client-password" class="md-nav__link">
    <span class="md-ellipsis">
      Oauth2-client-password
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#http-bearer" class="md-nav__link">
    <span class="md-ellipsis">
      Http-bearer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#local" class="md-nav__link">
    <span class="md-ellipsis">
      local
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#oauth2-resource-owner-password" class="md-nav__link">
    <span class="md-ellipsis">
      Oauth2-resource-owner-password
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#otp" class="md-nav__link">
    <span class="md-ellipsis">
      OTP
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#google-oauth-2" class="md-nav__link">
    <span class="md-ellipsis">
      Google Oauth 2
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instagram-oauth-2" class="md-nav__link">
    <span class="md-ellipsis">
      Instagram Oauth 2
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apple-oauth-2" class="md-nav__link">
    <span class="md-ellipsis">
      Apple Oauth 2
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#facebook-oauth-2" class="md-nav__link">
    <span class="md-ellipsis">
      Facebook Oauth 2
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#keycloak" class="md-nav__link">
    <span class="md-ellipsis">
      Keycloak
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-verifier-for-individual-routes" class="md-nav__link">
    <span class="md-ellipsis">
      Custom Verifier for Individual Routes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#saml" class="md-nav__link">
    <span class="md-ellipsis">
      SAML
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#https-proxy-support-for-keycloak-and-google-auth" class="md-nav__link">
    <span class="md-ellipsis">
      Https proxy support for keycloak and google auth
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#middleware-sequence-support" class="md-nav__link">
    <span class="md-ellipsis">
      Middleware Sequence Support
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Middleware Sequence Support">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#custom-sequence-support" class="md-nav__link">
    <span class="md-ellipsis">
      Custom Sequence Support
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#passport-auth0" class="md-nav__link">
    <span class="md-ellipsis">
      Passport Auth0
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#feedback" class="md-nav__link">
    <span class="md-ellipsis">
      Feedback
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#contributing" class="md-nav__link">
    <span class="md-ellipsis">
      Contributing
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#code-of-conduct" class="md-nav__link">
    <span class="md-ellipsis">
      Code of conduct
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#license" class="md-nav__link">
    <span class="md-ellipsis">
      License
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/sourcefuse/arc-docs/edit/master/docs/arc-api-docs/extensions/loopback4-authentication/README.md" title="Edit this page" class="md-content__button md-icon" rel="edit">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  


<p><a href="https://sourcefuse.github.io/arc-docs/arc-api-docs" target="_blank"><img src="https://github.com/sourcefuse/loopback4-microservice-catalog/blob/master/docs/assets/logo-dark-bg.png?raw=true" alt="ARC By SourceFuse logo" title="ARC By SourceFuse" align="right" width="150" /></a></p>
<h1 id="loopback4-authentication"><a href="https://github.com/sourcefuse/loopback4-authentication">loopback4-authentication</a><a class="headerlink" href="#loopback4-authentication" title="Permanent link">&para;</a></h1>
<p align="left">
<a href="https://www.npmjs.com/package/loopback4-authentication">
<img src="https://img.shields.io/npm/v/loopback4-authentication.svg" alt="npm version" />
</a>
<a href="https://sonarcloud.io/summary/new_code?id=sourcefuse_loopback4-authentication" target="_blank">
<img alt="Sonar Quality Gate" src="https://img.shields.io/sonar/quality_gate/sourcefuse_loopback4-authentication?server=https%3A%2F%2Fsonarcloud.io">
</a>
<a href="https://app.snyk.io/org/ashishkaushik/reporting?context[page]=issues-detail&project_target=%255B%2522sourcefuse%252Floopback4-authentication%2522%255D&project_origin=%255B%2522github%2522%255D&issue_status=%255B%2522Open%2522%255D&issue_by=Severity&table_issues_detail_cols=SCORE%257CCVE%257CCWE%257CPROJECT%257CEXPLOIT%2520MATURITY%257CAUTO%2520FIXABLE%257CINTRODUCED%257CSNYK%2520PRODUCT&v=1">
<img alt="Synk Status" src="https://img.shields.io/badge/SYNK_SECURITY-MONITORED-GREEN">
</a>
<a href="https://github.com/sourcefuse/loopback4-authentication/graphs/contributors" target="_blank">
<img alt="GitHub contributors" src="https://img.shields.io/github/contributors/sourcefuse/loopback4-authentication?">
</a>
<a href="https://www.npmjs.com/package/loopback4-authentication" target="_blank">
<img alt="downloads" src="https://img.shields.io/npm/dw/loopback4-authentication.svg">
</a>
<a href="https://github.com/sourcefuse/loopback4-authentication/blob/master/LICENSE">
<img src="https://img.shields.io/github/license/sourcefuse/loopback4-authentication.svg" alt="License" />
</a>
<a href="https://loopback.io/" target="_blank">
<img alt="Powered By LoopBack 4" src="https://img.shields.io/badge/Powered%20by-LoopBack 4-brightgreen" />
</a>
</p>

<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>This is a loopback-next extension for adding authentication layer to a REST application in loopback 4.
This extension is based on the implementation guidelines provided on official <a href="https://github.com/strongloop/loopback-next/blob/master/packages/authentication/README.md">@loopback/authentication</a> page.
It provides support for seven passport based strategies.</p>
<ol>
<li><a href="https://github.com/jaredhanson/passport-oauth2-client-password">passport-oauth2-client-password</a> - OAuth 2.0 client password authentication strategy for Passport. This module lets you authenticate requests containing client credentials in the request body, as <a href="http://tools.ietf.org/html/draft-ietf-oauth-v2-27#section-2.3.1">defined</a> by the OAuth 2.0 specification.</li>
<li><a href="https://github.com/jaredhanson/passport-http-bearer">passport-http-bearer</a> - HTTP Bearer authentication strategy for Passport. This module lets you authenticate HTTP requests using bearer tokens, as specified by <a href="https://tools.ietf.org/html/rfc6750">RFC 6750</a>, in your Node.js applications.</li>
<li><a href="https://github.com/jaredhanson/passport-local">passport-local</a> - Passport strategy for authenticating with a username and password. This module lets you authenticate using a username and password in your Node.js applications.</li>
<li><a href="https://www.npmjs.com/package/passport-oauth2-resource-owner-password">passport-oauth2-resource-owner-password</a> - OAuth 2.0 resource owner password authentication strategy for Passport. This module lets you authenticate requests containing resource owner credentials in the request body, as <a href="http://tools.ietf.org/html/draft-ietf-oauth-v2-27#section-1.3.3">defined</a> by the OAuth 2.0 specification.</li>
<li><a href="https://github.com/jaredhanson/passport-google-oauth2">passport-google-oauth2</a> - Passport strategy for authenticating with Google using the Google OAuth 2.0 API. This module lets you authenticate using Google in your Node.js applications.</li>
<li><a href="https://github.com/exlinc/keycloak-passport">keycloak-passport</a> - Passport strategy for authenticating with Keycloak. This library offers a production-ready and maintained Keycloak Passport connector.</li>
<li><a href="https://github.com/jaredhanson/passport-instagram">passport-instagram</a> - Passport strategy for authenticating with Instagram using the Instagram OAuth 2.0 API. This module lets you authenticate using Instagram in your Node.js applications.</li>
<li><a href="https://github.com/ananay/passport-apple">passport-apple</a> - Passport strategy for authenticating with Apple using the Apple OAuth 2.0 API. This module lets you authenticate using Apple in your Node.js applications.</li>
<li><a href="https://github.com/jaredhanson/passport-facebook">passport-facebook</a> - Passport strategy for authenticating with Facebook using the Facebook OAuth 2.0 API. This module lets you authenticate using Facebook in your Node.js applications.</li>
<li><a href="https://github.com/ebuychance/passport-cognito-oauth2">passport-cognito-oauth2</a> - Passport strategy for authenticating with Cognito using the Cognito OAuth 2.0 API. This module lets you authenticate using Cognito in your Node.js applications.</li>
<li><a href="https://github.com/node-saml/passport-saml">passport-SAML</a> - Passport strategy for authenticating with SAML using the SAML 2.0 API. This module lets you authenticate using SAML in your Node.js applications</li>
<li>custom-passport-otp - Created a Custom Passport strategy for 2-Factor-Authentication using OTP (One Time Password).</li>
<li><a href="https://github.com/auth0/passport-auth0">passport-auth0</a> - Passport strategy for authenticating with auth0. This module lets you authenticate using <a href="https://auth0.com/">Auth0</a> in your Node.js applications.</li>
</ol>
<p>You can use one or more strategies of the above in your application. For each of the strategy (only which you use), you just need to provide your own verifier function, making it easily configurable. Rest of the strategy implementation intricacies is handled by extension.</p>
<h2 id="install">Install<a class="headerlink" href="#install" title="Permanent link">&para;</a></h2>
<div class="language-sh highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a>npm<span class="w"> </span>install<span class="w"> </span>loopback4-authentication
</code></pre></div></td></tr></table></div>
<h2 id="quick-starter">Quick Starter<a class="headerlink" href="#quick-starter" title="Permanent link">&para;</a></h2>
<p>For a quick starter guide, you can refer to our <a href="https://github.com/sourcefuse/loopback4-starter">loopback 4 starter</a> application which utilizes all of the above auth strategies from the extension in a simple multi-tenant application. Refer to the auth module <a href="https://github.com/sourcefuse/loopback4-starter/tree/master/src/modules/auth">there</a> for specific details on authentication mechanism.</p>
<h2 id="detailed-usage">Detailed Usage<a class="headerlink" href="#detailed-usage" title="Permanent link">&para;</a></h2>
<p>The first and common step for all of the startegies is to add the component to the application. See below</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-1-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-1-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-1-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-1-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-1-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-1-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-1-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-1-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-1-10">10</a></span>
<span class="normal"><a href="#__codelineno-1-11">11</a></span>
<span class="normal"><a href="#__codelineno-1-12">12</a></span>
<span class="normal"><a href="#__codelineno-1-13">13</a></span>
<span class="normal"><a href="#__codelineno-1-14">14</a></span>
<span class="normal"><a href="#__codelineno-1-15">15</a></span>
<span class="normal"><a href="#__codelineno-1-16">16</a></span>
<span class="normal"><a href="#__codelineno-1-17">17</a></span>
<span class="normal"><a href="#__codelineno-1-18">18</a></span>
<span class="normal"><a href="#__codelineno-1-19">19</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="c1">// application.ts</span>
<a id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">ToDoApplication</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">BootMixin</span><span class="p">(</span>
<a id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="w">  </span><span class="nx">ServiceMixin</span><span class="p">(</span><span class="nx">RepositoryMixin</span><span class="p">(</span><span class="nx">RestApplication</span><span class="p">)),</span>
<a id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">options</span><span class="o">:</span><span class="w"> </span><span class="kt">ApplicationConfig</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{})</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-6" name="__codelineno-1-6"></a><span class="w">    </span><span class="k">super</span><span class="p">(</span><span class="nx">options</span><span class="p">);</span>
<a id="__codelineno-1-7" name="__codelineno-1-7"></a>
<a id="__codelineno-1-8" name="__codelineno-1-8"></a><span class="w">    </span><span class="c1">// Set up the custom sequence</span>
<a id="__codelineno-1-9" name="__codelineno-1-9"></a><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">sequence</span><span class="p">(</span><span class="nx">MySequence</span><span class="p">);</span>
<a id="__codelineno-1-10" name="__codelineno-1-10"></a>
<a id="__codelineno-1-11" name="__codelineno-1-11"></a><span class="w">    </span><span class="c1">// Set up default home page</span>
<a id="__codelineno-1-12" name="__codelineno-1-12"></a><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="k">static</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;../public&#39;</span><span class="p">));</span>
<a id="__codelineno-1-13" name="__codelineno-1-13"></a>
<a id="__codelineno-1-14" name="__codelineno-1-14"></a><span class="w">    </span><span class="c1">// Add authentication component</span>
<a id="__codelineno-1-15" name="__codelineno-1-15"></a><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="nx">AuthenticationComponent</span><span class="p">);</span>
<a id="__codelineno-1-16" name="__codelineno-1-16"></a>
<a id="__codelineno-1-17" name="__codelineno-1-17"></a><span class="w">    </span><span class="c1">// .... Rest of the code below</span>
<a id="__codelineno-1-18" name="__codelineno-1-18"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-1-19" name="__codelineno-1-19"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Once this is done, you are ready to configure any of the available strategy in the application.</p>
<h3 id="oauth2-client-password">Oauth2-client-password<a class="headerlink" href="#oauth2-client-password" title="Permanent link">&para;</a></h3>
<p>First, create an AuthClient model implementing the IAuthClient interface. The purpose of this model is to store oauth registered clients for the app in the DB. See sample below.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-2-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-2-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-2-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-2-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-2-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-2-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-2-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-2-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-2-10">10</a></span>
<span class="normal"><a href="#__codelineno-2-11">11</a></span>
<span class="normal"><a href="#__codelineno-2-12">12</a></span>
<span class="normal"><a href="#__codelineno-2-13">13</a></span>
<span class="normal"><a href="#__codelineno-2-14">14</a></span>
<span class="normal"><a href="#__codelineno-2-15">15</a></span>
<span class="normal"><a href="#__codelineno-2-16">16</a></span>
<span class="normal"><a href="#__codelineno-2-17">17</a></span>
<span class="normal"><a href="#__codelineno-2-18">18</a></span>
<span class="normal"><a href="#__codelineno-2-19">19</a></span>
<span class="normal"><a href="#__codelineno-2-20">20</a></span>
<span class="normal"><a href="#__codelineno-2-21">21</a></span>
<span class="normal"><a href="#__codelineno-2-22">22</a></span>
<span class="normal"><a href="#__codelineno-2-23">23</a></span>
<span class="normal"><a href="#__codelineno-2-24">24</a></span>
<span class="normal"><a href="#__codelineno-2-25">25</a></span>
<span class="normal"><a href="#__codelineno-2-26">26</a></span>
<span class="normal"><a href="#__codelineno-2-27">27</a></span>
<span class="normal"><a href="#__codelineno-2-28">28</a></span>
<span class="normal"><a href="#__codelineno-2-29">29</a></span>
<span class="normal"><a href="#__codelineno-2-30">30</a></span>
<span class="normal"><a href="#__codelineno-2-31">31</a></span>
<span class="normal"><a href="#__codelineno-2-32">32</a></span>
<span class="normal"><a href="#__codelineno-2-33">33</a></span>
<span class="normal"><a href="#__codelineno-2-34">34</a></span>
<span class="normal"><a href="#__codelineno-2-35">35</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="kd">@model</span><span class="p">({</span>
<a id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="w">  </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;auth_clients&#39;</span><span class="p">,</span>
<a id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="p">})</span>
<a id="__codelineno-2-4" name="__codelineno-2-4"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">AuthClient</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">Entity</span><span class="w"> </span><span class="k">implements</span><span class="w"> </span><span class="nx">IAuthClient</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-2-5" name="__codelineno-2-5"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-2-6" name="__codelineno-2-6"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;number&#39;</span><span class="p">,</span>
<a id="__codelineno-2-7" name="__codelineno-2-7"></a><span class="w">    </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<a id="__codelineno-2-8" name="__codelineno-2-8"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-2-9" name="__codelineno-2-9"></a><span class="w">  </span><span class="nx">id?</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">;</span>
<a id="__codelineno-2-10" name="__codelineno-2-10"></a>
<a id="__codelineno-2-11" name="__codelineno-2-11"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-2-12" name="__codelineno-2-12"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-2-13" name="__codelineno-2-13"></a><span class="w">    </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<a id="__codelineno-2-14" name="__codelineno-2-14"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;client_id&#39;</span><span class="p">,</span>
<a id="__codelineno-2-15" name="__codelineno-2-15"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-2-16" name="__codelineno-2-16"></a><span class="w">  </span><span class="nx">clientId</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-2-17" name="__codelineno-2-17"></a>
<a id="__codelineno-2-18" name="__codelineno-2-18"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-2-19" name="__codelineno-2-19"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-2-20" name="__codelineno-2-20"></a><span class="w">    </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<a id="__codelineno-2-21" name="__codelineno-2-21"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;client_secret&#39;</span><span class="p">,</span>
<a id="__codelineno-2-22" name="__codelineno-2-22"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-2-23" name="__codelineno-2-23"></a><span class="w">  </span><span class="nx">clientSecret</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-2-24" name="__codelineno-2-24"></a>
<a id="__codelineno-2-25" name="__codelineno-2-25"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-2-26" name="__codelineno-2-26"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;array&#39;</span><span class="p">,</span>
<a id="__codelineno-2-27" name="__codelineno-2-27"></a><span class="w">    </span><span class="nx">itemType</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;number&#39;</span><span class="p">,</span>
<a id="__codelineno-2-28" name="__codelineno-2-28"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;user_ids&#39;</span><span class="p">,</span>
<a id="__codelineno-2-29" name="__codelineno-2-29"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-2-30" name="__codelineno-2-30"></a><span class="w">  </span><span class="nx">userIds</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">[];</span>
<a id="__codelineno-2-31" name="__codelineno-2-31"></a>
<a id="__codelineno-2-32" name="__codelineno-2-32"></a><span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">data?</span><span class="o">:</span><span class="w"> </span><span class="kt">Partial</span><span class="o">&lt;</span><span class="nx">AuthClient</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-2-33" name="__codelineno-2-33"></a><span class="w">    </span><span class="k">super</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<a id="__codelineno-2-34" name="__codelineno-2-34"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-2-35" name="__codelineno-2-35"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Create CRUD repository for the above model. Use loopback CLI.</p>
<div class="language-sh highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a>lb4<span class="w"> </span>repository
</code></pre></div></td></tr></table></div>
<p>Add the verifier function for the strategy. You need to create a provider for the same strategy. You can add your application specific business logic for client auth here. Here is simple example.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-4-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-4-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-4-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-4-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-4-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-4-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-4-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-4-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-4-10">10</a></span>
<span class="normal"><a href="#__codelineno-4-11">11</a></span>
<span class="normal"><a href="#__codelineno-4-12">12</a></span>
<span class="normal"><a href="#__codelineno-4-13">13</a></span>
<span class="normal"><a href="#__codelineno-4-14">14</a></span>
<span class="normal"><a href="#__codelineno-4-15">15</a></span>
<span class="normal"><a href="#__codelineno-4-16">16</a></span>
<span class="normal"><a href="#__codelineno-4-17">17</a></span>
<span class="normal"><a href="#__codelineno-4-18">18</a></span>
<span class="normal"><a href="#__codelineno-4-19">19</a></span>
<span class="normal"><a href="#__codelineno-4-20">20</a></span>
<span class="normal"><a href="#__codelineno-4-21">21</a></span>
<span class="normal"><a href="#__codelineno-4-22">22</a></span>
<span class="normal"><a href="#__codelineno-4-23">23</a></span>
<span class="normal"><a href="#__codelineno-4-24">24</a></span>
<span class="normal"><a href="#__codelineno-4-25">25</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">Provider</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@loopback/context&#39;</span><span class="p">;</span>
<a id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">repository</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@loopback/repository&#39;</span><span class="p">;</span>
<a id="__codelineno-4-3" name="__codelineno-4-3"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">VerifyFunction</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;loopback4-authentication&#39;</span><span class="p">;</span>
<a id="__codelineno-4-4" name="__codelineno-4-4"></a>
<a id="__codelineno-4-5" name="__codelineno-4-5"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">AuthClientRepository</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../../../repositories&#39;</span><span class="p">;</span>
<a id="__codelineno-4-6" name="__codelineno-4-6"></a>
<a id="__codelineno-4-7" name="__codelineno-4-7"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">ClientPasswordVerifyProvider</span>
<a id="__codelineno-4-8" name="__codelineno-4-8"></a><span class="w">  </span><span class="k">implements</span><span class="w"> </span><span class="nx">Provider</span><span class="o">&lt;</span><span class="nx">VerifyFunction</span><span class="p">.</span><span class="nx">OauthClientPasswordFn</span><span class="o">&gt;</span>
<a id="__codelineno-4-9" name="__codelineno-4-9"></a><span class="p">{</span>
<a id="__codelineno-4-10" name="__codelineno-4-10"></a><span class="w">  </span><span class="kr">constructor</span><span class="p">(</span>
<a id="__codelineno-4-11" name="__codelineno-4-11"></a><span class="w">    </span><span class="kd">@repository</span><span class="p">(</span><span class="nx">AuthClientRepository</span><span class="p">)</span>
<a id="__codelineno-4-12" name="__codelineno-4-12"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nx">authClientRepository</span><span class="o">:</span><span class="w"> </span><span class="kt">AuthClientRepository</span><span class="p">,</span>
<a id="__codelineno-4-13" name="__codelineno-4-13"></a><span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-4-14" name="__codelineno-4-14"></a>
<a id="__codelineno-4-15" name="__codelineno-4-15"></a><span class="w">  </span><span class="nx">value</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">VerifyFunction</span><span class="p">.</span><span class="nx">OauthClientPasswordFn</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-16" name="__codelineno-4-16"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">(</span><span class="nx">clientId</span><span class="p">,</span><span class="w"> </span><span class="nx">clientSecret</span><span class="p">,</span><span class="w"> </span><span class="nx">req</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-17" name="__codelineno-4-17"></a><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">authClientRepository</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span>
<a id="__codelineno-4-18" name="__codelineno-4-18"></a><span class="w">        </span><span class="nx">where</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-19" name="__codelineno-4-19"></a><span class="w">          </span><span class="nx">clientId</span><span class="p">,</span>
<a id="__codelineno-4-20" name="__codelineno-4-20"></a><span class="w">          </span><span class="nx">clientSecret</span><span class="p">,</span>
<a id="__codelineno-4-21" name="__codelineno-4-21"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-4-22" name="__codelineno-4-22"></a><span class="w">      </span><span class="p">});</span>
<a id="__codelineno-4-23" name="__codelineno-4-23"></a><span class="w">    </span><span class="p">};</span>
<a id="__codelineno-4-24" name="__codelineno-4-24"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-4-25" name="__codelineno-4-25"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Please note the Verify function type <em>VerifyFunction.OauthClientPasswordFn</em>.</p>
<p>Now bind this provider to the application in application.ts.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">AuthenticationComponent</span><span class="p">,</span><span class="w"> </span><span class="nx">Strategies</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;loopback4-authentication&#39;</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1">1</a></span>
<span class="normal"><a href="#__codelineno-6-2">2</a></span>
<span class="normal"><a href="#__codelineno-6-3">3</a></span>
<span class="normal"><a href="#__codelineno-6-4">4</a></span>
<span class="normal"><a href="#__codelineno-6-5">5</a></span>
<span class="normal"><a href="#__codelineno-6-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="c1">// Add authentication component</span>
<a id="__codelineno-6-2" name="__codelineno-6-2"></a><span class="k">this</span><span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="nx">AuthenticationComponent</span><span class="p">);</span>
<a id="__codelineno-6-3" name="__codelineno-6-3"></a><span class="c1">// Customize authentication verify handlers</span>
<a id="__codelineno-6-4" name="__codelineno-6-4"></a><span class="k">this</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">Strategies</span><span class="p">.</span><span class="nx">Passport</span><span class="p">.</span><span class="nx">OAUTH2_CLIENT_PASSWORD_VERIFIER</span><span class="p">).</span><span class="nx">toProvider</span><span class="p">(</span>
<a id="__codelineno-6-5" name="__codelineno-6-5"></a><span class="w">  </span><span class="nx">ClientPasswordVerifyProvider</span><span class="p">,</span>
<a id="__codelineno-6-6" name="__codelineno-6-6"></a><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>Finally, add the authenticate function as a sequence action to sequence.ts.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-7-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-7-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-7-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-7-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-7-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-7-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-7-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-7-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-7-10">10</a></span>
<span class="normal"><a href="#__codelineno-7-11">11</a></span>
<span class="normal"><a href="#__codelineno-7-12">12</a></span>
<span class="normal"><a href="#__codelineno-7-13">13</a></span>
<span class="normal"><a href="#__codelineno-7-14">14</a></span>
<span class="normal"><a href="#__codelineno-7-15">15</a></span>
<span class="normal"><a href="#__codelineno-7-16">16</a></span>
<span class="normal"><a href="#__codelineno-7-17">17</a></span>
<span class="normal"><a href="#__codelineno-7-18">18</a></span>
<span class="normal"><a href="#__codelineno-7-19">19</a></span>
<span class="normal"><a href="#__codelineno-7-20">20</a></span>
<span class="normal"><a href="#__codelineno-7-21">21</a></span>
<span class="normal"><a href="#__codelineno-7-22">22</a></span>
<span class="normal"><a href="#__codelineno-7-23">23</a></span>
<span class="normal"><a href="#__codelineno-7-24">24</a></span>
<span class="normal"><a href="#__codelineno-7-25">25</a></span>
<span class="normal"><a href="#__codelineno-7-26">26</a></span>
<span class="normal"><a href="#__codelineno-7-27">27</a></span>
<span class="normal"><a href="#__codelineno-7-28">28</a></span>
<span class="normal"><a href="#__codelineno-7-29">29</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">MySequence</span><span class="w"> </span><span class="k">implements</span><span class="w"> </span><span class="nx">SequenceHandler</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="w">  </span><span class="kr">constructor</span><span class="p">(</span>
<a id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">FIND_ROUTE</span><span class="p">)</span><span class="w"> </span><span class="k">protected</span><span class="w"> </span><span class="nx">findRoute</span><span class="o">:</span><span class="w"> </span><span class="kt">FindRoute</span><span class="p">,</span>
<a id="__codelineno-7-4" name="__codelineno-7-4"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">PARSE_PARAMS</span><span class="p">)</span><span class="w"> </span><span class="k">protected</span><span class="w"> </span><span class="nx">parseParams</span><span class="o">:</span><span class="w"> </span><span class="kt">ParseParams</span><span class="p">,</span>
<a id="__codelineno-7-5" name="__codelineno-7-5"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">INVOKE_METHOD</span><span class="p">)</span><span class="w"> </span><span class="k">protected</span><span class="w"> </span><span class="nx">invoke</span><span class="o">:</span><span class="w"> </span><span class="kt">InvokeMethod</span><span class="p">,</span>
<a id="__codelineno-7-6" name="__codelineno-7-6"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">SEND</span><span class="p">)</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="nx">send</span><span class="o">:</span><span class="w"> </span><span class="kt">Send</span><span class="p">,</span>
<a id="__codelineno-7-7" name="__codelineno-7-7"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">REJECT</span><span class="p">)</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="nx">reject</span><span class="o">:</span><span class="w"> </span><span class="kt">Reject</span><span class="p">,</span>
<a id="__codelineno-7-8" name="__codelineno-7-8"></a><span class="w">    </span><span class="c1">// Inject CLIENT_AUTH_ACTION sequence action provider</span>
<a id="__codelineno-7-9" name="__codelineno-7-9"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">AuthenticationBindings</span><span class="p">.</span><span class="nx">CLIENT_AUTH_ACTION</span><span class="p">)</span>
<a id="__codelineno-7-10" name="__codelineno-7-10"></a><span class="w">    </span><span class="k">protected</span><span class="w"> </span><span class="nx">authenticateRequestClient</span><span class="o">:</span><span class="w"> </span><span class="kt">AuthenticateFn</span><span class="o">&lt;</span><span class="nx">AuthClient</span><span class="o">&gt;</span><span class="p">,</span>
<a id="__codelineno-7-11" name="__codelineno-7-11"></a><span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-7-12" name="__codelineno-7-12"></a>
<a id="__codelineno-7-13" name="__codelineno-7-13"></a><span class="w">  </span><span class="k">async</span><span class="w"> </span><span class="nx">handle</span><span class="p">(</span><span class="nx">context</span><span class="o">:</span><span class="w"> </span><span class="kt">RequestContext</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-7-14" name="__codelineno-7-14"></a><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-7-15" name="__codelineno-7-15"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="nx">request</span><span class="p">,</span><span class="w"> </span><span class="nx">response</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">context</span><span class="p">;</span>
<a id="__codelineno-7-16" name="__codelineno-7-16"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">route</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">findRoute</span><span class="p">(</span><span class="nx">request</span><span class="p">);</span>
<a id="__codelineno-7-17" name="__codelineno-7-17"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">parseParams</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span><span class="w"> </span><span class="nx">route</span><span class="p">);</span>
<a id="__codelineno-7-18" name="__codelineno-7-18"></a><span class="w">      </span><span class="nx">request</span><span class="p">.</span><span class="nx">body</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">args</span><span class="p">[</span><span class="nx">args</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">];</span>
<a id="__codelineno-7-19" name="__codelineno-7-19"></a>
<a id="__codelineno-7-20" name="__codelineno-7-20"></a><span class="w">      </span><span class="c1">// Perform client authentication here</span>
<a id="__codelineno-7-21" name="__codelineno-7-21"></a><span class="w">      </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">authenticateRequestClient</span><span class="p">(</span><span class="nx">request</span><span class="p">);</span>
<a id="__codelineno-7-22" name="__codelineno-7-22"></a>
<a id="__codelineno-7-23" name="__codelineno-7-23"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">invoke</span><span class="p">(</span><span class="nx">route</span><span class="p">,</span><span class="w"> </span><span class="nx">args</span><span class="p">);</span>
<a id="__codelineno-7-24" name="__codelineno-7-24"></a><span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">response</span><span class="p">,</span><span class="w"> </span><span class="nx">result</span><span class="p">);</span>
<a id="__codelineno-7-25" name="__codelineno-7-25"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-7-26" name="__codelineno-7-26"></a><span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">reject</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">);</span>
<a id="__codelineno-7-27" name="__codelineno-7-27"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-7-28" name="__codelineno-7-28"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-7-29" name="__codelineno-7-29"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>After this, you can use decorator to apply auth to controller functions wherever needed. See below.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-8-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-8-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-8-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-8-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-8-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-8-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-8-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-8-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-8-10">10</a></span>
<span class="normal"><a href="#__codelineno-8-11">11</a></span>
<span class="normal"><a href="#__codelineno-8-12">12</a></span>
<span class="normal"><a href="#__codelineno-8-13">13</a></span>
<span class="normal"><a href="#__codelineno-8-14">14</a></span>
<span class="normal"><a href="#__codelineno-8-15">15</a></span>
<span class="normal"><a href="#__codelineno-8-16">16</a></span>
<span class="normal"><a href="#__codelineno-8-17">17</a></span>
<span class="normal"><a href="#__codelineno-8-18">18</a></span>
<span class="normal"><a href="#__codelineno-8-19">19</a></span>
<span class="normal"><a href="#__codelineno-8-20">20</a></span>
<span class="normal"><a href="#__codelineno-8-21">21</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="kd">@authenticateClient</span><span class="p">(</span><span class="nx">STRATEGY</span><span class="p">.</span><span class="nx">CLIENT_PASSWORD</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-2" name="__codelineno-8-2"></a><span class="w">  </span><span class="nx">passReqToCallback</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span>
<a id="__codelineno-8-3" name="__codelineno-8-3"></a><span class="p">})</span>
<a id="__codelineno-8-4" name="__codelineno-8-4"></a><span class="kd">@post</span><span class="p">(</span><span class="s1">&#39;/auth/login&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-5" name="__codelineno-8-5"></a><span class="w">  </span><span class="nx">responses</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-6" name="__codelineno-8-6"></a><span class="w">    </span><span class="p">[</span><span class="nx">STATUS_CODE</span><span class="p">.</span><span class="nx">OK</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-7" name="__codelineno-8-7"></a><span class="w">      </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Auth Code&#39;</span><span class="p">,</span>
<a id="__codelineno-8-8" name="__codelineno-8-8"></a><span class="w">      </span><span class="nx">content</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-9" name="__codelineno-8-9"></a><span class="w">        </span><span class="p">[</span><span class="nx">CONTENT_TYPE</span><span class="p">.</span><span class="nb">JSON</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="nb">Object</span><span class="p">,</span>
<a id="__codelineno-8-10" name="__codelineno-8-10"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-8-11" name="__codelineno-8-11"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-8-12" name="__codelineno-8-12"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-8-13" name="__codelineno-8-13"></a><span class="p">})</span>
<a id="__codelineno-8-14" name="__codelineno-8-14"></a><span class="k">async</span><span class="w"> </span><span class="nx">login</span><span class="p">(</span>
<a id="__codelineno-8-15" name="__codelineno-8-15"></a><span class="w">  </span><span class="kd">@requestBody</span><span class="p">()</span>
<a id="__codelineno-8-16" name="__codelineno-8-16"></a><span class="w">  </span><span class="nx">req</span><span class="o">:</span><span class="w"> </span><span class="kt">LoginRequest</span><span class="p">,</span>
<a id="__codelineno-8-17" name="__codelineno-8-17"></a><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nb">Promise</span><span class="o">&lt;</span><span class="p">{</span>
<a id="__codelineno-8-18" name="__codelineno-8-18"></a><span class="w">  </span><span class="nx">code</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-8-19" name="__codelineno-8-19"></a><span class="p">}</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-20" name="__codelineno-8-20"></a><span class="w">  </span><span class="p">....</span>
<a id="__codelineno-8-21" name="__codelineno-8-21"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>For accessing the authenticated AuthClient model reference, you can inject the CURRENT_CLIENT provider, provided by the extension, which is populated by the auth action sequence above.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1">1</a></span>
<span class="normal"><a href="#__codelineno-9-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="w">  </span><span class="kd">@inject</span><span class="p">.</span><span class="nx">getter</span><span class="p">(</span><span class="nx">AuthenticationBindings</span><span class="p">.</span><span class="nx">CURRENT_CLIENT</span><span class="p">)</span>
<a id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="w">  </span><span class="k">private</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="nx">getCurrentClient</span><span class="o">:</span><span class="w"> </span><span class="kt">Getter</span><span class="o">&lt;</span><span class="nx">AuthClient</span><span class="o">&gt;</span><span class="p">,</span>
</code></pre></div></td></tr></table></div>
<h3 id="http-bearer">Http-bearer<a class="headerlink" href="#http-bearer" title="Permanent link">&para;</a></h3>
<p>First, create a AuthUser model implementing the IAuthUser interface. You can implement the interface in the user model itself. See sample below.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-10-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-10-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-10-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-10-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-10-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-10-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-10-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-10-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-10-10">10</a></span>
<span class="normal"><a href="#__codelineno-10-11">11</a></span>
<span class="normal"><a href="#__codelineno-10-12">12</a></span>
<span class="normal"><a href="#__codelineno-10-13">13</a></span>
<span class="normal"><a href="#__codelineno-10-14">14</a></span>
<span class="normal"><a href="#__codelineno-10-15">15</a></span>
<span class="normal"><a href="#__codelineno-10-16">16</a></span>
<span class="normal"><a href="#__codelineno-10-17">17</a></span>
<span class="normal"><a href="#__codelineno-10-18">18</a></span>
<span class="normal"><a href="#__codelineno-10-19">19</a></span>
<span class="normal"><a href="#__codelineno-10-20">20</a></span>
<span class="normal"><a href="#__codelineno-10-21">21</a></span>
<span class="normal"><a href="#__codelineno-10-22">22</a></span>
<span class="normal"><a href="#__codelineno-10-23">23</a></span>
<span class="normal"><a href="#__codelineno-10-24">24</a></span>
<span class="normal"><a href="#__codelineno-10-25">25</a></span>
<span class="normal"><a href="#__codelineno-10-26">26</a></span>
<span class="normal"><a href="#__codelineno-10-27">27</a></span>
<span class="normal"><a href="#__codelineno-10-28">28</a></span>
<span class="normal"><a href="#__codelineno-10-29">29</a></span>
<span class="normal"><a href="#__codelineno-10-30">30</a></span>
<span class="normal"><a href="#__codelineno-10-31">31</a></span>
<span class="normal"><a href="#__codelineno-10-32">32</a></span>
<span class="normal"><a href="#__codelineno-10-33">33</a></span>
<span class="normal"><a href="#__codelineno-10-34">34</a></span>
<span class="normal"><a href="#__codelineno-10-35">35</a></span>
<span class="normal"><a href="#__codelineno-10-36">36</a></span>
<span class="normal"><a href="#__codelineno-10-37">37</a></span>
<span class="normal"><a href="#__codelineno-10-38">38</a></span>
<span class="normal"><a href="#__codelineno-10-39">39</a></span>
<span class="normal"><a href="#__codelineno-10-40">40</a></span>
<span class="normal"><a href="#__codelineno-10-41">41</a></span>
<span class="normal"><a href="#__codelineno-10-42">42</a></span>
<span class="normal"><a href="#__codelineno-10-43">43</a></span>
<span class="normal"><a href="#__codelineno-10-44">44</a></span>
<span class="normal"><a href="#__codelineno-10-45">45</a></span>
<span class="normal"><a href="#__codelineno-10-46">46</a></span>
<span class="normal"><a href="#__codelineno-10-47">47</a></span>
<span class="normal"><a href="#__codelineno-10-48">48</a></span>
<span class="normal"><a href="#__codelineno-10-49">49</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="kd">@model</span><span class="p">({</span>
<a id="__codelineno-10-2" name="__codelineno-10-2"></a><span class="w">  </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;users&#39;</span><span class="p">,</span>
<a id="__codelineno-10-3" name="__codelineno-10-3"></a><span class="p">})</span>
<a id="__codelineno-10-4" name="__codelineno-10-4"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">User</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">Entity</span><span class="w"> </span><span class="k">implements</span><span class="w"> </span><span class="nx">IAuthUser</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-5" name="__codelineno-10-5"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-10-6" name="__codelineno-10-6"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;number&#39;</span><span class="p">,</span>
<a id="__codelineno-10-7" name="__codelineno-10-7"></a><span class="w">    </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<a id="__codelineno-10-8" name="__codelineno-10-8"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-10-9" name="__codelineno-10-9"></a><span class="w">  </span><span class="nx">id?</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">;</span>
<a id="__codelineno-10-10" name="__codelineno-10-10"></a>
<a id="__codelineno-10-11" name="__codelineno-10-11"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-10-12" name="__codelineno-10-12"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-10-13" name="__codelineno-10-13"></a><span class="w">    </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<a id="__codelineno-10-14" name="__codelineno-10-14"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;first_name&#39;</span><span class="p">,</span>
<a id="__codelineno-10-15" name="__codelineno-10-15"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-10-16" name="__codelineno-10-16"></a><span class="w">  </span><span class="nx">firstName</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-10-17" name="__codelineno-10-17"></a>
<a id="__codelineno-10-18" name="__codelineno-10-18"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-10-19" name="__codelineno-10-19"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-10-20" name="__codelineno-10-20"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;last_name&#39;</span><span class="p">,</span>
<a id="__codelineno-10-21" name="__codelineno-10-21"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-10-22" name="__codelineno-10-22"></a><span class="w">  </span><span class="nx">lastName</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-10-23" name="__codelineno-10-23"></a>
<a id="__codelineno-10-24" name="__codelineno-10-24"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-10-25" name="__codelineno-10-25"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-10-26" name="__codelineno-10-26"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;middle_name&#39;</span><span class="p">,</span>
<a id="__codelineno-10-27" name="__codelineno-10-27"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-10-28" name="__codelineno-10-28"></a><span class="w">  </span><span class="nx">middleName?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-10-29" name="__codelineno-10-29"></a>
<a id="__codelineno-10-30" name="__codelineno-10-30"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-10-31" name="__codelineno-10-31"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-10-32" name="__codelineno-10-32"></a><span class="w">    </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<a id="__codelineno-10-33" name="__codelineno-10-33"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-10-34" name="__codelineno-10-34"></a><span class="w">  </span><span class="nx">username</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-10-35" name="__codelineno-10-35"></a>
<a id="__codelineno-10-36" name="__codelineno-10-36"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-10-37" name="__codelineno-10-37"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-10-38" name="__codelineno-10-38"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-10-39" name="__codelineno-10-39"></a><span class="w">  </span><span class="nx">email?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-10-40" name="__codelineno-10-40"></a>
<a id="__codelineno-10-41" name="__codelineno-10-41"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-10-42" name="__codelineno-10-42"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-10-43" name="__codelineno-10-43"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-10-44" name="__codelineno-10-44"></a><span class="w">  </span><span class="nx">password?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-10-45" name="__codelineno-10-45"></a>
<a id="__codelineno-10-46" name="__codelineno-10-46"></a><span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">data?</span><span class="o">:</span><span class="w"> </span><span class="kt">Partial</span><span class="o">&lt;</span><span class="nx">User</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-47" name="__codelineno-10-47"></a><span class="w">    </span><span class="k">super</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<a id="__codelineno-10-48" name="__codelineno-10-48"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-10-49" name="__codelineno-10-49"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Now bind this model to USER_MODEL key in application.ts</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="k">this</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">AuthenticationBindings</span><span class="p">.</span><span class="nx">USER_MODEL</span><span class="p">).</span><span class="nx">to</span><span class="p">(</span><span class="nx">User</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>Create CRUD repository for the above model. Use loopback CLI.</p>
<div class="language-sh highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1"></a>lb4<span class="w"> </span>repository
</code></pre></div></td></tr></table></div>
<p>Add the verifier function for the strategy. You need to create a provider for the same. You can add your application specific business logic for client auth here. Here is simple example for JWT tokens.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-13-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-13-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-13-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-13-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-13-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-13-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-13-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-13-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-13-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-13-10">10</a></span>
<span class="normal"><a href="#__codelineno-13-11">11</a></span>
<span class="normal"><a href="#__codelineno-13-12">12</a></span>
<span class="normal"><a href="#__codelineno-13-13">13</a></span>
<span class="normal"><a href="#__codelineno-13-14">14</a></span>
<span class="normal"><a href="#__codelineno-13-15">15</a></span>
<span class="normal"><a href="#__codelineno-13-16">16</a></span>
<span class="normal"><a href="#__codelineno-13-17">17</a></span>
<span class="normal"><a href="#__codelineno-13-18">18</a></span>
<span class="normal"><a href="#__codelineno-13-19">19</a></span>
<span class="normal"><a href="#__codelineno-13-20">20</a></span>
<span class="normal"><a href="#__codelineno-13-21">21</a></span>
<span class="normal"><a href="#__codelineno-13-22">22</a></span>
<span class="normal"><a href="#__codelineno-13-23">23</a></span>
<span class="normal"><a href="#__codelineno-13-24">24</a></span>
<span class="normal"><a href="#__codelineno-13-25">25</a></span>
<span class="normal"><a href="#__codelineno-13-26">26</a></span>
<span class="normal"><a href="#__codelineno-13-27">27</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">Provider</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@loopback/context&#39;</span><span class="p">;</span>
<a id="__codelineno-13-2" name="__codelineno-13-2"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">repository</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@loopback/repository&#39;</span><span class="p">;</span>
<a id="__codelineno-13-3" name="__codelineno-13-3"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">verify</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;jsonwebtoken&#39;</span><span class="p">;</span>
<a id="__codelineno-13-4" name="__codelineno-13-4"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">VerifyFunction</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;loopback4-authentication&#39;</span><span class="p">;</span>
<a id="__codelineno-13-5" name="__codelineno-13-5"></a>
<a id="__codelineno-13-6" name="__codelineno-13-6"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">User</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../models/user.model&#39;</span><span class="p">;</span>
<a id="__codelineno-13-7" name="__codelineno-13-7"></a>
<a id="__codelineno-13-8" name="__codelineno-13-8"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">BearerTokenVerifyProvider</span>
<a id="__codelineno-13-9" name="__codelineno-13-9"></a><span class="w">  </span><span class="k">implements</span><span class="w"> </span><span class="nx">Provider</span><span class="o">&lt;</span><span class="nx">VerifyFunction</span><span class="p">.</span><span class="nx">BearerFn</span><span class="o">&gt;</span>
<a id="__codelineno-13-10" name="__codelineno-13-10"></a><span class="p">{</span>
<a id="__codelineno-13-11" name="__codelineno-13-11"></a><span class="w">  </span><span class="kr">constructor</span><span class="p">(</span>
<a id="__codelineno-13-12" name="__codelineno-13-12"></a><span class="w">    </span><span class="kd">@repository</span><span class="p">(</span><span class="nx">RevokedTokenRepository</span><span class="p">)</span>
<a id="__codelineno-13-13" name="__codelineno-13-13"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nx">revokedTokenRepository</span><span class="o">:</span><span class="w"> </span><span class="kt">RevokedTokenRepository</span><span class="p">,</span>
<a id="__codelineno-13-14" name="__codelineno-13-14"></a><span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-13-15" name="__codelineno-13-15"></a>
<a id="__codelineno-13-16" name="__codelineno-13-16"></a><span class="w">  </span><span class="nx">value</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">VerifyFunction</span><span class="p">.</span><span class="nx">BearerFn</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-13-17" name="__codelineno-13-17"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="nx">token</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-13-18" name="__codelineno-13-18"></a><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">token</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">revokedTokenRepository</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">token</span><span class="p">)))</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-13-19" name="__codelineno-13-19"></a><span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">HttpErrors</span><span class="p">.</span><span class="nx">Unauthorized</span><span class="p">(</span><span class="s1">&#39;Token Revoked&#39;</span><span class="p">);</span>
<a id="__codelineno-13-20" name="__codelineno-13-20"></a><span class="w">      </span><span class="p">}</span>
<a id="__codelineno-13-21" name="__codelineno-13-21"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">verify</span><span class="p">(</span><span class="nx">token</span><span class="p">,</span><span class="w"> </span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">JWT_SECRET</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-13-22" name="__codelineno-13-22"></a><span class="w">        </span><span class="nx">issuer</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.JWT_ISSUER</span><span class="p">,</span>
<a id="__codelineno-13-23" name="__codelineno-13-23"></a><span class="w">      </span><span class="p">})</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">User</span><span class="p">;</span>
<a id="__codelineno-13-24" name="__codelineno-13-24"></a><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="nx">user</span><span class="p">;</span>
<a id="__codelineno-13-25" name="__codelineno-13-25"></a><span class="w">    </span><span class="p">};</span>
<a id="__codelineno-13-26" name="__codelineno-13-26"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-13-27" name="__codelineno-13-27"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>The above example has an import and injection of a RevokedTokenRepository, which could be used to keep track of revoked tokens in a datasource like Redis. You can find an implementation of this repository <a href="https://github.com/sourcefuse/loopback4-starter/blob/master/src/repositories/revoked-token.repository.ts">here</a> and the Redis datasource <a href="https://github.com/sourcefuse/loopback4-starter/blob/master/src/datasources/redis.datasource.ts">here</a>.</p>
<p>Please note the Verify function type <em>VerifyFunction.BearerFn</em></p>
<p>Now bind this provider to the application in application.ts.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-14-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">AuthenticationComponent</span><span class="p">,</span><span class="w"> </span><span class="nx">Strategies</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;loopback4-authentication&#39;</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-15-1">1</a></span>
<span class="normal"><a href="#__codelineno-15-2">2</a></span>
<span class="normal"><a href="#__codelineno-15-3">3</a></span>
<span class="normal"><a href="#__codelineno-15-4">4</a></span>
<span class="normal"><a href="#__codelineno-15-5">5</a></span>
<span class="normal"><a href="#__codelineno-15-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="c1">// Add authentication component</span>
<a id="__codelineno-15-2" name="__codelineno-15-2"></a><span class="k">this</span><span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="nx">AuthenticationComponent</span><span class="p">);</span>
<a id="__codelineno-15-3" name="__codelineno-15-3"></a><span class="c1">// Customize authentication verify handlers</span>
<a id="__codelineno-15-4" name="__codelineno-15-4"></a><span class="k">this</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">Strategies</span><span class="p">.</span><span class="nx">Passport</span><span class="p">.</span><span class="nx">BEARER_TOKEN_VERIFIER</span><span class="p">).</span><span class="nx">toProvider</span><span class="p">(</span>
<a id="__codelineno-15-5" name="__codelineno-15-5"></a><span class="w">  </span><span class="nx">BearerTokenVerifyProvider</span><span class="p">,</span>
<a id="__codelineno-15-6" name="__codelineno-15-6"></a><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>Finally, add the authenticate function as a sequence action to sequence.ts.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-16-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-16-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-16-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-16-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-16-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-16-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-16-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-16-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-16-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-16-10">10</a></span>
<span class="normal"><a href="#__codelineno-16-11">11</a></span>
<span class="normal"><a href="#__codelineno-16-12">12</a></span>
<span class="normal"><a href="#__codelineno-16-13">13</a></span>
<span class="normal"><a href="#__codelineno-16-14">14</a></span>
<span class="normal"><a href="#__codelineno-16-15">15</a></span>
<span class="normal"><a href="#__codelineno-16-16">16</a></span>
<span class="normal"><a href="#__codelineno-16-17">17</a></span>
<span class="normal"><a href="#__codelineno-16-18">18</a></span>
<span class="normal"><a href="#__codelineno-16-19">19</a></span>
<span class="normal"><a href="#__codelineno-16-20">20</a></span>
<span class="normal"><a href="#__codelineno-16-21">21</a></span>
<span class="normal"><a href="#__codelineno-16-22">22</a></span>
<span class="normal"><a href="#__codelineno-16-23">23</a></span>
<span class="normal"><a href="#__codelineno-16-24">24</a></span>
<span class="normal"><a href="#__codelineno-16-25">25</a></span>
<span class="normal"><a href="#__codelineno-16-26">26</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">MySequence</span><span class="w"> </span><span class="k">implements</span><span class="w"> </span><span class="nx">SequenceHandler</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-2" name="__codelineno-16-2"></a><span class="w">  </span><span class="kr">constructor</span><span class="p">(</span>
<a id="__codelineno-16-3" name="__codelineno-16-3"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">FIND_ROUTE</span><span class="p">)</span><span class="w"> </span><span class="k">protected</span><span class="w"> </span><span class="nx">findRoute</span><span class="o">:</span><span class="w"> </span><span class="kt">FindRoute</span><span class="p">,</span>
<a id="__codelineno-16-4" name="__codelineno-16-4"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">PARSE_PARAMS</span><span class="p">)</span><span class="w"> </span><span class="k">protected</span><span class="w"> </span><span class="nx">parseParams</span><span class="o">:</span><span class="w"> </span><span class="kt">ParseParams</span><span class="p">,</span>
<a id="__codelineno-16-5" name="__codelineno-16-5"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">INVOKE_METHOD</span><span class="p">)</span><span class="w"> </span><span class="k">protected</span><span class="w"> </span><span class="nx">invoke</span><span class="o">:</span><span class="w"> </span><span class="kt">InvokeMethod</span><span class="p">,</span>
<a id="__codelineno-16-6" name="__codelineno-16-6"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">SEND</span><span class="p">)</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="nx">send</span><span class="o">:</span><span class="w"> </span><span class="kt">Send</span><span class="p">,</span>
<a id="__codelineno-16-7" name="__codelineno-16-7"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">REJECT</span><span class="p">)</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="nx">reject</span><span class="o">:</span><span class="w"> </span><span class="kt">Reject</span><span class="p">,</span>
<a id="__codelineno-16-8" name="__codelineno-16-8"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">AuthenticationBindings</span><span class="p">.</span><span class="nx">USER_AUTH_ACTION</span><span class="p">)</span>
<a id="__codelineno-16-9" name="__codelineno-16-9"></a><span class="w">    </span><span class="k">protected</span><span class="w"> </span><span class="nx">authenticateRequest</span><span class="o">:</span><span class="w"> </span><span class="kt">AuthenticateFn</span><span class="o">&lt;</span><span class="nx">AuthUser</span><span class="o">&gt;</span><span class="p">,</span>
<a id="__codelineno-16-10" name="__codelineno-16-10"></a><span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-16-11" name="__codelineno-16-11"></a>
<a id="__codelineno-16-12" name="__codelineno-16-12"></a><span class="w">  </span><span class="k">async</span><span class="w"> </span><span class="nx">handle</span><span class="p">(</span><span class="nx">context</span><span class="o">:</span><span class="w"> </span><span class="kt">RequestContext</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-13" name="__codelineno-16-13"></a><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-14" name="__codelineno-16-14"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="nx">request</span><span class="p">,</span><span class="w"> </span><span class="nx">response</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">context</span><span class="p">;</span>
<a id="__codelineno-16-15" name="__codelineno-16-15"></a>
<a id="__codelineno-16-16" name="__codelineno-16-16"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">route</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">findRoute</span><span class="p">(</span><span class="nx">request</span><span class="p">);</span>
<a id="__codelineno-16-17" name="__codelineno-16-17"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">parseParams</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span><span class="w"> </span><span class="nx">route</span><span class="p">);</span>
<a id="__codelineno-16-18" name="__codelineno-16-18"></a><span class="w">      </span><span class="nx">request</span><span class="p">.</span><span class="nx">body</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">args</span><span class="p">[</span><span class="nx">args</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">];</span>
<a id="__codelineno-16-19" name="__codelineno-16-19"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">authUser</span><span class="o">:</span><span class="w"> </span><span class="kt">AuthUser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">authenticateRequest</span><span class="p">(</span><span class="nx">request</span><span class="p">);</span>
<a id="__codelineno-16-20" name="__codelineno-16-20"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">invoke</span><span class="p">(</span><span class="nx">route</span><span class="p">,</span><span class="w"> </span><span class="nx">args</span><span class="p">);</span>
<a id="__codelineno-16-21" name="__codelineno-16-21"></a><span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">response</span><span class="p">,</span><span class="w"> </span><span class="nx">result</span><span class="p">);</span>
<a id="__codelineno-16-22" name="__codelineno-16-22"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-23" name="__codelineno-16-23"></a><span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">reject</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">);</span>
<a id="__codelineno-16-24" name="__codelineno-16-24"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-16-25" name="__codelineno-16-25"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-16-26" name="__codelineno-16-26"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>After this, you can use decorator to apply auth to controller functions wherever needed. See below.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-17-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-17-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-17-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-17-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-17-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-17-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-17-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-17-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-17-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-17-10">10</a></span>
<span class="normal"><a href="#__codelineno-17-11">11</a></span>
<span class="normal"><a href="#__codelineno-17-12">12</a></span>
<span class="normal"><a href="#__codelineno-17-13">13</a></span>
<span class="normal"><a href="#__codelineno-17-14">14</a></span>
<span class="normal"><a href="#__codelineno-17-15">15</a></span>
<span class="normal"><a href="#__codelineno-17-16">16</a></span>
<span class="normal"><a href="#__codelineno-17-17">17</a></span>
<span class="normal"><a href="#__codelineno-17-18">18</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="kd">@authenticate</span><span class="p">(</span><span class="nx">STRATEGY</span><span class="p">.</span><span class="nx">BEARER</span><span class="p">)</span>
<a id="__codelineno-17-2" name="__codelineno-17-2"></a><span class="kd">@get</span><span class="p">(</span><span class="s1">&#39;/users&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-3" name="__codelineno-17-3"></a><span class="w">  </span><span class="nx">responses</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-4" name="__codelineno-17-4"></a><span class="w">    </span><span class="s1">&#39;200&#39;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-5" name="__codelineno-17-5"></a><span class="w">      </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Array of User model instances&#39;</span><span class="p">,</span>
<a id="__codelineno-17-6" name="__codelineno-17-6"></a><span class="w">      </span><span class="nx">content</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-7" name="__codelineno-17-7"></a><span class="w">        </span><span class="s1">&#39;application/json&#39;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-8" name="__codelineno-17-8"></a><span class="w">          </span><span class="nx">schema</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;array&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">items</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="s1">&#39;x-ts-type&#39;</span><span class="o">:</span><span class="w"> </span><span class="nx">User</span><span class="p">}},</span>
<a id="__codelineno-17-9" name="__codelineno-17-9"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-17-10" name="__codelineno-17-10"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-17-11" name="__codelineno-17-11"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-17-12" name="__codelineno-17-12"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-17-13" name="__codelineno-17-13"></a><span class="p">})</span>
<a id="__codelineno-17-14" name="__codelineno-17-14"></a><span class="k">async</span><span class="w"> </span><span class="nx">find</span><span class="p">(</span>
<a id="__codelineno-17-15" name="__codelineno-17-15"></a><span class="w">  </span><span class="kd">@param</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">object</span><span class="p">(</span><span class="s1">&#39;filter&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">getFilterSchemaFor</span><span class="p">(</span><span class="nx">User</span><span class="p">))</span><span class="w"> </span><span class="nx">filter?</span><span class="o">:</span><span class="w"> </span><span class="kt">Filter</span><span class="p">,</span>
<a id="__codelineno-17-16" name="__codelineno-17-16"></a><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">User</span><span class="p">[]</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-17" name="__codelineno-17-17"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">userRepository</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">filter</span><span class="p">);</span>
<a id="__codelineno-17-18" name="__codelineno-17-18"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>For accessing the authenticated AuthUser model reference, you can inject the CURRENT_USER provider, provided by the extension, which is populated by the auth action sequence above.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-18-1">1</a></span>
<span class="normal"><a href="#__codelineno-18-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="w">  </span><span class="kd">@inject</span><span class="p">.</span><span class="nx">getter</span><span class="p">(</span><span class="nx">AuthenticationBindings</span><span class="p">.</span><span class="nx">CURRENT_USER</span><span class="p">)</span>
<a id="__codelineno-18-2" name="__codelineno-18-2"></a><span class="w">  </span><span class="k">private</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="nx">getCurrentUser</span><span class="o">:</span><span class="w"> </span><span class="kt">Getter</span><span class="o">&lt;</span><span class="nx">User</span><span class="o">&gt;</span><span class="p">,</span>
</code></pre></div></td></tr></table></div>
<h3 id="local">local<a class="headerlink" href="#local" title="Permanent link">&para;</a></h3>
<p>In order to use it, run <code>npm install passport-local</code>.
First, create a AuthUser model implementing the IAuthUser interface. You can implement the interface in the user model itself. See sample below.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-19-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-19-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-19-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-19-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-19-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-19-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-19-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-19-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-19-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-19-10">10</a></span>
<span class="normal"><a href="#__codelineno-19-11">11</a></span>
<span class="normal"><a href="#__codelineno-19-12">12</a></span>
<span class="normal"><a href="#__codelineno-19-13">13</a></span>
<span class="normal"><a href="#__codelineno-19-14">14</a></span>
<span class="normal"><a href="#__codelineno-19-15">15</a></span>
<span class="normal"><a href="#__codelineno-19-16">16</a></span>
<span class="normal"><a href="#__codelineno-19-17">17</a></span>
<span class="normal"><a href="#__codelineno-19-18">18</a></span>
<span class="normal"><a href="#__codelineno-19-19">19</a></span>
<span class="normal"><a href="#__codelineno-19-20">20</a></span>
<span class="normal"><a href="#__codelineno-19-21">21</a></span>
<span class="normal"><a href="#__codelineno-19-22">22</a></span>
<span class="normal"><a href="#__codelineno-19-23">23</a></span>
<span class="normal"><a href="#__codelineno-19-24">24</a></span>
<span class="normal"><a href="#__codelineno-19-25">25</a></span>
<span class="normal"><a href="#__codelineno-19-26">26</a></span>
<span class="normal"><a href="#__codelineno-19-27">27</a></span>
<span class="normal"><a href="#__codelineno-19-28">28</a></span>
<span class="normal"><a href="#__codelineno-19-29">29</a></span>
<span class="normal"><a href="#__codelineno-19-30">30</a></span>
<span class="normal"><a href="#__codelineno-19-31">31</a></span>
<span class="normal"><a href="#__codelineno-19-32">32</a></span>
<span class="normal"><a href="#__codelineno-19-33">33</a></span>
<span class="normal"><a href="#__codelineno-19-34">34</a></span>
<span class="normal"><a href="#__codelineno-19-35">35</a></span>
<span class="normal"><a href="#__codelineno-19-36">36</a></span>
<span class="normal"><a href="#__codelineno-19-37">37</a></span>
<span class="normal"><a href="#__codelineno-19-38">38</a></span>
<span class="normal"><a href="#__codelineno-19-39">39</a></span>
<span class="normal"><a href="#__codelineno-19-40">40</a></span>
<span class="normal"><a href="#__codelineno-19-41">41</a></span>
<span class="normal"><a href="#__codelineno-19-42">42</a></span>
<span class="normal"><a href="#__codelineno-19-43">43</a></span>
<span class="normal"><a href="#__codelineno-19-44">44</a></span>
<span class="normal"><a href="#__codelineno-19-45">45</a></span>
<span class="normal"><a href="#__codelineno-19-46">46</a></span>
<span class="normal"><a href="#__codelineno-19-47">47</a></span>
<span class="normal"><a href="#__codelineno-19-48">48</a></span>
<span class="normal"><a href="#__codelineno-19-49">49</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="kd">@model</span><span class="p">({</span>
<a id="__codelineno-19-2" name="__codelineno-19-2"></a><span class="w">  </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;users&#39;</span><span class="p">,</span>
<a id="__codelineno-19-3" name="__codelineno-19-3"></a><span class="p">})</span>
<a id="__codelineno-19-4" name="__codelineno-19-4"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">User</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">Entity</span><span class="w"> </span><span class="k">implements</span><span class="w"> </span><span class="nx">IAuthUser</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-19-5" name="__codelineno-19-5"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-19-6" name="__codelineno-19-6"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;number&#39;</span><span class="p">,</span>
<a id="__codelineno-19-7" name="__codelineno-19-7"></a><span class="w">    </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<a id="__codelineno-19-8" name="__codelineno-19-8"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-19-9" name="__codelineno-19-9"></a><span class="w">  </span><span class="nx">id?</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">;</span>
<a id="__codelineno-19-10" name="__codelineno-19-10"></a>
<a id="__codelineno-19-11" name="__codelineno-19-11"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-19-12" name="__codelineno-19-12"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-19-13" name="__codelineno-19-13"></a><span class="w">    </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<a id="__codelineno-19-14" name="__codelineno-19-14"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;first_name&#39;</span><span class="p">,</span>
<a id="__codelineno-19-15" name="__codelineno-19-15"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-19-16" name="__codelineno-19-16"></a><span class="w">  </span><span class="nx">firstName</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-19-17" name="__codelineno-19-17"></a>
<a id="__codelineno-19-18" name="__codelineno-19-18"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-19-19" name="__codelineno-19-19"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-19-20" name="__codelineno-19-20"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;last_name&#39;</span><span class="p">,</span>
<a id="__codelineno-19-21" name="__codelineno-19-21"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-19-22" name="__codelineno-19-22"></a><span class="w">  </span><span class="nx">lastName</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-19-23" name="__codelineno-19-23"></a>
<a id="__codelineno-19-24" name="__codelineno-19-24"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-19-25" name="__codelineno-19-25"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-19-26" name="__codelineno-19-26"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;middle_name&#39;</span><span class="p">,</span>
<a id="__codelineno-19-27" name="__codelineno-19-27"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-19-28" name="__codelineno-19-28"></a><span class="w">  </span><span class="nx">middleName?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-19-29" name="__codelineno-19-29"></a>
<a id="__codelineno-19-30" name="__codelineno-19-30"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-19-31" name="__codelineno-19-31"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-19-32" name="__codelineno-19-32"></a><span class="w">    </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<a id="__codelineno-19-33" name="__codelineno-19-33"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-19-34" name="__codelineno-19-34"></a><span class="w">  </span><span class="nx">username</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-19-35" name="__codelineno-19-35"></a>
<a id="__codelineno-19-36" name="__codelineno-19-36"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-19-37" name="__codelineno-19-37"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-19-38" name="__codelineno-19-38"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-19-39" name="__codelineno-19-39"></a><span class="w">  </span><span class="nx">email?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-19-40" name="__codelineno-19-40"></a>
<a id="__codelineno-19-41" name="__codelineno-19-41"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-19-42" name="__codelineno-19-42"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-19-43" name="__codelineno-19-43"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-19-44" name="__codelineno-19-44"></a><span class="w">  </span><span class="nx">password?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-19-45" name="__codelineno-19-45"></a>
<a id="__codelineno-19-46" name="__codelineno-19-46"></a><span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">data?</span><span class="o">:</span><span class="w"> </span><span class="kt">Partial</span><span class="o">&lt;</span><span class="nx">User</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-19-47" name="__codelineno-19-47"></a><span class="w">    </span><span class="k">super</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<a id="__codelineno-19-48" name="__codelineno-19-48"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-19-49" name="__codelineno-19-49"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Now bind this model to USER_MODEL key in application.ts</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-20-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1"></a><span class="k">this</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">AuthenticationBindings</span><span class="p">.</span><span class="nx">USER_MODEL</span><span class="p">).</span><span class="nx">to</span><span class="p">(</span><span class="nx">User</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>Create CRUD repository for the above model. Use loopback CLI.</p>
<div class="language-sh highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-21-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1"></a>lb4<span class="w"> </span>repository
</code></pre></div></td></tr></table></div>
<p>Add the verifier function for the strategy. You need to create a provider for the same. You can add your application specific business logic for client auth here. Here is a simple example.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-22-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-22-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-22-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-22-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-22-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-22-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-22-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-22-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-22-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-22-10">10</a></span>
<span class="normal"><a href="#__codelineno-22-11">11</a></span>
<span class="normal"><a href="#__codelineno-22-12">12</a></span>
<span class="normal"><a href="#__codelineno-22-13">13</a></span>
<span class="normal"><a href="#__codelineno-22-14">14</a></span>
<span class="normal"><a href="#__codelineno-22-15">15</a></span>
<span class="normal"><a href="#__codelineno-22-16">16</a></span>
<span class="normal"><a href="#__codelineno-22-17">17</a></span>
<span class="normal"><a href="#__codelineno-22-18">18</a></span>
<span class="normal"><a href="#__codelineno-22-19">19</a></span>
<span class="normal"><a href="#__codelineno-22-20">20</a></span>
<span class="normal"><a href="#__codelineno-22-21">21</a></span>
<span class="normal"><a href="#__codelineno-22-22">22</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">LocalPasswordVerifyProvider</span>
<a id="__codelineno-22-2" name="__codelineno-22-2"></a><span class="w">  </span><span class="k">implements</span><span class="w"> </span><span class="nx">Provider</span><span class="o">&lt;</span><span class="nx">VerifyFunction</span><span class="p">.</span><span class="nx">LocalPasswordFn</span><span class="o">&gt;</span>
<a id="__codelineno-22-3" name="__codelineno-22-3"></a><span class="p">{</span>
<a id="__codelineno-22-4" name="__codelineno-22-4"></a><span class="w">  </span><span class="kr">constructor</span><span class="p">(</span>
<a id="__codelineno-22-5" name="__codelineno-22-5"></a><span class="w">    </span><span class="kd">@repository</span><span class="p">(</span><span class="nx">UserRepository</span><span class="p">)</span>
<a id="__codelineno-22-6" name="__codelineno-22-6"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nx">userRepository</span><span class="o">:</span><span class="w"> </span><span class="kt">UserRepository</span><span class="p">,</span>
<a id="__codelineno-22-7" name="__codelineno-22-7"></a><span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-22-8" name="__codelineno-22-8"></a>
<a id="__codelineno-22-9" name="__codelineno-22-9"></a><span class="w">  </span><span class="nx">value</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">VerifyFunction</span><span class="p">.</span><span class="nx">LocalPasswordFn</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-22-10" name="__codelineno-22-10"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">(</span><span class="nx">username</span><span class="o">:</span><span class="w"> </span><span class="kt">any</span><span class="p">,</span><span class="w"> </span><span class="nx">password</span><span class="o">:</span><span class="w"> </span><span class="kt">any</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-22-11" name="__codelineno-22-11"></a><span class="w">      </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-22-12" name="__codelineno-22-12"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">user</span><span class="o">:</span><span class="w"> </span><span class="kt">AuthUser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">AuthUser</span><span class="p">(</span>
<a id="__codelineno-22-13" name="__codelineno-22-13"></a><span class="w">          </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">userRepository</span><span class="p">.</span><span class="nx">verifyPassword</span><span class="p">(</span><span class="nx">username</span><span class="p">,</span><span class="w"> </span><span class="nx">password</span><span class="p">),</span>
<a id="__codelineno-22-14" name="__codelineno-22-14"></a><span class="w">        </span><span class="p">);</span>
<a id="__codelineno-22-15" name="__codelineno-22-15"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">user</span><span class="p">;</span>
<a id="__codelineno-22-16" name="__codelineno-22-16"></a><span class="w">      </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-22-17" name="__codelineno-22-17"></a><span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">HttpErrors</span><span class="p">.</span><span class="nx">Unauthorized</span><span class="p">(</span><span class="nx">AuthErrorKeys</span><span class="p">.</span><span class="nx">InvalidCredentials</span><span class="p">)</span>
<a id="__codelineno-22-18" name="__codelineno-22-18"></a><span class="w">          </span><span class="p">.</span><span class="nx">message</span><span class="p">;</span>
<a id="__codelineno-22-19" name="__codelineno-22-19"></a><span class="w">      </span><span class="p">}</span>
<a id="__codelineno-22-20" name="__codelineno-22-20"></a><span class="w">    </span><span class="p">};</span>
<a id="__codelineno-22-21" name="__codelineno-22-21"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-22-22" name="__codelineno-22-22"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Please note the Verify function type <em>VerifyFunction.LocalPasswordFn</em></p>
<p>Now bind this provider to the application in application.ts.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-23-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">AuthenticationComponent</span><span class="p">,</span><span class="w"> </span><span class="nx">Strategies</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;loopback4-authentication&#39;</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-24-1">1</a></span>
<span class="normal"><a href="#__codelineno-24-2">2</a></span>
<span class="normal"><a href="#__codelineno-24-3">3</a></span>
<span class="normal"><a href="#__codelineno-24-4">4</a></span>
<span class="normal"><a href="#__codelineno-24-5">5</a></span>
<span class="normal"><a href="#__codelineno-24-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1"></a><span class="c1">// Add authentication component</span>
<a id="__codelineno-24-2" name="__codelineno-24-2"></a><span class="k">this</span><span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="nx">AuthenticationComponent</span><span class="p">);</span>
<a id="__codelineno-24-3" name="__codelineno-24-3"></a><span class="c1">// Customize authentication verify handlers</span>
<a id="__codelineno-24-4" name="__codelineno-24-4"></a><span class="k">this</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">Strategies</span><span class="p">.</span><span class="nx">Passport</span><span class="p">.</span><span class="nx">LOCAL_PASSWORD_VERIFIER</span><span class="p">).</span><span class="nx">toProvider</span><span class="p">(</span>
<a id="__codelineno-24-5" name="__codelineno-24-5"></a><span class="w">  </span><span class="nx">LocalPasswordVerifyProvider</span><span class="p">,</span>
<a id="__codelineno-24-6" name="__codelineno-24-6"></a><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>Finally, add the authenticate function as a sequence action to sequence.ts.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-25-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-25-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-25-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-25-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-25-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-25-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-25-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-25-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-25-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-25-10">10</a></span>
<span class="normal"><a href="#__codelineno-25-11">11</a></span>
<span class="normal"><a href="#__codelineno-25-12">12</a></span>
<span class="normal"><a href="#__codelineno-25-13">13</a></span>
<span class="normal"><a href="#__codelineno-25-14">14</a></span>
<span class="normal"><a href="#__codelineno-25-15">15</a></span>
<span class="normal"><a href="#__codelineno-25-16">16</a></span>
<span class="normal"><a href="#__codelineno-25-17">17</a></span>
<span class="normal"><a href="#__codelineno-25-18">18</a></span>
<span class="normal"><a href="#__codelineno-25-19">19</a></span>
<span class="normal"><a href="#__codelineno-25-20">20</a></span>
<span class="normal"><a href="#__codelineno-25-21">21</a></span>
<span class="normal"><a href="#__codelineno-25-22">22</a></span>
<span class="normal"><a href="#__codelineno-25-23">23</a></span>
<span class="normal"><a href="#__codelineno-25-24">24</a></span>
<span class="normal"><a href="#__codelineno-25-25">25</a></span>
<span class="normal"><a href="#__codelineno-25-26">26</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">MySequence</span><span class="w"> </span><span class="k">implements</span><span class="w"> </span><span class="nx">SequenceHandler</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-25-2" name="__codelineno-25-2"></a><span class="w">  </span><span class="kr">constructor</span><span class="p">(</span>
<a id="__codelineno-25-3" name="__codelineno-25-3"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">FIND_ROUTE</span><span class="p">)</span><span class="w"> </span><span class="k">protected</span><span class="w"> </span><span class="nx">findRoute</span><span class="o">:</span><span class="w"> </span><span class="kt">FindRoute</span><span class="p">,</span>
<a id="__codelineno-25-4" name="__codelineno-25-4"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">PARSE_PARAMS</span><span class="p">)</span><span class="w"> </span><span class="k">protected</span><span class="w"> </span><span class="nx">parseParams</span><span class="o">:</span><span class="w"> </span><span class="kt">ParseParams</span><span class="p">,</span>
<a id="__codelineno-25-5" name="__codelineno-25-5"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">INVOKE_METHOD</span><span class="p">)</span><span class="w"> </span><span class="k">protected</span><span class="w"> </span><span class="nx">invoke</span><span class="o">:</span><span class="w"> </span><span class="kt">InvokeMethod</span><span class="p">,</span>
<a id="__codelineno-25-6" name="__codelineno-25-6"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">SEND</span><span class="p">)</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="nx">send</span><span class="o">:</span><span class="w"> </span><span class="kt">Send</span><span class="p">,</span>
<a id="__codelineno-25-7" name="__codelineno-25-7"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">REJECT</span><span class="p">)</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="nx">reject</span><span class="o">:</span><span class="w"> </span><span class="kt">Reject</span><span class="p">,</span>
<a id="__codelineno-25-8" name="__codelineno-25-8"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">AuthenticationBindings</span><span class="p">.</span><span class="nx">USER_AUTH_ACTION</span><span class="p">)</span>
<a id="__codelineno-25-9" name="__codelineno-25-9"></a><span class="w">    </span><span class="k">protected</span><span class="w"> </span><span class="nx">authenticateRequest</span><span class="o">:</span><span class="w"> </span><span class="kt">AuthenticateFn</span><span class="o">&lt;</span><span class="nx">AuthUser</span><span class="o">&gt;</span><span class="p">,</span>
<a id="__codelineno-25-10" name="__codelineno-25-10"></a><span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-25-11" name="__codelineno-25-11"></a>
<a id="__codelineno-25-12" name="__codelineno-25-12"></a><span class="w">  </span><span class="k">async</span><span class="w"> </span><span class="nx">handle</span><span class="p">(</span><span class="nx">context</span><span class="o">:</span><span class="w"> </span><span class="kt">RequestContext</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-25-13" name="__codelineno-25-13"></a><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-25-14" name="__codelineno-25-14"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="nx">request</span><span class="p">,</span><span class="w"> </span><span class="nx">response</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">context</span><span class="p">;</span>
<a id="__codelineno-25-15" name="__codelineno-25-15"></a>
<a id="__codelineno-25-16" name="__codelineno-25-16"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">route</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">findRoute</span><span class="p">(</span><span class="nx">request</span><span class="p">);</span>
<a id="__codelineno-25-17" name="__codelineno-25-17"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">parseParams</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span><span class="w"> </span><span class="nx">route</span><span class="p">);</span>
<a id="__codelineno-25-18" name="__codelineno-25-18"></a><span class="w">      </span><span class="nx">request</span><span class="p">.</span><span class="nx">body</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">args</span><span class="p">[</span><span class="nx">args</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">];</span>
<a id="__codelineno-25-19" name="__codelineno-25-19"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">authUser</span><span class="o">:</span><span class="w"> </span><span class="kt">AuthUser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">authenticateRequest</span><span class="p">(</span><span class="nx">request</span><span class="p">);</span>
<a id="__codelineno-25-20" name="__codelineno-25-20"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">invoke</span><span class="p">(</span><span class="nx">route</span><span class="p">,</span><span class="w"> </span><span class="nx">args</span><span class="p">);</span>
<a id="__codelineno-25-21" name="__codelineno-25-21"></a><span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">response</span><span class="p">,</span><span class="w"> </span><span class="nx">result</span><span class="p">);</span>
<a id="__codelineno-25-22" name="__codelineno-25-22"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-25-23" name="__codelineno-25-23"></a><span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">reject</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">);</span>
<a id="__codelineno-25-24" name="__codelineno-25-24"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-25-25" name="__codelineno-25-25"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-25-26" name="__codelineno-25-26"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>After this, you can use decorator to apply auth to controller functions wherever needed. See below.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-26-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-26-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-26-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-26-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-26-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-26-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-26-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-26-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-26-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-26-10">10</a></span>
<span class="normal"><a href="#__codelineno-26-11">11</a></span>
<span class="normal"><a href="#__codelineno-26-12">12</a></span>
<span class="normal"><a href="#__codelineno-26-13">13</a></span>
<span class="normal"><a href="#__codelineno-26-14">14</a></span>
<span class="normal"><a href="#__codelineno-26-15">15</a></span>
<span class="normal"><a href="#__codelineno-26-16">16</a></span>
<span class="normal"><a href="#__codelineno-26-17">17</a></span>
<span class="normal"><a href="#__codelineno-26-18">18</a></span>
<span class="normal"><a href="#__codelineno-26-19">19</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1"></a><span class="w">  </span><span class="kd">@authenticate</span><span class="p">(</span><span class="nx">STRATEGY</span><span class="p">.</span><span class="nx">LOCAL</span><span class="p">)</span>
<a id="__codelineno-26-2" name="__codelineno-26-2"></a><span class="w">  </span><span class="kd">@post</span><span class="p">(</span><span class="s1">&#39;/auth/login&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-26-3" name="__codelineno-26-3"></a><span class="w">    </span><span class="nx">responses</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-26-4" name="__codelineno-26-4"></a><span class="w">      </span><span class="p">[</span><span class="nx">STATUS_CODE</span><span class="p">.</span><span class="nx">OK</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-26-5" name="__codelineno-26-5"></a><span class="w">        </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Auth Code&#39;</span><span class="p">,</span>
<a id="__codelineno-26-6" name="__codelineno-26-6"></a><span class="w">        </span><span class="nx">content</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-26-7" name="__codelineno-26-7"></a><span class="w">          </span><span class="p">[</span><span class="nx">CONTENT_TYPE</span><span class="p">.</span><span class="nb">JSON</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="nb">Object</span><span class="p">,</span>
<a id="__codelineno-26-8" name="__codelineno-26-8"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-26-9" name="__codelineno-26-9"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-26-10" name="__codelineno-26-10"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-26-11" name="__codelineno-26-11"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-26-12" name="__codelineno-26-12"></a><span class="w">  </span><span class="k">async</span><span class="w"> </span><span class="nx">login</span><span class="p">(</span>
<a id="__codelineno-26-13" name="__codelineno-26-13"></a><span class="w">    </span><span class="kd">@requestBody</span><span class="p">()</span>
<a id="__codelineno-26-14" name="__codelineno-26-14"></a><span class="w">    </span><span class="nx">req</span><span class="o">:</span><span class="w"> </span><span class="kt">LoginRequest</span><span class="p">,</span>
<a id="__codelineno-26-15" name="__codelineno-26-15"></a><span class="w">  </span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nb">Promise</span><span class="o">&lt;</span><span class="p">{</span>
<a id="__codelineno-26-16" name="__codelineno-26-16"></a><span class="w">    </span><span class="nx">code</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-26-17" name="__codelineno-26-17"></a><span class="w">  </span><span class="p">}</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-26-18" name="__codelineno-26-18"></a><span class="w">    </span><span class="p">......</span>
<a id="__codelineno-26-19" name="__codelineno-26-19"></a><span class="w">  </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>For accessing the authenticated AuthUser model reference, you can inject the CURRENT_USER provider, provided by the extension, which is populated by the auth action sequence above.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-27-1">1</a></span>
<span class="normal"><a href="#__codelineno-27-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1"></a><span class="w">  </span><span class="kd">@inject</span><span class="p">.</span><span class="nx">getter</span><span class="p">(</span><span class="nx">AuthenticationBindings</span><span class="p">.</span><span class="nx">CURRENT_USER</span><span class="p">)</span>
<a id="__codelineno-27-2" name="__codelineno-27-2"></a><span class="w">  </span><span class="k">private</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="nx">getCurrentUser</span><span class="o">:</span><span class="w"> </span><span class="kt">Getter</span><span class="o">&lt;</span><span class="nx">User</span><span class="o">&gt;</span><span class="p">,</span>
</code></pre></div></td></tr></table></div>
<h3 id="oauth2-resource-owner-password">Oauth2-resource-owner-password<a class="headerlink" href="#oauth2-resource-owner-password" title="Permanent link">&para;</a></h3>
<p>In order to use it, run <code>npm install passport-oauth2-resource-owner-password</code>.
First, create an AuthClient model implementing the IAuthClient interface. The purpose of this model is to store oauth registered clients for the app in the DB. See sample below.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-28-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-28-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-28-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-28-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-28-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-28-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-28-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-28-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-28-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-28-10">10</a></span>
<span class="normal"><a href="#__codelineno-28-11">11</a></span>
<span class="normal"><a href="#__codelineno-28-12">12</a></span>
<span class="normal"><a href="#__codelineno-28-13">13</a></span>
<span class="normal"><a href="#__codelineno-28-14">14</a></span>
<span class="normal"><a href="#__codelineno-28-15">15</a></span>
<span class="normal"><a href="#__codelineno-28-16">16</a></span>
<span class="normal"><a href="#__codelineno-28-17">17</a></span>
<span class="normal"><a href="#__codelineno-28-18">18</a></span>
<span class="normal"><a href="#__codelineno-28-19">19</a></span>
<span class="normal"><a href="#__codelineno-28-20">20</a></span>
<span class="normal"><a href="#__codelineno-28-21">21</a></span>
<span class="normal"><a href="#__codelineno-28-22">22</a></span>
<span class="normal"><a href="#__codelineno-28-23">23</a></span>
<span class="normal"><a href="#__codelineno-28-24">24</a></span>
<span class="normal"><a href="#__codelineno-28-25">25</a></span>
<span class="normal"><a href="#__codelineno-28-26">26</a></span>
<span class="normal"><a href="#__codelineno-28-27">27</a></span>
<span class="normal"><a href="#__codelineno-28-28">28</a></span>
<span class="normal"><a href="#__codelineno-28-29">29</a></span>
<span class="normal"><a href="#__codelineno-28-30">30</a></span>
<span class="normal"><a href="#__codelineno-28-31">31</a></span>
<span class="normal"><a href="#__codelineno-28-32">32</a></span>
<span class="normal"><a href="#__codelineno-28-33">33</a></span>
<span class="normal"><a href="#__codelineno-28-34">34</a></span>
<span class="normal"><a href="#__codelineno-28-35">35</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1"></a><span class="kd">@model</span><span class="p">({</span>
<a id="__codelineno-28-2" name="__codelineno-28-2"></a><span class="w">  </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;auth_clients&#39;</span><span class="p">,</span>
<a id="__codelineno-28-3" name="__codelineno-28-3"></a><span class="p">})</span>
<a id="__codelineno-28-4" name="__codelineno-28-4"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">AuthClient</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">Entity</span><span class="w"> </span><span class="k">implements</span><span class="w"> </span><span class="nx">IAuthClient</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-28-5" name="__codelineno-28-5"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-28-6" name="__codelineno-28-6"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;number&#39;</span><span class="p">,</span>
<a id="__codelineno-28-7" name="__codelineno-28-7"></a><span class="w">    </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<a id="__codelineno-28-8" name="__codelineno-28-8"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-28-9" name="__codelineno-28-9"></a><span class="w">  </span><span class="nx">id?</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">;</span>
<a id="__codelineno-28-10" name="__codelineno-28-10"></a>
<a id="__codelineno-28-11" name="__codelineno-28-11"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-28-12" name="__codelineno-28-12"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-28-13" name="__codelineno-28-13"></a><span class="w">    </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<a id="__codelineno-28-14" name="__codelineno-28-14"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;client_id&#39;</span><span class="p">,</span>
<a id="__codelineno-28-15" name="__codelineno-28-15"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-28-16" name="__codelineno-28-16"></a><span class="w">  </span><span class="nx">clientId</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-28-17" name="__codelineno-28-17"></a>
<a id="__codelineno-28-18" name="__codelineno-28-18"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-28-19" name="__codelineno-28-19"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-28-20" name="__codelineno-28-20"></a><span class="w">    </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<a id="__codelineno-28-21" name="__codelineno-28-21"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;client_secret&#39;</span><span class="p">,</span>
<a id="__codelineno-28-22" name="__codelineno-28-22"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-28-23" name="__codelineno-28-23"></a><span class="w">  </span><span class="nx">clientSecret</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-28-24" name="__codelineno-28-24"></a>
<a id="__codelineno-28-25" name="__codelineno-28-25"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-28-26" name="__codelineno-28-26"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;array&#39;</span><span class="p">,</span>
<a id="__codelineno-28-27" name="__codelineno-28-27"></a><span class="w">    </span><span class="nx">itemType</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;number&#39;</span><span class="p">,</span>
<a id="__codelineno-28-28" name="__codelineno-28-28"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;user_ids&#39;</span><span class="p">,</span>
<a id="__codelineno-28-29" name="__codelineno-28-29"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-28-30" name="__codelineno-28-30"></a><span class="w">  </span><span class="nx">userIds</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">[];</span>
<a id="__codelineno-28-31" name="__codelineno-28-31"></a>
<a id="__codelineno-28-32" name="__codelineno-28-32"></a><span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">data?</span><span class="o">:</span><span class="w"> </span><span class="kt">Partial</span><span class="o">&lt;</span><span class="nx">AuthClient</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-28-33" name="__codelineno-28-33"></a><span class="w">    </span><span class="k">super</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<a id="__codelineno-28-34" name="__codelineno-28-34"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-28-35" name="__codelineno-28-35"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Next, create a AuthUser model implementing the IAuthUser interface. You can implement the interface in the user model itself. See sample below.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-29-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-29-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-29-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-29-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-29-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-29-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-29-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-29-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-29-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-29-10">10</a></span>
<span class="normal"><a href="#__codelineno-29-11">11</a></span>
<span class="normal"><a href="#__codelineno-29-12">12</a></span>
<span class="normal"><a href="#__codelineno-29-13">13</a></span>
<span class="normal"><a href="#__codelineno-29-14">14</a></span>
<span class="normal"><a href="#__codelineno-29-15">15</a></span>
<span class="normal"><a href="#__codelineno-29-16">16</a></span>
<span class="normal"><a href="#__codelineno-29-17">17</a></span>
<span class="normal"><a href="#__codelineno-29-18">18</a></span>
<span class="normal"><a href="#__codelineno-29-19">19</a></span>
<span class="normal"><a href="#__codelineno-29-20">20</a></span>
<span class="normal"><a href="#__codelineno-29-21">21</a></span>
<span class="normal"><a href="#__codelineno-29-22">22</a></span>
<span class="normal"><a href="#__codelineno-29-23">23</a></span>
<span class="normal"><a href="#__codelineno-29-24">24</a></span>
<span class="normal"><a href="#__codelineno-29-25">25</a></span>
<span class="normal"><a href="#__codelineno-29-26">26</a></span>
<span class="normal"><a href="#__codelineno-29-27">27</a></span>
<span class="normal"><a href="#__codelineno-29-28">28</a></span>
<span class="normal"><a href="#__codelineno-29-29">29</a></span>
<span class="normal"><a href="#__codelineno-29-30">30</a></span>
<span class="normal"><a href="#__codelineno-29-31">31</a></span>
<span class="normal"><a href="#__codelineno-29-32">32</a></span>
<span class="normal"><a href="#__codelineno-29-33">33</a></span>
<span class="normal"><a href="#__codelineno-29-34">34</a></span>
<span class="normal"><a href="#__codelineno-29-35">35</a></span>
<span class="normal"><a href="#__codelineno-29-36">36</a></span>
<span class="normal"><a href="#__codelineno-29-37">37</a></span>
<span class="normal"><a href="#__codelineno-29-38">38</a></span>
<span class="normal"><a href="#__codelineno-29-39">39</a></span>
<span class="normal"><a href="#__codelineno-29-40">40</a></span>
<span class="normal"><a href="#__codelineno-29-41">41</a></span>
<span class="normal"><a href="#__codelineno-29-42">42</a></span>
<span class="normal"><a href="#__codelineno-29-43">43</a></span>
<span class="normal"><a href="#__codelineno-29-44">44</a></span>
<span class="normal"><a href="#__codelineno-29-45">45</a></span>
<span class="normal"><a href="#__codelineno-29-46">46</a></span>
<span class="normal"><a href="#__codelineno-29-47">47</a></span>
<span class="normal"><a href="#__codelineno-29-48">48</a></span>
<span class="normal"><a href="#__codelineno-29-49">49</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1"></a><span class="kd">@model</span><span class="p">({</span>
<a id="__codelineno-29-2" name="__codelineno-29-2"></a><span class="w">  </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;users&#39;</span><span class="p">,</span>
<a id="__codelineno-29-3" name="__codelineno-29-3"></a><span class="p">})</span>
<a id="__codelineno-29-4" name="__codelineno-29-4"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">User</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">Entity</span><span class="w"> </span><span class="k">implements</span><span class="w"> </span><span class="nx">IAuthUser</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-29-5" name="__codelineno-29-5"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-29-6" name="__codelineno-29-6"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;number&#39;</span><span class="p">,</span>
<a id="__codelineno-29-7" name="__codelineno-29-7"></a><span class="w">    </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<a id="__codelineno-29-8" name="__codelineno-29-8"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-29-9" name="__codelineno-29-9"></a><span class="w">  </span><span class="nx">id?</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">;</span>
<a id="__codelineno-29-10" name="__codelineno-29-10"></a>
<a id="__codelineno-29-11" name="__codelineno-29-11"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-29-12" name="__codelineno-29-12"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-29-13" name="__codelineno-29-13"></a><span class="w">    </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<a id="__codelineno-29-14" name="__codelineno-29-14"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;first_name&#39;</span><span class="p">,</span>
<a id="__codelineno-29-15" name="__codelineno-29-15"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-29-16" name="__codelineno-29-16"></a><span class="w">  </span><span class="nx">firstName</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-29-17" name="__codelineno-29-17"></a>
<a id="__codelineno-29-18" name="__codelineno-29-18"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-29-19" name="__codelineno-29-19"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-29-20" name="__codelineno-29-20"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;last_name&#39;</span><span class="p">,</span>
<a id="__codelineno-29-21" name="__codelineno-29-21"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-29-22" name="__codelineno-29-22"></a><span class="w">  </span><span class="nx">lastName</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-29-23" name="__codelineno-29-23"></a>
<a id="__codelineno-29-24" name="__codelineno-29-24"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-29-25" name="__codelineno-29-25"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-29-26" name="__codelineno-29-26"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;middle_name&#39;</span><span class="p">,</span>
<a id="__codelineno-29-27" name="__codelineno-29-27"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-29-28" name="__codelineno-29-28"></a><span class="w">  </span><span class="nx">middleName?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-29-29" name="__codelineno-29-29"></a>
<a id="__codelineno-29-30" name="__codelineno-29-30"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-29-31" name="__codelineno-29-31"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-29-32" name="__codelineno-29-32"></a><span class="w">    </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<a id="__codelineno-29-33" name="__codelineno-29-33"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-29-34" name="__codelineno-29-34"></a><span class="w">  </span><span class="nx">username</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-29-35" name="__codelineno-29-35"></a>
<a id="__codelineno-29-36" name="__codelineno-29-36"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-29-37" name="__codelineno-29-37"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-29-38" name="__codelineno-29-38"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-29-39" name="__codelineno-29-39"></a><span class="w">  </span><span class="nx">email?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-29-40" name="__codelineno-29-40"></a>
<a id="__codelineno-29-41" name="__codelineno-29-41"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-29-42" name="__codelineno-29-42"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-29-43" name="__codelineno-29-43"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-29-44" name="__codelineno-29-44"></a><span class="w">  </span><span class="nx">password?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-29-45" name="__codelineno-29-45"></a>
<a id="__codelineno-29-46" name="__codelineno-29-46"></a><span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">data?</span><span class="o">:</span><span class="w"> </span><span class="kt">Partial</span><span class="o">&lt;</span><span class="nx">User</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-29-47" name="__codelineno-29-47"></a><span class="w">    </span><span class="k">super</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<a id="__codelineno-29-48" name="__codelineno-29-48"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-29-49" name="__codelineno-29-49"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Now bind this model to USER_MODEL key in application.ts</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-30-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1"></a><span class="k">this</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">AuthenticationBindings</span><span class="p">.</span><span class="nx">USER_MODEL</span><span class="p">).</span><span class="nx">to</span><span class="p">(</span><span class="nx">User</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>Create CRUD repository for both of the above models. Use loopback CLI.</p>
<div class="language-sh highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-31-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1"></a>lb4<span class="w"> </span>repository
</code></pre></div></td></tr></table></div>
<p>Add the verifier function for the strategy. You need to create a provider for the same. You can add your application specific business logic for client auth here. Here is a simple example.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-32-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-32-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-32-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-32-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-32-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-32-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-32-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-32-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-32-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-32-10">10</a></span>
<span class="normal"><a href="#__codelineno-32-11">11</a></span>
<span class="normal"><a href="#__codelineno-32-12">12</a></span>
<span class="normal"><a href="#__codelineno-32-13">13</a></span>
<span class="normal"><a href="#__codelineno-32-14">14</a></span>
<span class="normal"><a href="#__codelineno-32-15">15</a></span>
<span class="normal"><a href="#__codelineno-32-16">16</a></span>
<span class="normal"><a href="#__codelineno-32-17">17</a></span>
<span class="normal"><a href="#__codelineno-32-18">18</a></span>
<span class="normal"><a href="#__codelineno-32-19">19</a></span>
<span class="normal"><a href="#__codelineno-32-20">20</a></span>
<span class="normal"><a href="#__codelineno-32-21">21</a></span>
<span class="normal"><a href="#__codelineno-32-22">22</a></span>
<span class="normal"><a href="#__codelineno-32-23">23</a></span>
<span class="normal"><a href="#__codelineno-32-24">24</a></span>
<span class="normal"><a href="#__codelineno-32-25">25</a></span>
<span class="normal"><a href="#__codelineno-32-26">26</a></span>
<span class="normal"><a href="#__codelineno-32-27">27</a></span>
<span class="normal"><a href="#__codelineno-32-28">28</a></span>
<span class="normal"><a href="#__codelineno-32-29">29</a></span>
<span class="normal"><a href="#__codelineno-32-30">30</a></span>
<span class="normal"><a href="#__codelineno-32-31">31</a></span>
<span class="normal"><a href="#__codelineno-32-32">32</a></span>
<span class="normal"><a href="#__codelineno-32-33">33</a></span>
<span class="normal"><a href="#__codelineno-32-34">34</a></span>
<span class="normal"><a href="#__codelineno-32-35">35</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">ResourceOwnerVerifyProvider</span>
<a id="__codelineno-32-2" name="__codelineno-32-2"></a><span class="w">  </span><span class="k">implements</span><span class="w"> </span><span class="nx">Provider</span><span class="o">&lt;</span><span class="nx">VerifyFunction</span><span class="p">.</span><span class="nx">ResourceOwnerPasswordFn</span><span class="o">&gt;</span>
<a id="__codelineno-32-3" name="__codelineno-32-3"></a><span class="p">{</span>
<a id="__codelineno-32-4" name="__codelineno-32-4"></a><span class="w">  </span><span class="kr">constructor</span><span class="p">(</span>
<a id="__codelineno-32-5" name="__codelineno-32-5"></a><span class="w">    </span><span class="kd">@repository</span><span class="p">(</span><span class="nx">UserRepository</span><span class="p">)</span>
<a id="__codelineno-32-6" name="__codelineno-32-6"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nx">userRepository</span><span class="o">:</span><span class="w"> </span><span class="kt">UserRepository</span><span class="p">,</span>
<a id="__codelineno-32-7" name="__codelineno-32-7"></a><span class="w">    </span><span class="kd">@repository</span><span class="p">(</span><span class="nx">AuthClientRepository</span><span class="p">)</span>
<a id="__codelineno-32-8" name="__codelineno-32-8"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nx">authClientRepository</span><span class="o">:</span><span class="w"> </span><span class="kt">AuthClientRepository</span><span class="p">,</span>
<a id="__codelineno-32-9" name="__codelineno-32-9"></a><span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-32-10" name="__codelineno-32-10"></a>
<a id="__codelineno-32-11" name="__codelineno-32-11"></a><span class="w">  </span><span class="nx">value</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">VerifyFunction</span><span class="p">.</span><span class="nx">ResourceOwnerPasswordFn</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-32-12" name="__codelineno-32-12"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">(</span><span class="nx">clientId</span><span class="p">,</span><span class="w"> </span><span class="nx">clientSecret</span><span class="p">,</span><span class="w"> </span><span class="nx">username</span><span class="p">,</span><span class="w"> </span><span class="nx">password</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-32-13" name="__codelineno-32-13"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">userRepository</span><span class="p">.</span><span class="nx">verifyPassword</span><span class="p">(</span><span class="nx">username</span><span class="p">,</span><span class="w"> </span><span class="nx">password</span><span class="p">);</span>
<a id="__codelineno-32-14" name="__codelineno-32-14"></a><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">user</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-32-15" name="__codelineno-32-15"></a><span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">HttpErrors</span><span class="p">.</span><span class="nx">Unauthorized</span><span class="p">(</span><span class="nx">AuthErrorKeys</span><span class="p">.</span><span class="nx">InvalidCredentials</span><span class="p">);</span>
<a id="__codelineno-32-16" name="__codelineno-32-16"></a><span class="w">      </span><span class="p">}</span>
<a id="__codelineno-32-17" name="__codelineno-32-17"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">authClientRepository</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span>
<a id="__codelineno-32-18" name="__codelineno-32-18"></a><span class="w">        </span><span class="nx">where</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-32-19" name="__codelineno-32-19"></a><span class="w">          </span><span class="nx">clientId</span><span class="p">,</span>
<a id="__codelineno-32-20" name="__codelineno-32-20"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-32-21" name="__codelineno-32-21"></a><span class="w">      </span><span class="p">});</span>
<a id="__codelineno-32-22" name="__codelineno-32-22"></a><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">client</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">client</span><span class="p">.</span><span class="nx">userIds</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">user</span><span class="p">.</span><span class="nx">id</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-32-23" name="__codelineno-32-23"></a><span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">HttpErrors</span><span class="p">.</span><span class="nx">Unauthorized</span><span class="p">(</span><span class="nx">AuthErrorKeys</span><span class="p">.</span><span class="nx">ClientInvalid</span><span class="p">);</span>
<a id="__codelineno-32-24" name="__codelineno-32-24"></a><span class="w">      </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">client</span><span class="p">.</span><span class="nx">clientSecret</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">client</span><span class="p">.</span><span class="nx">clientSecret</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="nx">clientSecret</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-32-25" name="__codelineno-32-25"></a><span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">HttpErrors</span><span class="p">.</span><span class="nx">Unauthorized</span><span class="p">(</span>
<a id="__codelineno-32-26" name="__codelineno-32-26"></a><span class="w">          </span><span class="nx">AuthErrorKeys</span><span class="p">.</span><span class="nx">ClientVerificationFailed</span><span class="p">,</span>
<a id="__codelineno-32-27" name="__codelineno-32-27"></a><span class="w">        </span><span class="p">);</span>
<a id="__codelineno-32-28" name="__codelineno-32-28"></a><span class="w">      </span><span class="p">}</span>
<a id="__codelineno-32-29" name="__codelineno-32-29"></a><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-32-30" name="__codelineno-32-30"></a><span class="w">        </span><span class="nx">client</span><span class="p">,</span>
<a id="__codelineno-32-31" name="__codelineno-32-31"></a><span class="w">        </span><span class="nx">user</span><span class="p">,</span>
<a id="__codelineno-32-32" name="__codelineno-32-32"></a><span class="w">      </span><span class="p">};</span>
<a id="__codelineno-32-33" name="__codelineno-32-33"></a><span class="w">    </span><span class="p">};</span>
<a id="__codelineno-32-34" name="__codelineno-32-34"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-32-35" name="__codelineno-32-35"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Please note the Verify function type <em>VerifyFunction.LocalPasswordFn</em>.
Also, in this case, verifier will return AuthClient as well as User model.</p>
<p>Now bind this provider to the application in application.ts.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-33-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">AuthenticationComponent</span><span class="p">,</span><span class="w"> </span><span class="nx">Strategies</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;loopback4-authentication&#39;</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-34-1">1</a></span>
<span class="normal"><a href="#__codelineno-34-2">2</a></span>
<span class="normal"><a href="#__codelineno-34-3">3</a></span>
<span class="normal"><a href="#__codelineno-34-4">4</a></span>
<span class="normal"><a href="#__codelineno-34-5">5</a></span>
<span class="normal"><a href="#__codelineno-34-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1"></a><span class="c1">// Add authentication component</span>
<a id="__codelineno-34-2" name="__codelineno-34-2"></a><span class="k">this</span><span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="nx">AuthenticationComponent</span><span class="p">);</span>
<a id="__codelineno-34-3" name="__codelineno-34-3"></a><span class="c1">// Customize authentication verify handlers</span>
<a id="__codelineno-34-4" name="__codelineno-34-4"></a><span class="k">this</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">Strategies</span><span class="p">.</span><span class="nx">Passport</span><span class="p">.</span><span class="nx">RESOURCE_OWNER_PASSWORD_VERIFIER</span><span class="p">).</span><span class="nx">toProvider</span><span class="p">(</span>
<a id="__codelineno-34-5" name="__codelineno-34-5"></a><span class="w">  </span><span class="nx">ResourceOwnerVerifyProvider</span><span class="p">,</span>
<a id="__codelineno-34-6" name="__codelineno-34-6"></a><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>Finally, add the authenticate function as a sequence action to sequence.ts.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-35-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-35-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-35-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-35-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-35-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-35-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-35-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-35-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-35-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-35-10">10</a></span>
<span class="normal"><a href="#__codelineno-35-11">11</a></span>
<span class="normal"><a href="#__codelineno-35-12">12</a></span>
<span class="normal"><a href="#__codelineno-35-13">13</a></span>
<span class="normal"><a href="#__codelineno-35-14">14</a></span>
<span class="normal"><a href="#__codelineno-35-15">15</a></span>
<span class="normal"><a href="#__codelineno-35-16">16</a></span>
<span class="normal"><a href="#__codelineno-35-17">17</a></span>
<span class="normal"><a href="#__codelineno-35-18">18</a></span>
<span class="normal"><a href="#__codelineno-35-19">19</a></span>
<span class="normal"><a href="#__codelineno-35-20">20</a></span>
<span class="normal"><a href="#__codelineno-35-21">21</a></span>
<span class="normal"><a href="#__codelineno-35-22">22</a></span>
<span class="normal"><a href="#__codelineno-35-23">23</a></span>
<span class="normal"><a href="#__codelineno-35-24">24</a></span>
<span class="normal"><a href="#__codelineno-35-25">25</a></span>
<span class="normal"><a href="#__codelineno-35-26">26</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">MySequence</span><span class="w"> </span><span class="k">implements</span><span class="w"> </span><span class="nx">SequenceHandler</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-35-2" name="__codelineno-35-2"></a><span class="w">  </span><span class="kr">constructor</span><span class="p">(</span>
<a id="__codelineno-35-3" name="__codelineno-35-3"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">FIND_ROUTE</span><span class="p">)</span><span class="w"> </span><span class="k">protected</span><span class="w"> </span><span class="nx">findRoute</span><span class="o">:</span><span class="w"> </span><span class="kt">FindRoute</span><span class="p">,</span>
<a id="__codelineno-35-4" name="__codelineno-35-4"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">PARSE_PARAMS</span><span class="p">)</span><span class="w"> </span><span class="k">protected</span><span class="w"> </span><span class="nx">parseParams</span><span class="o">:</span><span class="w"> </span><span class="kt">ParseParams</span><span class="p">,</span>
<a id="__codelineno-35-5" name="__codelineno-35-5"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">INVOKE_METHOD</span><span class="p">)</span><span class="w"> </span><span class="k">protected</span><span class="w"> </span><span class="nx">invoke</span><span class="o">:</span><span class="w"> </span><span class="kt">InvokeMethod</span><span class="p">,</span>
<a id="__codelineno-35-6" name="__codelineno-35-6"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">SEND</span><span class="p">)</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="nx">send</span><span class="o">:</span><span class="w"> </span><span class="kt">Send</span><span class="p">,</span>
<a id="__codelineno-35-7" name="__codelineno-35-7"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">REJECT</span><span class="p">)</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="nx">reject</span><span class="o">:</span><span class="w"> </span><span class="kt">Reject</span><span class="p">,</span>
<a id="__codelineno-35-8" name="__codelineno-35-8"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">AuthenticationBindings</span><span class="p">.</span><span class="nx">USER_AUTH_ACTION</span><span class="p">)</span>
<a id="__codelineno-35-9" name="__codelineno-35-9"></a><span class="w">    </span><span class="k">protected</span><span class="w"> </span><span class="nx">authenticateRequest</span><span class="o">:</span><span class="w"> </span><span class="kt">AuthenticateFn</span><span class="o">&lt;</span><span class="nx">AuthUser</span><span class="o">&gt;</span><span class="p">,</span>
<a id="__codelineno-35-10" name="__codelineno-35-10"></a><span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-35-11" name="__codelineno-35-11"></a>
<a id="__codelineno-35-12" name="__codelineno-35-12"></a><span class="w">  </span><span class="k">async</span><span class="w"> </span><span class="nx">handle</span><span class="p">(</span><span class="nx">context</span><span class="o">:</span><span class="w"> </span><span class="kt">RequestContext</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-35-13" name="__codelineno-35-13"></a><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-35-14" name="__codelineno-35-14"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="nx">request</span><span class="p">,</span><span class="w"> </span><span class="nx">response</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">context</span><span class="p">;</span>
<a id="__codelineno-35-15" name="__codelineno-35-15"></a>
<a id="__codelineno-35-16" name="__codelineno-35-16"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">route</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">findRoute</span><span class="p">(</span><span class="nx">request</span><span class="p">);</span>
<a id="__codelineno-35-17" name="__codelineno-35-17"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">parseParams</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span><span class="w"> </span><span class="nx">route</span><span class="p">);</span>
<a id="__codelineno-35-18" name="__codelineno-35-18"></a><span class="w">      </span><span class="nx">request</span><span class="p">.</span><span class="nx">body</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">args</span><span class="p">[</span><span class="nx">args</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">];</span>
<a id="__codelineno-35-19" name="__codelineno-35-19"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">authUser</span><span class="o">:</span><span class="w"> </span><span class="kt">AuthUser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">authenticateRequest</span><span class="p">(</span><span class="nx">request</span><span class="p">);</span>
<a id="__codelineno-35-20" name="__codelineno-35-20"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">invoke</span><span class="p">(</span><span class="nx">route</span><span class="p">,</span><span class="w"> </span><span class="nx">args</span><span class="p">);</span>
<a id="__codelineno-35-21" name="__codelineno-35-21"></a><span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">response</span><span class="p">,</span><span class="w"> </span><span class="nx">result</span><span class="p">);</span>
<a id="__codelineno-35-22" name="__codelineno-35-22"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-35-23" name="__codelineno-35-23"></a><span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">reject</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">);</span>
<a id="__codelineno-35-24" name="__codelineno-35-24"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-35-25" name="__codelineno-35-25"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-35-26" name="__codelineno-35-26"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>After this, you can use decorator to apply auth to controller functions wherever needed. See below.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-36-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-36-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-36-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-36-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-36-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-36-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-36-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-36-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-36-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-36-10">10</a></span>
<span class="normal"><a href="#__codelineno-36-11">11</a></span>
<span class="normal"><a href="#__codelineno-36-12">12</a></span>
<span class="normal"><a href="#__codelineno-36-13">13</a></span>
<span class="normal"><a href="#__codelineno-36-14">14</a></span>
<span class="normal"><a href="#__codelineno-36-15">15</a></span>
<span class="normal"><a href="#__codelineno-36-16">16</a></span>
<span class="normal"><a href="#__codelineno-36-17">17</a></span>
<span class="normal"><a href="#__codelineno-36-18">18</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1"></a><span class="w">  </span><span class="kd">@authenticate</span><span class="p">(</span><span class="nx">STRATEGY</span><span class="p">.</span><span class="nx">OAUTH2_RESOURCE_OWNER_GRANT</span><span class="p">)</span>
<a id="__codelineno-36-2" name="__codelineno-36-2"></a><span class="w">  </span><span class="kd">@post</span><span class="p">(</span><span class="s1">&#39;/auth/login-token&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-36-3" name="__codelineno-36-3"></a><span class="w">    </span><span class="nx">responses</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-36-4" name="__codelineno-36-4"></a><span class="w">      </span><span class="p">[</span><span class="nx">STATUS_CODE</span><span class="p">.</span><span class="nx">OK</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-36-5" name="__codelineno-36-5"></a><span class="w">        </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Token Response Model&#39;</span><span class="p">,</span>
<a id="__codelineno-36-6" name="__codelineno-36-6"></a><span class="w">        </span><span class="nx">content</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-36-7" name="__codelineno-36-7"></a><span class="w">          </span><span class="p">[</span><span class="nx">CONTENT_TYPE</span><span class="p">.</span><span class="nb">JSON</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-36-8" name="__codelineno-36-8"></a><span class="w">            </span><span class="nx">schema</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="s1">&#39;x-ts-type&#39;</span><span class="o">:</span><span class="w"> </span><span class="nx">TokenResponse</span><span class="p">},</span>
<a id="__codelineno-36-9" name="__codelineno-36-9"></a><span class="w">          </span><span class="p">},</span>
<a id="__codelineno-36-10" name="__codelineno-36-10"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-36-11" name="__codelineno-36-11"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-36-12" name="__codelineno-36-12"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-36-13" name="__codelineno-36-13"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-36-14" name="__codelineno-36-14"></a><span class="w">  </span><span class="k">async</span><span class="w"> </span><span class="nx">loginWithClientUser</span><span class="p">(</span>
<a id="__codelineno-36-15" name="__codelineno-36-15"></a><span class="w">    </span><span class="kd">@requestBody</span><span class="p">()</span><span class="w"> </span><span class="nx">req</span><span class="o">:</span><span class="w"> </span><span class="kt">LoginRequest</span><span class="p">,</span>
<a id="__codelineno-36-16" name="__codelineno-36-16"></a><span class="w">  </span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">TokenResponse</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-36-17" name="__codelineno-36-17"></a><span class="w">    </span><span class="p">......</span>
<a id="__codelineno-36-18" name="__codelineno-36-18"></a><span class="w">  </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>For accessing the authenticated AuthUser and AuthClient model reference, you can inject the CURRENT_USER and CURRENT_CLIENT provider, provided by the extension, which is populated by the auth action sequence above.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-37-1">1</a></span>
<span class="normal"><a href="#__codelineno-37-2">2</a></span>
<span class="normal"><a href="#__codelineno-37-3">3</a></span>
<span class="normal"><a href="#__codelineno-37-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1"></a><span class="w">  </span><span class="kd">@inject</span><span class="p">.</span><span class="nx">getter</span><span class="p">(</span><span class="nx">AuthenticationBindings</span><span class="p">.</span><span class="nx">CURRENT_USER</span><span class="p">)</span>
<a id="__codelineno-37-2" name="__codelineno-37-2"></a><span class="w">  </span><span class="k">private</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="nx">getCurrentUser</span><span class="o">:</span><span class="w"> </span><span class="kt">Getter</span><span class="o">&lt;</span><span class="nx">User</span><span class="o">&gt;</span><span class="p">,</span>
<a id="__codelineno-37-3" name="__codelineno-37-3"></a><span class="w">  </span><span class="kd">@inject</span><span class="p">.</span><span class="nx">getter</span><span class="p">(</span><span class="nx">AuthenticationBindings</span><span class="p">.</span><span class="nx">CURRENT_CLIENT</span><span class="p">)</span>
<a id="__codelineno-37-4" name="__codelineno-37-4"></a><span class="w">  </span><span class="k">private</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="nx">getCurrentClient</span><span class="o">:</span><span class="w"> </span><span class="kt">Getter</span><span class="o">&lt;</span><span class="nx">AuthClient</span><span class="o">&gt;</span><span class="p">,</span>
</code></pre></div></td></tr></table></div>
<h3 id="otp">OTP<a class="headerlink" href="#otp" title="Permanent link">&para;</a></h3>
<p>First, create a OtpCache model. This model should have OTP and few details of user and client (which will be used to retrieve them from database), it will be used to verify otp and get user, client. See sample below.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-38-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-38-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-38-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-38-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-38-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-38-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-38-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-38-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-38-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-38-10">10</a></span>
<span class="normal"><a href="#__codelineno-38-11">11</a></span>
<span class="normal"><a href="#__codelineno-38-12">12</a></span>
<span class="normal"><a href="#__codelineno-38-13">13</a></span>
<span class="normal"><a href="#__codelineno-38-14">14</a></span>
<span class="normal"><a href="#__codelineno-38-15">15</a></span>
<span class="normal"><a href="#__codelineno-38-16">16</a></span>
<span class="normal"><a href="#__codelineno-38-17">17</a></span>
<span class="normal"><a href="#__codelineno-38-18">18</a></span>
<span class="normal"><a href="#__codelineno-38-19">19</a></span>
<span class="normal"><a href="#__codelineno-38-20">20</a></span>
<span class="normal"><a href="#__codelineno-38-21">21</a></span>
<span class="normal"><a href="#__codelineno-38-22">22</a></span>
<span class="normal"><a href="#__codelineno-38-23">23</a></span>
<span class="normal"><a href="#__codelineno-38-24">24</a></span>
<span class="normal"><a href="#__codelineno-38-25">25</a></span>
<span class="normal"><a href="#__codelineno-38-26">26</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1"></a><span class="kd">@model</span><span class="p">()</span>
<a id="__codelineno-38-2" name="__codelineno-38-2"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">OtpCache</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">Entity</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-38-3" name="__codelineno-38-3"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-38-4" name="__codelineno-38-4"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-38-5" name="__codelineno-38-5"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-38-6" name="__codelineno-38-6"></a><span class="w">  </span><span class="nx">otp</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-38-7" name="__codelineno-38-7"></a>
<a id="__codelineno-38-8" name="__codelineno-38-8"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-38-9" name="__codelineno-38-9"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-38-10" name="__codelineno-38-10"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-38-11" name="__codelineno-38-11"></a><span class="w">  </span><span class="nx">userId</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-38-12" name="__codelineno-38-12"></a>
<a id="__codelineno-38-13" name="__codelineno-38-13"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-38-14" name="__codelineno-38-14"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-38-15" name="__codelineno-38-15"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-38-16" name="__codelineno-38-16"></a><span class="w">  </span><span class="nx">clientId</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-38-17" name="__codelineno-38-17"></a>
<a id="__codelineno-38-18" name="__codelineno-38-18"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-38-19" name="__codelineno-38-19"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-38-20" name="__codelineno-38-20"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-38-21" name="__codelineno-38-21"></a><span class="w">  </span><span class="nx">clientSecret</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-38-22" name="__codelineno-38-22"></a>
<a id="__codelineno-38-23" name="__codelineno-38-23"></a><span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">data?</span><span class="o">:</span><span class="w"> </span><span class="kt">Partial</span><span class="o">&lt;</span><span class="nx">OtpCache</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-38-24" name="__codelineno-38-24"></a><span class="w">    </span><span class="k">super</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<a id="__codelineno-38-25" name="__codelineno-38-25"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-38-26" name="__codelineno-38-26"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Create <a href="https://loopback.io/doc/en/lb4/Repository.html#define-a-keyvaluerepository">redis-repository</a> for the above model. Use loopback CLI.</p>
<div class="language-sh highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-39-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1"></a>lb4<span class="w"> </span>repository
</code></pre></div></td></tr></table></div>
<p>Here is a simple example.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-40-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-40-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-40-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-40-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-40-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-40-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-40-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-40-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-40-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-40-10">10</a></span>
<span class="normal"><a href="#__codelineno-40-11">11</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">OtpCache</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../models&#39;</span><span class="p">;</span>
<a id="__codelineno-40-2" name="__codelineno-40-2"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">AuthCacheSourceName</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;loopback4-authentication&#39;</span><span class="p">;</span>
<a id="__codelineno-40-3" name="__codelineno-40-3"></a>
<a id="__codelineno-40-4" name="__codelineno-40-4"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">OtpCacheRepository</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">DefaultKeyValueRepository</span><span class="o">&lt;</span><span class="nx">OtpCache</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-40-5" name="__codelineno-40-5"></a><span class="w">  </span><span class="kr">constructor</span><span class="p">(</span>
<a id="__codelineno-40-6" name="__codelineno-40-6"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="sb">`datasources.</span><span class="si">${</span><span class="nx">AuthCacheSourceName</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
<a id="__codelineno-40-7" name="__codelineno-40-7"></a><span class="w">    </span><span class="nx">dataSource</span><span class="o">:</span><span class="w"> </span><span class="kt">juggler.DataSource</span><span class="p">,</span>
<a id="__codelineno-40-8" name="__codelineno-40-8"></a><span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-40-9" name="__codelineno-40-9"></a><span class="w">    </span><span class="k">super</span><span class="p">(</span><span class="nx">OtpCache</span><span class="p">,</span><span class="w"> </span><span class="nx">dataSource</span><span class="p">);</span>
<a id="__codelineno-40-10" name="__codelineno-40-10"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-40-11" name="__codelineno-40-11"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Add the verifier function for the strategy. You need to create a provider for the same. You can add your application specific business logic for auth here. Here is a simple example.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-41-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-41-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-41-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-41-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-41-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-41-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-41-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-41-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-41-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-41-10">10</a></span>
<span class="normal"><a href="#__codelineno-41-11">11</a></span>
<span class="normal"><a href="#__codelineno-41-12">12</a></span>
<span class="normal"><a href="#__codelineno-41-13">13</a></span>
<span class="normal"><a href="#__codelineno-41-14">14</a></span>
<span class="normal"><a href="#__codelineno-41-15">15</a></span>
<span class="normal"><a href="#__codelineno-41-16">16</a></span>
<span class="normal"><a href="#__codelineno-41-17">17</a></span>
<span class="normal"><a href="#__codelineno-41-18">18</a></span>
<span class="normal"><a href="#__codelineno-41-19">19</a></span>
<span class="normal"><a href="#__codelineno-41-20">20</a></span>
<span class="normal"><a href="#__codelineno-41-21">21</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">OtpVerifyProvider</span><span class="w"> </span><span class="k">implements</span><span class="w"> </span><span class="nx">Provider</span><span class="o">&lt;</span><span class="nx">VerifyFunction</span><span class="p">.</span><span class="nx">OtpAuthFn</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-41-2" name="__codelineno-41-2"></a><span class="w">  </span><span class="kr">constructor</span><span class="p">(</span>
<a id="__codelineno-41-3" name="__codelineno-41-3"></a><span class="w">    </span><span class="kd">@repository</span><span class="p">(</span><span class="nx">UserRepository</span><span class="p">)</span>
<a id="__codelineno-41-4" name="__codelineno-41-4"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nx">userRepository</span><span class="o">:</span><span class="w"> </span><span class="kt">UserRepository</span><span class="p">,</span>
<a id="__codelineno-41-5" name="__codelineno-41-5"></a><span class="w">    </span><span class="kd">@repository</span><span class="p">(</span><span class="nx">OtpCacheRepository</span><span class="p">)</span>
<a id="__codelineno-41-6" name="__codelineno-41-6"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nx">otpCacheRepo</span><span class="o">:</span><span class="w"> </span><span class="kt">OtpCacheRepository</span><span class="p">,</span>
<a id="__codelineno-41-7" name="__codelineno-41-7"></a><span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-41-8" name="__codelineno-41-8"></a>
<a id="__codelineno-41-9" name="__codelineno-41-9"></a><span class="w">  </span><span class="nx">value</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">VerifyFunction</span><span class="p">.</span><span class="nx">OtpAuthFn</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-41-10" name="__codelineno-41-10"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">(</span><span class="nx">key</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="nx">otp</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-41-11" name="__codelineno-41-11"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">otpCache</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">otpCacheRepo</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">key</span><span class="p">);</span>
<a id="__codelineno-41-12" name="__codelineno-41-12"></a><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">otpCache</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-41-13" name="__codelineno-41-13"></a><span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">HttpErrors</span><span class="p">.</span><span class="nx">Unauthorized</span><span class="p">(</span><span class="nx">AuthErrorKeys</span><span class="p">.</span><span class="nx">InvalidCredentials</span><span class="p">);</span>
<a id="__codelineno-41-14" name="__codelineno-41-14"></a><span class="w">      </span><span class="p">}</span>
<a id="__codelineno-41-15" name="__codelineno-41-15"></a><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">otpCache</span><span class="p">.</span><span class="nx">otp</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="nx">otp</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-41-16" name="__codelineno-41-16"></a><span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">HttpErrors</span><span class="p">.</span><span class="nx">Unauthorized</span><span class="p">(</span><span class="s1">&#39;Invalid OTP&#39;</span><span class="p">);</span>
<a id="__codelineno-41-17" name="__codelineno-41-17"></a><span class="w">      </span><span class="p">}</span>
<a id="__codelineno-41-18" name="__codelineno-41-18"></a><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">userRepository</span><span class="p">.</span><span class="nx">findById</span><span class="p">(</span><span class="nx">otpCache</span><span class="p">.</span><span class="nx">userId</span><span class="p">);</span>
<a id="__codelineno-41-19" name="__codelineno-41-19"></a><span class="w">    </span><span class="p">};</span>
<a id="__codelineno-41-20" name="__codelineno-41-20"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-41-21" name="__codelineno-41-21"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Please note the Verify function type <em>VerifyFunction.OtpAuthFn</em></p>
<p>Now bind this provider to the application in application.ts.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-42-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-42-1" name="__codelineno-42-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">AuthenticationComponent</span><span class="p">,</span><span class="w"> </span><span class="nx">Strategies</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;loopback4-authentication&#39;</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-43-1">1</a></span>
<span class="normal"><a href="#__codelineno-43-2">2</a></span>
<span class="normal"><a href="#__codelineno-43-3">3</a></span>
<span class="normal"><a href="#__codelineno-43-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-43-1" name="__codelineno-43-1"></a><span class="c1">// Add authentication component</span>
<a id="__codelineno-43-2" name="__codelineno-43-2"></a><span class="k">this</span><span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="nx">AuthenticationComponent</span><span class="p">);</span>
<a id="__codelineno-43-3" name="__codelineno-43-3"></a><span class="c1">// Customize authentication verify handlers</span>
<a id="__codelineno-43-4" name="__codelineno-43-4"></a><span class="k">this</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">Strategies</span><span class="p">.</span><span class="nx">Passport</span><span class="p">.</span><span class="nx">OTP_VERIFIER</span><span class="p">).</span><span class="nx">toProvider</span><span class="p">(</span><span class="nx">OtpVerifyProvider</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>Finally, add the authenticate function as a sequence action to sequence.ts.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-44-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-44-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-44-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-44-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-44-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-44-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-44-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-44-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-44-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-44-10">10</a></span>
<span class="normal"><a href="#__codelineno-44-11">11</a></span>
<span class="normal"><a href="#__codelineno-44-12">12</a></span>
<span class="normal"><a href="#__codelineno-44-13">13</a></span>
<span class="normal"><a href="#__codelineno-44-14">14</a></span>
<span class="normal"><a href="#__codelineno-44-15">15</a></span>
<span class="normal"><a href="#__codelineno-44-16">16</a></span>
<span class="normal"><a href="#__codelineno-44-17">17</a></span>
<span class="normal"><a href="#__codelineno-44-18">18</a></span>
<span class="normal"><a href="#__codelineno-44-19">19</a></span>
<span class="normal"><a href="#__codelineno-44-20">20</a></span>
<span class="normal"><a href="#__codelineno-44-21">21</a></span>
<span class="normal"><a href="#__codelineno-44-22">22</a></span>
<span class="normal"><a href="#__codelineno-44-23">23</a></span>
<span class="normal"><a href="#__codelineno-44-24">24</a></span>
<span class="normal"><a href="#__codelineno-44-25">25</a></span>
<span class="normal"><a href="#__codelineno-44-26">26</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-44-1" name="__codelineno-44-1"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">MySequence</span><span class="w"> </span><span class="k">implements</span><span class="w"> </span><span class="nx">SequenceHandler</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-44-2" name="__codelineno-44-2"></a><span class="w">  </span><span class="kr">constructor</span><span class="p">(</span>
<a id="__codelineno-44-3" name="__codelineno-44-3"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">FIND_ROUTE</span><span class="p">)</span><span class="w"> </span><span class="k">protected</span><span class="w"> </span><span class="nx">findRoute</span><span class="o">:</span><span class="w"> </span><span class="kt">FindRoute</span><span class="p">,</span>
<a id="__codelineno-44-4" name="__codelineno-44-4"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">PARSE_PARAMS</span><span class="p">)</span><span class="w"> </span><span class="k">protected</span><span class="w"> </span><span class="nx">parseParams</span><span class="o">:</span><span class="w"> </span><span class="kt">ParseParams</span><span class="p">,</span>
<a id="__codelineno-44-5" name="__codelineno-44-5"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">INVOKE_METHOD</span><span class="p">)</span><span class="w"> </span><span class="k">protected</span><span class="w"> </span><span class="nx">invoke</span><span class="o">:</span><span class="w"> </span><span class="kt">InvokeMethod</span><span class="p">,</span>
<a id="__codelineno-44-6" name="__codelineno-44-6"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">SEND</span><span class="p">)</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="nx">send</span><span class="o">:</span><span class="w"> </span><span class="kt">Send</span><span class="p">,</span>
<a id="__codelineno-44-7" name="__codelineno-44-7"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">REJECT</span><span class="p">)</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="nx">reject</span><span class="o">:</span><span class="w"> </span><span class="kt">Reject</span><span class="p">,</span>
<a id="__codelineno-44-8" name="__codelineno-44-8"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">AuthenticationBindings</span><span class="p">.</span><span class="nx">USER_AUTH_ACTION</span><span class="p">)</span>
<a id="__codelineno-44-9" name="__codelineno-44-9"></a><span class="w">    </span><span class="k">protected</span><span class="w"> </span><span class="nx">authenticateRequest</span><span class="o">:</span><span class="w"> </span><span class="kt">AuthenticateFn</span><span class="o">&lt;</span><span class="nx">AuthUser</span><span class="o">&gt;</span><span class="p">,</span>
<a id="__codelineno-44-10" name="__codelineno-44-10"></a><span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-44-11" name="__codelineno-44-11"></a>
<a id="__codelineno-44-12" name="__codelineno-44-12"></a><span class="w">  </span><span class="k">async</span><span class="w"> </span><span class="nx">handle</span><span class="p">(</span><span class="nx">context</span><span class="o">:</span><span class="w"> </span><span class="kt">RequestContext</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-44-13" name="__codelineno-44-13"></a><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-44-14" name="__codelineno-44-14"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="nx">request</span><span class="p">,</span><span class="w"> </span><span class="nx">response</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">context</span><span class="p">;</span>
<a id="__codelineno-44-15" name="__codelineno-44-15"></a>
<a id="__codelineno-44-16" name="__codelineno-44-16"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">route</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">findRoute</span><span class="p">(</span><span class="nx">request</span><span class="p">);</span>
<a id="__codelineno-44-17" name="__codelineno-44-17"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">parseParams</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span><span class="w"> </span><span class="nx">route</span><span class="p">);</span>
<a id="__codelineno-44-18" name="__codelineno-44-18"></a><span class="w">      </span><span class="nx">request</span><span class="p">.</span><span class="nx">body</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">args</span><span class="p">[</span><span class="nx">args</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">];</span>
<a id="__codelineno-44-19" name="__codelineno-44-19"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">authUser</span><span class="o">:</span><span class="w"> </span><span class="kt">AuthUser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">authenticateRequest</span><span class="p">(</span><span class="nx">request</span><span class="p">);</span>
<a id="__codelineno-44-20" name="__codelineno-44-20"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">invoke</span><span class="p">(</span><span class="nx">route</span><span class="p">,</span><span class="w"> </span><span class="nx">args</span><span class="p">);</span>
<a id="__codelineno-44-21" name="__codelineno-44-21"></a><span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">response</span><span class="p">,</span><span class="w"> </span><span class="nx">result</span><span class="p">);</span>
<a id="__codelineno-44-22" name="__codelineno-44-22"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-44-23" name="__codelineno-44-23"></a><span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">reject</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">);</span>
<a id="__codelineno-44-24" name="__codelineno-44-24"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-44-25" name="__codelineno-44-25"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-44-26" name="__codelineno-44-26"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Then, you need to create APIs, where you will first authenticate the user, and then send the OTP to user's email/phone. See below.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-45-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-45-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-45-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-45-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-45-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-45-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-45-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-45-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-45-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-45-10">10</a></span>
<span class="normal"><a href="#__codelineno-45-11">11</a></span>
<span class="normal"><a href="#__codelineno-45-12">12</a></span>
<span class="normal"><a href="#__codelineno-45-13">13</a></span>
<span class="normal"><a href="#__codelineno-45-14">14</a></span>
<span class="normal"><a href="#__codelineno-45-15">15</a></span>
<span class="normal"><a href="#__codelineno-45-16">16</a></span>
<span class="normal"><a href="#__codelineno-45-17">17</a></span>
<span class="normal"><a href="#__codelineno-45-18">18</a></span>
<span class="normal"><a href="#__codelineno-45-19">19</a></span>
<span class="normal"><a href="#__codelineno-45-20">20</a></span>
<span class="normal"><a href="#__codelineno-45-21">21</a></span>
<span class="normal"><a href="#__codelineno-45-22">22</a></span>
<span class="normal"><a href="#__codelineno-45-23">23</a></span>
<span class="normal"><a href="#__codelineno-45-24">24</a></span>
<span class="normal"><a href="#__codelineno-45-25">25</a></span>
<span class="normal"><a href="#__codelineno-45-26">26</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-45-1" name="__codelineno-45-1"></a><span class="w">  </span><span class="c1">//You can use your other strategies also</span>
<a id="__codelineno-45-2" name="__codelineno-45-2"></a><span class="w">  </span><span class="kd">@authenticate</span><span class="p">(</span><span class="nx">STRATEGY</span><span class="p">.</span><span class="nx">LOCAL</span><span class="p">)</span>
<a id="__codelineno-45-3" name="__codelineno-45-3"></a><span class="w">  </span><span class="kd">@post</span><span class="p">(</span><span class="s1">&#39;/auth/send-otp&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-45-4" name="__codelineno-45-4"></a><span class="w">    </span><span class="nx">responses</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-45-5" name="__codelineno-45-5"></a><span class="w">      </span><span class="p">[</span><span class="nx">STATUS_CODE</span><span class="p">.</span><span class="nx">OK</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-45-6" name="__codelineno-45-6"></a><span class="w">        </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Send Otp&#39;</span><span class="p">,</span>
<a id="__codelineno-45-7" name="__codelineno-45-7"></a><span class="w">        </span><span class="nx">content</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-45-8" name="__codelineno-45-8"></a><span class="w">          </span><span class="p">[</span><span class="nx">CONTENT_TYPE</span><span class="p">.</span><span class="nb">JSON</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="nb">Object</span><span class="p">,</span>
<a id="__codelineno-45-9" name="__codelineno-45-9"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-45-10" name="__codelineno-45-10"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-45-11" name="__codelineno-45-11"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-45-12" name="__codelineno-45-12"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-45-13" name="__codelineno-45-13"></a><span class="w">  </span><span class="k">async</span><span class="w"> </span><span class="nx">login</span><span class="p">(</span>
<a id="__codelineno-45-14" name="__codelineno-45-14"></a><span class="w">    </span><span class="kd">@requestBody</span><span class="p">()</span>
<a id="__codelineno-45-15" name="__codelineno-45-15"></a><span class="w">    </span><span class="nx">req</span><span class="o">:</span><span class="w"> </span><span class="kt">LoginRequest</span><span class="p">,</span>
<a id="__codelineno-45-16" name="__codelineno-45-16"></a><span class="w">  </span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nb">Promise</span><span class="o">&lt;</span><span class="p">{</span>
<a id="__codelineno-45-17" name="__codelineno-45-17"></a><span class="w">    </span><span class="nx">key</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-45-18" name="__codelineno-45-18"></a><span class="w">  </span><span class="p">}</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-45-19" name="__codelineno-45-19"></a>
<a id="__codelineno-45-20" name="__codelineno-45-20"></a><span class="w">    </span><span class="c1">// User is authenticated before this step.</span>
<a id="__codelineno-45-21" name="__codelineno-45-21"></a><span class="w">    </span><span class="c1">// Now follow these steps:</span>
<a id="__codelineno-45-22" name="__codelineno-45-22"></a><span class="w">    </span><span class="c1">// 1. Create a unique key.</span>
<a id="__codelineno-45-23" name="__codelineno-45-23"></a><span class="w">    </span><span class="c1">// 2. Generate and send OTP to user&#39;s email/phone.</span>
<a id="__codelineno-45-24" name="__codelineno-45-24"></a><span class="w">    </span><span class="c1">// 3. Store the details in redis-cache using key created in step-1. (Refer OtpCache model mentioned above)</span>
<a id="__codelineno-45-25" name="__codelineno-45-25"></a><span class="w">    </span><span class="c1">// 4. Response will be the key created in step-1</span>
<a id="__codelineno-45-26" name="__codelineno-45-26"></a><span class="w">  </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>After this, create an API with @@authenticate(STRATEGY.OTP) decorator. See below.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-46-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-46-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-46-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-46-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-46-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-46-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-46-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-46-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-46-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-46-10">10</a></span>
<span class="normal"><a href="#__codelineno-46-11">11</a></span>
<span class="normal"><a href="#__codelineno-46-12">12</a></span>
<span class="normal"><a href="#__codelineno-46-13">13</a></span>
<span class="normal"><a href="#__codelineno-46-14">14</a></span>
<span class="normal"><a href="#__codelineno-46-15">15</a></span>
<span class="normal"><a href="#__codelineno-46-16">16</a></span>
<span class="normal"><a href="#__codelineno-46-17">17</a></span>
<span class="normal"><a href="#__codelineno-46-18">18</a></span>
<span class="normal"><a href="#__codelineno-46-19">19</a></span>
<span class="normal"><a href="#__codelineno-46-20">20</a></span>
<span class="normal"><a href="#__codelineno-46-21">21</a></span>
<span class="normal"><a href="#__codelineno-46-22">22</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-46-1" name="__codelineno-46-1"></a><span class="w">  </span><span class="kd">@authenticate</span><span class="p">(</span><span class="nx">STRATEGY</span><span class="p">.</span><span class="nx">OTP</span><span class="p">)</span>
<a id="__codelineno-46-2" name="__codelineno-46-2"></a><span class="w">  </span><span class="kd">@post</span><span class="p">(</span><span class="s1">&#39;/auth/login-otp&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-46-3" name="__codelineno-46-3"></a><span class="w">    </span><span class="nx">responses</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-46-4" name="__codelineno-46-4"></a><span class="w">      </span><span class="p">[</span><span class="nx">STATUS_CODE</span><span class="p">.</span><span class="nx">OK</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-46-5" name="__codelineno-46-5"></a><span class="w">        </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Auth Code&#39;</span><span class="p">,</span>
<a id="__codelineno-46-6" name="__codelineno-46-6"></a><span class="w">        </span><span class="nx">content</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-46-7" name="__codelineno-46-7"></a><span class="w">          </span><span class="p">[</span><span class="nx">CONTENT_TYPE</span><span class="p">.</span><span class="nb">JSON</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="nb">Object</span><span class="p">,</span>
<a id="__codelineno-46-8" name="__codelineno-46-8"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-46-9" name="__codelineno-46-9"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-46-10" name="__codelineno-46-10"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-46-11" name="__codelineno-46-11"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-46-12" name="__codelineno-46-12"></a><span class="w">  </span><span class="k">async</span><span class="w"> </span><span class="nx">login</span><span class="p">(</span>
<a id="__codelineno-46-13" name="__codelineno-46-13"></a><span class="w">    </span><span class="kd">@requestBody</span><span class="p">()</span>
<a id="__codelineno-46-14" name="__codelineno-46-14"></a><span class="w">    </span><span class="nx">req</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-46-15" name="__codelineno-46-15"></a><span class="w">      </span><span class="nx">key</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">;</span>
<a id="__codelineno-46-16" name="__codelineno-46-16"></a><span class="w">      </span><span class="nx">otp</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">;</span>
<a id="__codelineno-46-17" name="__codelineno-46-17"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-46-18" name="__codelineno-46-18"></a><span class="w">  </span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nb">Promise</span><span class="o">&lt;</span><span class="p">{</span>
<a id="__codelineno-46-19" name="__codelineno-46-19"></a><span class="w">    </span><span class="nx">code</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-46-20" name="__codelineno-46-20"></a><span class="w">  </span><span class="p">}</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-46-21" name="__codelineno-46-21"></a><span class="w">    </span><span class="p">......</span>
<a id="__codelineno-46-22" name="__codelineno-46-22"></a><span class="w">  </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>For accessing the authenticated AuthUser model reference, you can inject the CURRENT_USER provider, provided by the extension, which is populated by the auth action sequence above.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-47-1">1</a></span>
<span class="normal"><a href="#__codelineno-47-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-47-1" name="__codelineno-47-1"></a><span class="w">  </span><span class="kd">@inject</span><span class="p">.</span><span class="nx">getter</span><span class="p">(</span><span class="nx">AuthenticationBindings</span><span class="p">.</span><span class="nx">CURRENT_USER</span><span class="p">)</span>
<a id="__codelineno-47-2" name="__codelineno-47-2"></a><span class="w">  </span><span class="k">private</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="nx">getCurrentUser</span><span class="o">:</span><span class="w"> </span><span class="kt">Getter</span><span class="o">&lt;</span><span class="nx">User</span><span class="o">&gt;</span><span class="p">,</span>
</code></pre></div></td></tr></table></div>
<h3 id="google-oauth-2">Google Oauth 2<a class="headerlink" href="#google-oauth-2" title="Permanent link">&para;</a></h3>
<p>In order to use it, run <code>npm install passport-google-oauth20</code> and <code>npm install @types/passport-google-oauth20</code>.
First, create a AuthUser model implementing the IAuthUser interface. You can implement the interface in the user model itself. See sample below.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-48-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-48-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-48-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-48-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-48-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-48-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-48-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-48-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-48-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-48-10">10</a></span>
<span class="normal"><a href="#__codelineno-48-11">11</a></span>
<span class="normal"><a href="#__codelineno-48-12">12</a></span>
<span class="normal"><a href="#__codelineno-48-13">13</a></span>
<span class="normal"><a href="#__codelineno-48-14">14</a></span>
<span class="normal"><a href="#__codelineno-48-15">15</a></span>
<span class="normal"><a href="#__codelineno-48-16">16</a></span>
<span class="normal"><a href="#__codelineno-48-17">17</a></span>
<span class="normal"><a href="#__codelineno-48-18">18</a></span>
<span class="normal"><a href="#__codelineno-48-19">19</a></span>
<span class="normal"><a href="#__codelineno-48-20">20</a></span>
<span class="normal"><a href="#__codelineno-48-21">21</a></span>
<span class="normal"><a href="#__codelineno-48-22">22</a></span>
<span class="normal"><a href="#__codelineno-48-23">23</a></span>
<span class="normal"><a href="#__codelineno-48-24">24</a></span>
<span class="normal"><a href="#__codelineno-48-25">25</a></span>
<span class="normal"><a href="#__codelineno-48-26">26</a></span>
<span class="normal"><a href="#__codelineno-48-27">27</a></span>
<span class="normal"><a href="#__codelineno-48-28">28</a></span>
<span class="normal"><a href="#__codelineno-48-29">29</a></span>
<span class="normal"><a href="#__codelineno-48-30">30</a></span>
<span class="normal"><a href="#__codelineno-48-31">31</a></span>
<span class="normal"><a href="#__codelineno-48-32">32</a></span>
<span class="normal"><a href="#__codelineno-48-33">33</a></span>
<span class="normal"><a href="#__codelineno-48-34">34</a></span>
<span class="normal"><a href="#__codelineno-48-35">35</a></span>
<span class="normal"><a href="#__codelineno-48-36">36</a></span>
<span class="normal"><a href="#__codelineno-48-37">37</a></span>
<span class="normal"><a href="#__codelineno-48-38">38</a></span>
<span class="normal"><a href="#__codelineno-48-39">39</a></span>
<span class="normal"><a href="#__codelineno-48-40">40</a></span>
<span class="normal"><a href="#__codelineno-48-41">41</a></span>
<span class="normal"><a href="#__codelineno-48-42">42</a></span>
<span class="normal"><a href="#__codelineno-48-43">43</a></span>
<span class="normal"><a href="#__codelineno-48-44">44</a></span>
<span class="normal"><a href="#__codelineno-48-45">45</a></span>
<span class="normal"><a href="#__codelineno-48-46">46</a></span>
<span class="normal"><a href="#__codelineno-48-47">47</a></span>
<span class="normal"><a href="#__codelineno-48-48">48</a></span>
<span class="normal"><a href="#__codelineno-48-49">49</a></span>
<span class="normal"><a href="#__codelineno-48-50">50</a></span>
<span class="normal"><a href="#__codelineno-48-51">51</a></span>
<span class="normal"><a href="#__codelineno-48-52">52</a></span>
<span class="normal"><a href="#__codelineno-48-53">53</a></span>
<span class="normal"><a href="#__codelineno-48-54">54</a></span>
<span class="normal"><a href="#__codelineno-48-55">55</a></span>
<span class="normal"><a href="#__codelineno-48-56">56</a></span>
<span class="normal"><a href="#__codelineno-48-57">57</a></span>
<span class="normal"><a href="#__codelineno-48-58">58</a></span>
<span class="normal"><a href="#__codelineno-48-59">59</a></span>
<span class="normal"><a href="#__codelineno-48-60">60</a></span>
<span class="normal"><a href="#__codelineno-48-61">61</a></span>
<span class="normal"><a href="#__codelineno-48-62">62</a></span>
<span class="normal"><a href="#__codelineno-48-63">63</a></span>
<span class="normal"><a href="#__codelineno-48-64">64</a></span>
<span class="normal"><a href="#__codelineno-48-65">65</a></span>
<span class="normal"><a href="#__codelineno-48-66">66</a></span>
<span class="normal"><a href="#__codelineno-48-67">67</a></span>
<span class="normal"><a href="#__codelineno-48-68">68</a></span>
<span class="normal"><a href="#__codelineno-48-69">69</a></span>
<span class="normal"><a href="#__codelineno-48-70">70</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-48-1" name="__codelineno-48-1"></a><span class="kd">@model</span><span class="p">({</span>
<a id="__codelineno-48-2" name="__codelineno-48-2"></a><span class="w">  </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;users&#39;</span><span class="p">,</span>
<a id="__codelineno-48-3" name="__codelineno-48-3"></a><span class="p">})</span>
<a id="__codelineno-48-4" name="__codelineno-48-4"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">User</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">Entity</span><span class="w"> </span><span class="k">implements</span><span class="w"> </span><span class="nx">IAuthUser</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-48-5" name="__codelineno-48-5"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-48-6" name="__codelineno-48-6"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;number&#39;</span><span class="p">,</span>
<a id="__codelineno-48-7" name="__codelineno-48-7"></a><span class="w">    </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<a id="__codelineno-48-8" name="__codelineno-48-8"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-48-9" name="__codelineno-48-9"></a><span class="w">  </span><span class="nx">id?</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">;</span>
<a id="__codelineno-48-10" name="__codelineno-48-10"></a>
<a id="__codelineno-48-11" name="__codelineno-48-11"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-48-12" name="__codelineno-48-12"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-48-13" name="__codelineno-48-13"></a><span class="w">    </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<a id="__codelineno-48-14" name="__codelineno-48-14"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;first_name&#39;</span><span class="p">,</span>
<a id="__codelineno-48-15" name="__codelineno-48-15"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-48-16" name="__codelineno-48-16"></a><span class="w">  </span><span class="nx">firstName</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-48-17" name="__codelineno-48-17"></a>
<a id="__codelineno-48-18" name="__codelineno-48-18"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-48-19" name="__codelineno-48-19"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-48-20" name="__codelineno-48-20"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;last_name&#39;</span><span class="p">,</span>
<a id="__codelineno-48-21" name="__codelineno-48-21"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-48-22" name="__codelineno-48-22"></a><span class="w">  </span><span class="nx">lastName</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-48-23" name="__codelineno-48-23"></a>
<a id="__codelineno-48-24" name="__codelineno-48-24"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-48-25" name="__codelineno-48-25"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-48-26" name="__codelineno-48-26"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;middle_name&#39;</span><span class="p">,</span>
<a id="__codelineno-48-27" name="__codelineno-48-27"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-48-28" name="__codelineno-48-28"></a><span class="w">  </span><span class="nx">middleName?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-48-29" name="__codelineno-48-29"></a>
<a id="__codelineno-48-30" name="__codelineno-48-30"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-48-31" name="__codelineno-48-31"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-48-32" name="__codelineno-48-32"></a><span class="w">    </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<a id="__codelineno-48-33" name="__codelineno-48-33"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-48-34" name="__codelineno-48-34"></a><span class="w">  </span><span class="nx">username</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-48-35" name="__codelineno-48-35"></a>
<a id="__codelineno-48-36" name="__codelineno-48-36"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-48-37" name="__codelineno-48-37"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-48-38" name="__codelineno-48-38"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-48-39" name="__codelineno-48-39"></a><span class="w">  </span><span class="nx">email?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-48-40" name="__codelineno-48-40"></a>
<a id="__codelineno-48-41" name="__codelineno-48-41"></a><span class="w">  </span><span class="c1">// Auth provider - &#39;google&#39;</span>
<a id="__codelineno-48-42" name="__codelineno-48-42"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-48-43" name="__codelineno-48-43"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-48-44" name="__codelineno-48-44"></a><span class="w">    </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<a id="__codelineno-48-45" name="__codelineno-48-45"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;auth_provider&#39;</span><span class="p">,</span>
<a id="__codelineno-48-46" name="__codelineno-48-46"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-48-47" name="__codelineno-48-47"></a><span class="w">  </span><span class="nx">authProvider</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-48-48" name="__codelineno-48-48"></a>
<a id="__codelineno-48-49" name="__codelineno-48-49"></a><span class="w">  </span><span class="c1">// Id from external provider</span>
<a id="__codelineno-48-50" name="__codelineno-48-50"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-48-51" name="__codelineno-48-51"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-48-52" name="__codelineno-48-52"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;auth_id&#39;</span><span class="p">,</span>
<a id="__codelineno-48-53" name="__codelineno-48-53"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-48-54" name="__codelineno-48-54"></a><span class="w">  </span><span class="nx">authId?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-48-55" name="__codelineno-48-55"></a>
<a id="__codelineno-48-56" name="__codelineno-48-56"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-48-57" name="__codelineno-48-57"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-48-58" name="__codelineno-48-58"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;auth_token&#39;</span><span class="p">,</span>
<a id="__codelineno-48-59" name="__codelineno-48-59"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-48-60" name="__codelineno-48-60"></a><span class="w">  </span><span class="nx">authToken?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-48-61" name="__codelineno-48-61"></a>
<a id="__codelineno-48-62" name="__codelineno-48-62"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-48-63" name="__codelineno-48-63"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-48-64" name="__codelineno-48-64"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-48-65" name="__codelineno-48-65"></a><span class="w">  </span><span class="nx">password?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-48-66" name="__codelineno-48-66"></a>
<a id="__codelineno-48-67" name="__codelineno-48-67"></a><span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">data?</span><span class="o">:</span><span class="w"> </span><span class="kt">Partial</span><span class="o">&lt;</span><span class="nx">User</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-48-68" name="__codelineno-48-68"></a><span class="w">    </span><span class="k">super</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<a id="__codelineno-48-69" name="__codelineno-48-69"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-48-70" name="__codelineno-48-70"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Now bind this model to USER_MODEL key in application.ts</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-49-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-49-1" name="__codelineno-49-1"></a><span class="k">this</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">AuthenticationBindings</span><span class="p">.</span><span class="nx">USER_MODEL</span><span class="p">).</span><span class="nx">to</span><span class="p">(</span><span class="nx">User</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>Create CRUD repository for the above model. Use loopback CLI.</p>
<div class="language-sh highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-50-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-50-1" name="__codelineno-50-1"></a>lb4<span class="w"> </span>repository
</code></pre></div></td></tr></table></div>
<p>Add the verifier function for the strategy. You need to create a provider for the same. You can add your application specific business logic for client auth here. Here is a simple example.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-51-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-51-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-51-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-51-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-51-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-51-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-51-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-51-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-51-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-51-10">10</a></span>
<span class="normal"><a href="#__codelineno-51-11">11</a></span>
<span class="normal"><a href="#__codelineno-51-12">12</a></span>
<span class="normal"><a href="#__codelineno-51-13">13</a></span>
<span class="normal"><a href="#__codelineno-51-14">14</a></span>
<span class="normal"><a href="#__codelineno-51-15">15</a></span>
<span class="normal"><a href="#__codelineno-51-16">16</a></span>
<span class="normal"><a href="#__codelineno-51-17">17</a></span>
<span class="normal"><a href="#__codelineno-51-18">18</a></span>
<span class="normal"><a href="#__codelineno-51-19">19</a></span>
<span class="normal"><a href="#__codelineno-51-20">20</a></span>
<span class="normal"><a href="#__codelineno-51-21">21</a></span>
<span class="normal"><a href="#__codelineno-51-22">22</a></span>
<span class="normal"><a href="#__codelineno-51-23">23</a></span>
<span class="normal"><a href="#__codelineno-51-24">24</a></span>
<span class="normal"><a href="#__codelineno-51-25">25</a></span>
<span class="normal"><a href="#__codelineno-51-26">26</a></span>
<span class="normal"><a href="#__codelineno-51-27">27</a></span>
<span class="normal"><a href="#__codelineno-51-28">28</a></span>
<span class="normal"><a href="#__codelineno-51-29">29</a></span>
<span class="normal"><a href="#__codelineno-51-30">30</a></span>
<span class="normal"><a href="#__codelineno-51-31">31</a></span>
<span class="normal"><a href="#__codelineno-51-32">32</a></span>
<span class="normal"><a href="#__codelineno-51-33">33</a></span>
<span class="normal"><a href="#__codelineno-51-34">34</a></span>
<span class="normal"><a href="#__codelineno-51-35">35</a></span>
<span class="normal"><a href="#__codelineno-51-36">36</a></span>
<span class="normal"><a href="#__codelineno-51-37">37</a></span>
<span class="normal"><a href="#__codelineno-51-38">38</a></span>
<span class="normal"><a href="#__codelineno-51-39">39</a></span>
<span class="normal"><a href="#__codelineno-51-40">40</a></span>
<span class="normal"><a href="#__codelineno-51-41">41</a></span>
<span class="normal"><a href="#__codelineno-51-42">42</a></span>
<span class="normal"><a href="#__codelineno-51-43">43</a></span>
<span class="normal"><a href="#__codelineno-51-44">44</a></span>
<span class="normal"><a href="#__codelineno-51-45">45</a></span>
<span class="normal"><a href="#__codelineno-51-46">46</a></span>
<span class="normal"><a href="#__codelineno-51-47">47</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-51-1" name="__codelineno-51-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">Provider</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@loopback/context&#39;</span><span class="p">;</span>
<a id="__codelineno-51-2" name="__codelineno-51-2"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">repository</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@loopback/repository&#39;</span><span class="p">;</span>
<a id="__codelineno-51-3" name="__codelineno-51-3"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">HttpErrors</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@loopback/rest&#39;</span><span class="p">;</span>
<a id="__codelineno-51-4" name="__codelineno-51-4"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">AuthErrorKeys</span><span class="p">,</span><span class="w"> </span><span class="nx">VerifyFunction</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;loopback4-authentication&#39;</span><span class="p">;</span>
<a id="__codelineno-51-5" name="__codelineno-51-5"></a>
<a id="__codelineno-51-6" name="__codelineno-51-6"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">Tenant</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../../../models&#39;</span><span class="p">;</span>
<a id="__codelineno-51-7" name="__codelineno-51-7"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">UserCredentialsRepository</span><span class="p">,</span><span class="w"> </span><span class="nx">UserRepository</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../../../repositories&#39;</span><span class="p">;</span>
<a id="__codelineno-51-8" name="__codelineno-51-8"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">AuthUser</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../models/auth-user.model&#39;</span><span class="p">;</span>
<a id="__codelineno-51-9" name="__codelineno-51-9"></a>
<a id="__codelineno-51-10" name="__codelineno-51-10"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">GoogleOauth2VerifyProvider</span>
<a id="__codelineno-51-11" name="__codelineno-51-11"></a><span class="w">  </span><span class="k">implements</span><span class="w"> </span><span class="nx">Provider</span><span class="o">&lt;</span><span class="nx">VerifyFunction</span><span class="p">.</span><span class="nx">GoogleAuthFn</span><span class="o">&gt;</span>
<a id="__codelineno-51-12" name="__codelineno-51-12"></a><span class="p">{</span>
<a id="__codelineno-51-13" name="__codelineno-51-13"></a><span class="w">  </span><span class="kr">constructor</span><span class="p">(</span>
<a id="__codelineno-51-14" name="__codelineno-51-14"></a><span class="w">    </span><span class="kd">@repository</span><span class="p">(</span><span class="nx">UserRepository</span><span class="p">)</span>
<a id="__codelineno-51-15" name="__codelineno-51-15"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nx">userRepository</span><span class="o">:</span><span class="w"> </span><span class="kt">UserRepository</span><span class="p">,</span>
<a id="__codelineno-51-16" name="__codelineno-51-16"></a><span class="w">    </span><span class="kd">@repository</span><span class="p">(</span><span class="nx">UserCredentialsRepository</span><span class="p">)</span>
<a id="__codelineno-51-17" name="__codelineno-51-17"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nx">userCredsRepository</span><span class="o">:</span><span class="w"> </span><span class="kt">UserCredentialsRepository</span><span class="p">,</span>
<a id="__codelineno-51-18" name="__codelineno-51-18"></a><span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-51-19" name="__codelineno-51-19"></a>
<a id="__codelineno-51-20" name="__codelineno-51-20"></a><span class="w">  </span><span class="nx">value</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">VerifyFunction</span><span class="p">.</span><span class="nx">GoogleAuthFn</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-51-21" name="__codelineno-51-21"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">(</span><span class="nx">accessToken</span><span class="p">,</span><span class="w"> </span><span class="nx">refreshToken</span><span class="p">,</span><span class="w"> </span><span class="nx">profile</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-51-22" name="__codelineno-51-22"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">userRepository</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span>
<a id="__codelineno-51-23" name="__codelineno-51-23"></a><span class="w">        </span><span class="nx">where</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-51-24" name="__codelineno-51-24"></a><span class="w">          </span><span class="cm">/* eslint-disable-next-line @typescript-eslint/no-explicit-any */</span>
<a id="__codelineno-51-25" name="__codelineno-51-25"></a><span class="w">          </span><span class="nx">email</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">profile</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">any</span><span class="p">).</span><span class="nx">_json</span><span class="p">.</span><span class="nx">email</span><span class="p">,</span>
<a id="__codelineno-51-26" name="__codelineno-51-26"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-51-27" name="__codelineno-51-27"></a><span class="w">      </span><span class="p">});</span>
<a id="__codelineno-51-28" name="__codelineno-51-28"></a><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">user</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-51-29" name="__codelineno-51-29"></a><span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">HttpErrors</span><span class="p">.</span><span class="nx">Unauthorized</span><span class="p">(</span><span class="nx">AuthErrorKeys</span><span class="p">.</span><span class="nx">InvalidCredentials</span><span class="p">);</span>
<a id="__codelineno-51-30" name="__codelineno-51-30"></a><span class="w">      </span><span class="p">}</span>
<a id="__codelineno-51-31" name="__codelineno-51-31"></a><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-51-32" name="__codelineno-51-32"></a><span class="w">        </span><span class="o">!</span><span class="nx">user</span><span class="w"> </span><span class="o">||</span>
<a id="__codelineno-51-33" name="__codelineno-51-33"></a><span class="w">        </span><span class="nx">user</span><span class="p">.</span><span class="nx">authProvider</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="s1">&#39;google&#39;</span><span class="w"> </span><span class="o">||</span>
<a id="__codelineno-51-34" name="__codelineno-51-34"></a><span class="w">        </span><span class="nx">user</span><span class="p">.</span><span class="nx">authId</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="nx">profile</span><span class="p">.</span><span class="nx">id</span>
<a id="__codelineno-51-35" name="__codelineno-51-35"></a><span class="w">      </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-51-36" name="__codelineno-51-36"></a><span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">HttpErrors</span><span class="p">.</span><span class="nx">Unauthorized</span><span class="p">(</span><span class="nx">AuthErrorKeys</span><span class="p">.</span><span class="nx">InvalidCredentials</span><span class="p">);</span>
<a id="__codelineno-51-37" name="__codelineno-51-37"></a><span class="w">      </span><span class="p">}</span>
<a id="__codelineno-51-38" name="__codelineno-51-38"></a>
<a id="__codelineno-51-39" name="__codelineno-51-39"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">authUser</span><span class="o">:</span><span class="w"> </span><span class="kt">AuthUser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">AuthUser</span><span class="p">(</span><span class="nx">user</span><span class="p">);</span>
<a id="__codelineno-51-40" name="__codelineno-51-40"></a><span class="w">      </span><span class="nx">authUser</span><span class="p">.</span><span class="nx">permissions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
<a id="__codelineno-51-41" name="__codelineno-51-41"></a><span class="w">      </span><span class="nx">authUser</span><span class="p">.</span><span class="nx">externalAuthToken</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">accessToken</span><span class="p">;</span>
<a id="__codelineno-51-42" name="__codelineno-51-42"></a><span class="w">      </span><span class="nx">authUser</span><span class="p">.</span><span class="nx">externalRefreshToken</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">refreshToken</span><span class="p">;</span>
<a id="__codelineno-51-43" name="__codelineno-51-43"></a><span class="w">      </span><span class="nx">authUser</span><span class="p">.</span><span class="nx">tenant</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Tenant</span><span class="p">({</span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="kt">user.defaultTenant</span><span class="p">});</span>
<a id="__codelineno-51-44" name="__codelineno-51-44"></a><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="nx">authUser</span><span class="p">;</span>
<a id="__codelineno-51-45" name="__codelineno-51-45"></a><span class="w">    </span><span class="p">};</span>
<a id="__codelineno-51-46" name="__codelineno-51-46"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-51-47" name="__codelineno-51-47"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Please note the Verify function type <em>VerifyFunction.LocalPasswordFn</em></p>
<p>Now bind this provider to the application in application.ts.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-52-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-52-1" name="__codelineno-52-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">AuthenticationComponent</span><span class="p">,</span><span class="w"> </span><span class="nx">Strategies</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;loopback4-authentication&#39;</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-53-1">1</a></span>
<span class="normal"><a href="#__codelineno-53-2">2</a></span>
<span class="normal"><a href="#__codelineno-53-3">3</a></span>
<span class="normal"><a href="#__codelineno-53-4">4</a></span>
<span class="normal"><a href="#__codelineno-53-5">5</a></span>
<span class="normal"><a href="#__codelineno-53-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-53-1" name="__codelineno-53-1"></a><span class="c1">// Add authentication component</span>
<a id="__codelineno-53-2" name="__codelineno-53-2"></a><span class="k">this</span><span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="nx">AuthenticationComponent</span><span class="p">);</span>
<a id="__codelineno-53-3" name="__codelineno-53-3"></a><span class="c1">// Customize authentication verify handlers</span>
<a id="__codelineno-53-4" name="__codelineno-53-4"></a><span class="k">this</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">Strategies</span><span class="p">.</span><span class="nx">Passport</span><span class="p">.</span><span class="nx">GOOGLE_OAUTH2_VERIFIER</span><span class="p">).</span><span class="nx">toProvider</span><span class="p">(</span>
<a id="__codelineno-53-5" name="__codelineno-53-5"></a><span class="w">  </span><span class="nx">GoogleOauth2VerifyProvider</span><span class="p">,</span>
<a id="__codelineno-53-6" name="__codelineno-53-6"></a><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>Now, bind this provider to the application in application.ts.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-54-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-54-1" name="__codelineno-54-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">GoogleAuthStrategyFactoryProvider</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;loopback4-authentication/passport-google-oauth2&#39;</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-55-1">1</a></span>
<span class="normal"><a href="#__codelineno-55-2">2</a></span>
<span class="normal"><a href="#__codelineno-55-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-55-1" name="__codelineno-55-1"></a><span class="k">this</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">Strategies</span><span class="p">.</span><span class="nx">Passport</span><span class="p">.</span><span class="nx">GOOGLE_OAUTH2_STRATEGY_FACTORY</span><span class="p">.</span><span class="nx">key</span><span class="p">).</span><span class="nx">toProvider</span><span class="p">(</span>
<a id="__codelineno-55-2" name="__codelineno-55-2"></a><span class="w">  </span><span class="nx">GoogleAuthStrategyFactoryProvider</span><span class="p">,</span>
<a id="__codelineno-55-3" name="__codelineno-55-3"></a><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>Finally, add the authenticate function as a sequence action to sequence.ts.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-56-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-56-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-56-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-56-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-56-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-56-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-56-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-56-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-56-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-56-10">10</a></span>
<span class="normal"><a href="#__codelineno-56-11">11</a></span>
<span class="normal"><a href="#__codelineno-56-12">12</a></span>
<span class="normal"><a href="#__codelineno-56-13">13</a></span>
<span class="normal"><a href="#__codelineno-56-14">14</a></span>
<span class="normal"><a href="#__codelineno-56-15">15</a></span>
<span class="normal"><a href="#__codelineno-56-16">16</a></span>
<span class="normal"><a href="#__codelineno-56-17">17</a></span>
<span class="normal"><a href="#__codelineno-56-18">18</a></span>
<span class="normal"><a href="#__codelineno-56-19">19</a></span>
<span class="normal"><a href="#__codelineno-56-20">20</a></span>
<span class="normal"><a href="#__codelineno-56-21">21</a></span>
<span class="normal"><a href="#__codelineno-56-22">22</a></span>
<span class="normal"><a href="#__codelineno-56-23">23</a></span>
<span class="normal"><a href="#__codelineno-56-24">24</a></span>
<span class="normal"><a href="#__codelineno-56-25">25</a></span>
<span class="normal"><a href="#__codelineno-56-26">26</a></span>
<span class="normal"><a href="#__codelineno-56-27">27</a></span>
<span class="normal"><a href="#__codelineno-56-28">28</a></span>
<span class="normal"><a href="#__codelineno-56-29">29</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-56-1" name="__codelineno-56-1"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">MySequence</span><span class="w"> </span><span class="k">implements</span><span class="w"> </span><span class="nx">SequenceHandler</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-56-2" name="__codelineno-56-2"></a><span class="w">  </span><span class="kr">constructor</span><span class="p">(</span>
<a id="__codelineno-56-3" name="__codelineno-56-3"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">FIND_ROUTE</span><span class="p">)</span><span class="w"> </span><span class="k">protected</span><span class="w"> </span><span class="nx">findRoute</span><span class="o">:</span><span class="w"> </span><span class="kt">FindRoute</span><span class="p">,</span>
<a id="__codelineno-56-4" name="__codelineno-56-4"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">PARSE_PARAMS</span><span class="p">)</span><span class="w"> </span><span class="k">protected</span><span class="w"> </span><span class="nx">parseParams</span><span class="o">:</span><span class="w"> </span><span class="kt">ParseParams</span><span class="p">,</span>
<a id="__codelineno-56-5" name="__codelineno-56-5"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">INVOKE_METHOD</span><span class="p">)</span><span class="w"> </span><span class="k">protected</span><span class="w"> </span><span class="nx">invoke</span><span class="o">:</span><span class="w"> </span><span class="kt">InvokeMethod</span><span class="p">,</span>
<a id="__codelineno-56-6" name="__codelineno-56-6"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">SEND</span><span class="p">)</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="nx">send</span><span class="o">:</span><span class="w"> </span><span class="kt">Send</span><span class="p">,</span>
<a id="__codelineno-56-7" name="__codelineno-56-7"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">REJECT</span><span class="p">)</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="nx">reject</span><span class="o">:</span><span class="w"> </span><span class="kt">Reject</span><span class="p">,</span>
<a id="__codelineno-56-8" name="__codelineno-56-8"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">AuthenticationBindings</span><span class="p">.</span><span class="nx">USER_AUTH_ACTION</span><span class="p">)</span>
<a id="__codelineno-56-9" name="__codelineno-56-9"></a><span class="w">    </span><span class="k">protected</span><span class="w"> </span><span class="nx">authenticateRequest</span><span class="o">:</span><span class="w"> </span><span class="kt">AuthenticateFn</span><span class="o">&lt;</span><span class="nx">AuthUser</span><span class="o">&gt;</span><span class="p">,</span>
<a id="__codelineno-56-10" name="__codelineno-56-10"></a><span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-56-11" name="__codelineno-56-11"></a>
<a id="__codelineno-56-12" name="__codelineno-56-12"></a><span class="w">  </span><span class="k">async</span><span class="w"> </span><span class="nx">handle</span><span class="p">(</span><span class="nx">context</span><span class="o">:</span><span class="w"> </span><span class="kt">RequestContext</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-56-13" name="__codelineno-56-13"></a><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-56-14" name="__codelineno-56-14"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="nx">request</span><span class="p">,</span><span class="w"> </span><span class="nx">response</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">context</span><span class="p">;</span>
<a id="__codelineno-56-15" name="__codelineno-56-15"></a>
<a id="__codelineno-56-16" name="__codelineno-56-16"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">route</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">findRoute</span><span class="p">(</span><span class="nx">request</span><span class="p">);</span>
<a id="__codelineno-56-17" name="__codelineno-56-17"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">parseParams</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span><span class="w"> </span><span class="nx">route</span><span class="p">);</span>
<a id="__codelineno-56-18" name="__codelineno-56-18"></a><span class="w">      </span><span class="nx">request</span><span class="p">.</span><span class="nx">body</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">args</span><span class="p">[</span><span class="nx">args</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">];</span>
<a id="__codelineno-56-19" name="__codelineno-56-19"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">authUser</span><span class="o">:</span><span class="w"> </span><span class="kt">AuthUser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">authenticateRequest</span><span class="p">(</span>
<a id="__codelineno-56-20" name="__codelineno-56-20"></a><span class="w">        </span><span class="nx">request</span><span class="p">,</span>
<a id="__codelineno-56-21" name="__codelineno-56-21"></a><span class="w">        </span><span class="nx">response</span><span class="p">,</span>
<a id="__codelineno-56-22" name="__codelineno-56-22"></a><span class="w">      </span><span class="p">);</span>
<a id="__codelineno-56-23" name="__codelineno-56-23"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">invoke</span><span class="p">(</span><span class="nx">route</span><span class="p">,</span><span class="w"> </span><span class="nx">args</span><span class="p">);</span>
<a id="__codelineno-56-24" name="__codelineno-56-24"></a><span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">response</span><span class="p">,</span><span class="w"> </span><span class="nx">result</span><span class="p">);</span>
<a id="__codelineno-56-25" name="__codelineno-56-25"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-56-26" name="__codelineno-56-26"></a><span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">reject</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">);</span>
<a id="__codelineno-56-27" name="__codelineno-56-27"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-56-28" name="__codelineno-56-28"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-56-29" name="__codelineno-56-29"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>After this, you can use decorator to apply auth to controller functions wherever needed. See below.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-57-1">  1</a></span>
<span class="normal"><a href="#__codelineno-57-2">  2</a></span>
<span class="normal"><a href="#__codelineno-57-3">  3</a></span>
<span class="normal"><a href="#__codelineno-57-4">  4</a></span>
<span class="normal"><a href="#__codelineno-57-5">  5</a></span>
<span class="normal"><a href="#__codelineno-57-6">  6</a></span>
<span class="normal"><a href="#__codelineno-57-7">  7</a></span>
<span class="normal"><a href="#__codelineno-57-8">  8</a></span>
<span class="normal"><a href="#__codelineno-57-9">  9</a></span>
<span class="normal"><a href="#__codelineno-57-10"> 10</a></span>
<span class="normal"><a href="#__codelineno-57-11"> 11</a></span>
<span class="normal"><a href="#__codelineno-57-12"> 12</a></span>
<span class="normal"><a href="#__codelineno-57-13"> 13</a></span>
<span class="normal"><a href="#__codelineno-57-14"> 14</a></span>
<span class="normal"><a href="#__codelineno-57-15"> 15</a></span>
<span class="normal"><a href="#__codelineno-57-16"> 16</a></span>
<span class="normal"><a href="#__codelineno-57-17"> 17</a></span>
<span class="normal"><a href="#__codelineno-57-18"> 18</a></span>
<span class="normal"><a href="#__codelineno-57-19"> 19</a></span>
<span class="normal"><a href="#__codelineno-57-20"> 20</a></span>
<span class="normal"><a href="#__codelineno-57-21"> 21</a></span>
<span class="normal"><a href="#__codelineno-57-22"> 22</a></span>
<span class="normal"><a href="#__codelineno-57-23"> 23</a></span>
<span class="normal"><a href="#__codelineno-57-24"> 24</a></span>
<span class="normal"><a href="#__codelineno-57-25"> 25</a></span>
<span class="normal"><a href="#__codelineno-57-26"> 26</a></span>
<span class="normal"><a href="#__codelineno-57-27"> 27</a></span>
<span class="normal"><a href="#__codelineno-57-28"> 28</a></span>
<span class="normal"><a href="#__codelineno-57-29"> 29</a></span>
<span class="normal"><a href="#__codelineno-57-30"> 30</a></span>
<span class="normal"><a href="#__codelineno-57-31"> 31</a></span>
<span class="normal"><a href="#__codelineno-57-32"> 32</a></span>
<span class="normal"><a href="#__codelineno-57-33"> 33</a></span>
<span class="normal"><a href="#__codelineno-57-34"> 34</a></span>
<span class="normal"><a href="#__codelineno-57-35"> 35</a></span>
<span class="normal"><a href="#__codelineno-57-36"> 36</a></span>
<span class="normal"><a href="#__codelineno-57-37"> 37</a></span>
<span class="normal"><a href="#__codelineno-57-38"> 38</a></span>
<span class="normal"><a href="#__codelineno-57-39"> 39</a></span>
<span class="normal"><a href="#__codelineno-57-40"> 40</a></span>
<span class="normal"><a href="#__codelineno-57-41"> 41</a></span>
<span class="normal"><a href="#__codelineno-57-42"> 42</a></span>
<span class="normal"><a href="#__codelineno-57-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-57-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-57-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-57-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-57-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-57-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-57-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-57-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-57-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-57-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-57-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-57-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-57-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-57-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-57-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-57-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-57-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-57-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-57-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-57-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-57-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-57-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-57-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-57-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-57-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-57-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-57-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-57-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-57-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-57-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-57-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-57-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-57-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-57-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-57-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-57-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-57-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-57-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-57-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-57-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-57-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-57-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-57-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-57-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-57-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-57-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-57-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-57-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-57-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-57-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-57-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-57-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-57-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-57-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-57-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-57-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-57-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-57-100">100</a></span>
<span class="normal"><a href="#__codelineno-57-101">101</a></span>
<span class="normal"><a href="#__codelineno-57-102">102</a></span>
<span class="normal"><a href="#__codelineno-57-103">103</a></span>
<span class="normal"><a href="#__codelineno-57-104">104</a></span>
<span class="normal"><a href="#__codelineno-57-105">105</a></span>
<span class="normal"><a href="#__codelineno-57-106">106</a></span>
<span class="normal"><a href="#__codelineno-57-107">107</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-57-1" name="__codelineno-57-1"></a><span class="kd">@authenticateClient</span><span class="p">(</span><span class="nx">STRATEGY</span><span class="p">.</span><span class="nx">CLIENT_PASSWORD</span><span class="p">)</span>
<a id="__codelineno-57-2" name="__codelineno-57-2"></a><span class="w">  </span><span class="kd">@authenticate</span><span class="p">(</span>
<a id="__codelineno-57-3" name="__codelineno-57-3"></a><span class="w">    </span><span class="nx">STRATEGY</span><span class="p">.</span><span class="nx">GOOGLE_OAUTH2</span><span class="p">,</span>
<a id="__codelineno-57-4" name="__codelineno-57-4"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-57-5" name="__codelineno-57-5"></a><span class="w">      </span><span class="nx">accessType</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;offline&#39;</span><span class="p">,</span>
<a id="__codelineno-57-6" name="__codelineno-57-6"></a><span class="w">      </span><span class="nx">scope</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;profile&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;email&#39;</span><span class="p">],</span>
<a id="__codelineno-57-7" name="__codelineno-57-7"></a><span class="w">      </span><span class="nx">authorizationURL</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.GOOGLE_AUTH_URL</span><span class="p">,</span>
<a id="__codelineno-57-8" name="__codelineno-57-8"></a><span class="w">      </span><span class="nx">callbackURL</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.GOOGLE_AUTH_CALLBACK_URL</span><span class="p">,</span>
<a id="__codelineno-57-9" name="__codelineno-57-9"></a><span class="w">      </span><span class="nx">clientID</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.GOOGLE_AUTH_CLIENT_ID</span><span class="p">,</span>
<a id="__codelineno-57-10" name="__codelineno-57-10"></a><span class="w">      </span><span class="nx">clientSecret</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.GOOGLE_AUTH_CLIENT_SECRET</span><span class="p">,</span>
<a id="__codelineno-57-11" name="__codelineno-57-11"></a><span class="w">      </span><span class="nx">tokenURL</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.GOOGLE_AUTH_TOKEN_URL</span><span class="p">,</span>
<a id="__codelineno-57-12" name="__codelineno-57-12"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-57-13" name="__codelineno-57-13"></a><span class="w">    </span><span class="p">(</span><span class="nx">req</span><span class="o">:</span><span class="w"> </span><span class="kt">Request</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-57-14" name="__codelineno-57-14"></a><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-57-15" name="__codelineno-57-15"></a><span class="w">        </span><span class="nx">accessType</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;offline&#39;</span><span class="p">,</span>
<a id="__codelineno-57-16" name="__codelineno-57-16"></a><span class="w">        </span><span class="nx">state</span><span class="o">:</span><span class="w"> </span><span class="kt">Object.keys</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">)</span>
<a id="__codelineno-57-17" name="__codelineno-57-17"></a><span class="w">          </span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">key</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">key</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">&#39;=&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">[</span><span class="nx">key</span><span class="p">])</span>
<a id="__codelineno-57-18" name="__codelineno-57-18"></a><span class="w">          </span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;&amp;&#39;</span><span class="p">),</span>
<a id="__codelineno-57-19" name="__codelineno-57-19"></a><span class="w">      </span><span class="p">};</span>
<a id="__codelineno-57-20" name="__codelineno-57-20"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-57-21" name="__codelineno-57-21"></a><span class="w">  </span><span class="p">)</span>
<a id="__codelineno-57-22" name="__codelineno-57-22"></a><span class="w">  </span><span class="kd">@authorize</span><span class="p">([</span><span class="s1">&#39;*&#39;</span><span class="p">])</span>
<a id="__codelineno-57-23" name="__codelineno-57-23"></a><span class="w">  </span><span class="kd">@get</span><span class="p">(</span><span class="s1">&#39;/auth/google&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-57-24" name="__codelineno-57-24"></a><span class="w">    </span><span class="nx">responses</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-57-25" name="__codelineno-57-25"></a><span class="w">      </span><span class="p">[</span><span class="nx">STATUS_CODE</span><span class="p">.</span><span class="nx">OK</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-57-26" name="__codelineno-57-26"></a><span class="w">        </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Token Response&#39;</span><span class="p">,</span>
<a id="__codelineno-57-27" name="__codelineno-57-27"></a><span class="w">        </span><span class="nx">content</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-57-28" name="__codelineno-57-28"></a><span class="w">          </span><span class="p">[</span><span class="nx">CONTENT_TYPE</span><span class="p">.</span><span class="nb">JSON</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-57-29" name="__codelineno-57-29"></a><span class="w">            </span><span class="nx">schema</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="s1">&#39;x-ts-type&#39;</span><span class="o">:</span><span class="w"> </span><span class="nx">TokenResponse</span><span class="p">},</span>
<a id="__codelineno-57-30" name="__codelineno-57-30"></a><span class="w">          </span><span class="p">},</span>
<a id="__codelineno-57-31" name="__codelineno-57-31"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-57-32" name="__codelineno-57-32"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-57-33" name="__codelineno-57-33"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-57-34" name="__codelineno-57-34"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-57-35" name="__codelineno-57-35"></a><span class="w">  </span><span class="k">async</span><span class="w"> </span><span class="nx">loginViaGoogle</span><span class="p">(</span>
<a id="__codelineno-57-36" name="__codelineno-57-36"></a><span class="w">    </span><span class="kd">@param</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="kt">string</span><span class="p">(</span><span class="s1">&#39;client_id&#39;</span><span class="p">)</span>
<a id="__codelineno-57-37" name="__codelineno-57-37"></a><span class="w">    </span><span class="nx">clientId?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span>
<a id="__codelineno-57-38" name="__codelineno-57-38"></a><span class="w">    </span><span class="kd">@param</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="kt">string</span><span class="p">(</span><span class="s1">&#39;client_secret&#39;</span><span class="p">)</span>
<a id="__codelineno-57-39" name="__codelineno-57-39"></a><span class="w">    </span><span class="nx">clientSecret?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span>
<a id="__codelineno-57-40" name="__codelineno-57-40"></a><span class="w">  </span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nb">Promise</span><span class="o">&lt;</span><span class="ow">void</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-57-41" name="__codelineno-57-41"></a>
<a id="__codelineno-57-42" name="__codelineno-57-42"></a><span class="w">  </span><span class="kd">@authenticate</span><span class="p">(</span>
<a id="__codelineno-57-43" name="__codelineno-57-43"></a><span class="w">    </span><span class="nx">STRATEGY</span><span class="p">.</span><span class="nx">GOOGLE_OAUTH2</span><span class="p">,</span>
<a id="__codelineno-57-44" name="__codelineno-57-44"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-57-45" name="__codelineno-57-45"></a><span class="w">      </span><span class="nx">accessType</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;offline&#39;</span><span class="p">,</span>
<a id="__codelineno-57-46" name="__codelineno-57-46"></a><span class="w">      </span><span class="nx">scope</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;profile&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;email&#39;</span><span class="p">],</span>
<a id="__codelineno-57-47" name="__codelineno-57-47"></a><span class="w">      </span><span class="nx">authorizationURL</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.GOOGLE_AUTH_URL</span><span class="p">,</span>
<a id="__codelineno-57-48" name="__codelineno-57-48"></a><span class="w">      </span><span class="nx">callbackURL</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.GOOGLE_AUTH_CALLBACK_URL</span><span class="p">,</span>
<a id="__codelineno-57-49" name="__codelineno-57-49"></a><span class="w">      </span><span class="nx">clientID</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.GOOGLE_AUTH_CLIENT_ID</span><span class="p">,</span>
<a id="__codelineno-57-50" name="__codelineno-57-50"></a><span class="w">      </span><span class="nx">clientSecret</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.GOOGLE_AUTH_CLIENT_SECRET</span><span class="p">,</span>
<a id="__codelineno-57-51" name="__codelineno-57-51"></a><span class="w">      </span><span class="nx">tokenURL</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.GOOGLE_AUTH_TOKEN_URL</span><span class="p">,</span>
<a id="__codelineno-57-52" name="__codelineno-57-52"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-57-53" name="__codelineno-57-53"></a><span class="w">    </span><span class="p">(</span><span class="nx">req</span><span class="o">:</span><span class="w"> </span><span class="kt">Request</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-57-54" name="__codelineno-57-54"></a><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-57-55" name="__codelineno-57-55"></a><span class="w">        </span><span class="nx">accessType</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;offline&#39;</span><span class="p">,</span>
<a id="__codelineno-57-56" name="__codelineno-57-56"></a><span class="w">        </span><span class="nx">state</span><span class="o">:</span><span class="w"> </span><span class="kt">Object.keys</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">)</span>
<a id="__codelineno-57-57" name="__codelineno-57-57"></a><span class="w">          </span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">key</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="sb">`</span><span class="si">${</span><span class="nx">key</span><span class="si">}</span><span class="sb">=</span><span class="si">${</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
<a id="__codelineno-57-58" name="__codelineno-57-58"></a><span class="w">          </span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;&amp;&#39;</span><span class="p">),</span>
<a id="__codelineno-57-59" name="__codelineno-57-59"></a><span class="w">      </span><span class="p">};</span>
<a id="__codelineno-57-60" name="__codelineno-57-60"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-57-61" name="__codelineno-57-61"></a><span class="w">  </span><span class="p">)</span>
<a id="__codelineno-57-62" name="__codelineno-57-62"></a><span class="w">  </span><span class="kd">@authorize</span><span class="p">([</span><span class="s1">&#39;*&#39;</span><span class="p">])</span>
<a id="__codelineno-57-63" name="__codelineno-57-63"></a><span class="w">  </span><span class="kd">@get</span><span class="p">(</span><span class="s1">&#39;/auth/google-auth-redirect&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-57-64" name="__codelineno-57-64"></a><span class="w">    </span><span class="nx">responses</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-57-65" name="__codelineno-57-65"></a><span class="w">      </span><span class="p">[</span><span class="nx">STATUS_CODE</span><span class="p">.</span><span class="nx">OK</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-57-66" name="__codelineno-57-66"></a><span class="w">        </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Token Response&#39;</span><span class="p">,</span>
<a id="__codelineno-57-67" name="__codelineno-57-67"></a><span class="w">        </span><span class="nx">content</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-57-68" name="__codelineno-57-68"></a><span class="w">          </span><span class="p">[</span><span class="nx">CONTENT_TYPE</span><span class="p">.</span><span class="nb">JSON</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-57-69" name="__codelineno-57-69"></a><span class="w">            </span><span class="nx">schema</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="s1">&#39;x-ts-type&#39;</span><span class="o">:</span><span class="w"> </span><span class="nx">TokenResponse</span><span class="p">},</span>
<a id="__codelineno-57-70" name="__codelineno-57-70"></a><span class="w">          </span><span class="p">},</span>
<a id="__codelineno-57-71" name="__codelineno-57-71"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-57-72" name="__codelineno-57-72"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-57-73" name="__codelineno-57-73"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-57-74" name="__codelineno-57-74"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-57-75" name="__codelineno-57-75"></a><span class="w">  </span><span class="k">async</span><span class="w"> </span><span class="nx">googleCallback</span><span class="p">(</span>
<a id="__codelineno-57-76" name="__codelineno-57-76"></a><span class="w">    </span><span class="kd">@param</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="kt">string</span><span class="p">(</span><span class="s1">&#39;code&#39;</span><span class="p">)</span><span class="w"> </span><span class="nx">code</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span>
<a id="__codelineno-57-77" name="__codelineno-57-77"></a><span class="w">    </span><span class="kd">@param</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="kt">string</span><span class="p">(</span><span class="s1">&#39;state&#39;</span><span class="p">)</span><span class="w"> </span><span class="nx">state</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span>
<a id="__codelineno-57-78" name="__codelineno-57-78"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">RestBindings</span><span class="p">.</span><span class="nx">Http</span><span class="p">.</span><span class="nx">RESPONSE</span><span class="p">)</span><span class="w"> </span><span class="nx">response</span><span class="o">:</span><span class="w"> </span><span class="kt">Response</span><span class="p">,</span>
<a id="__codelineno-57-79" name="__codelineno-57-79"></a><span class="w">  </span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nb">Promise</span><span class="o">&lt;</span><span class="ow">void</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-57-80" name="__codelineno-57-80"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">clientId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">URLSearchParams</span><span class="p">(</span><span class="nx">state</span><span class="p">).</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;client_id&#39;</span><span class="p">);</span>
<a id="__codelineno-57-81" name="__codelineno-57-81"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">clientId</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">user</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-57-82" name="__codelineno-57-82"></a><span class="w">      </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">HttpErrors</span><span class="p">.</span><span class="nx">Unauthorized</span><span class="p">(</span><span class="nx">AuthErrorKeys</span><span class="p">.</span><span class="nx">ClientInvalid</span><span class="p">);</span>
<a id="__codelineno-57-83" name="__codelineno-57-83"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-57-84" name="__codelineno-57-84"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">authClientRepository</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span>
<a id="__codelineno-57-85" name="__codelineno-57-85"></a><span class="w">      </span><span class="nx">where</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-57-86" name="__codelineno-57-86"></a><span class="w">        </span><span class="nx">clientId</span><span class="o">:</span><span class="w"> </span><span class="kt">clientId</span><span class="p">,</span>
<a id="__codelineno-57-87" name="__codelineno-57-87"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-57-88" name="__codelineno-57-88"></a><span class="w">    </span><span class="p">});</span>
<a id="__codelineno-57-89" name="__codelineno-57-89"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">client</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">!</span><span class="nx">client</span><span class="p">.</span><span class="nx">redirectUrl</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-57-90" name="__codelineno-57-90"></a><span class="w">      </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">HttpErrors</span><span class="p">.</span><span class="nx">Unauthorized</span><span class="p">(</span><span class="nx">AuthErrorKeys</span><span class="p">.</span><span class="nx">ClientInvalid</span><span class="p">);</span>
<a id="__codelineno-57-91" name="__codelineno-57-91"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-57-92" name="__codelineno-57-92"></a><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-57-93" name="__codelineno-57-93"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">codePayload</span><span class="o">:</span><span class="w"> </span><span class="kt">ClientAuthCode</span><span class="o">&lt;</span><span class="nx">User</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-57-94" name="__codelineno-57-94"></a><span class="w">        </span><span class="nx">clientId</span><span class="p">,</span>
<a id="__codelineno-57-95" name="__codelineno-57-95"></a><span class="w">        </span><span class="nx">user</span><span class="o">:</span><span class="w"> </span><span class="kt">this.user</span><span class="p">,</span>
<a id="__codelineno-57-96" name="__codelineno-57-96"></a><span class="w">      </span><span class="p">};</span>
<a id="__codelineno-57-97" name="__codelineno-57-97"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">jwt</span><span class="p">.</span><span class="nx">sign</span><span class="p">(</span><span class="nx">codePayload</span><span class="p">,</span><span class="w"> </span><span class="nx">client</span><span class="p">.</span><span class="nx">secret</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-57-98" name="__codelineno-57-98"></a><span class="w">        </span><span class="nx">expiresIn</span><span class="o">:</span><span class="w"> </span><span class="kt">client.authCodeExpiration</span><span class="p">,</span>
<a id="__codelineno-57-99" name="__codelineno-57-99"></a><span class="w">        </span><span class="nx">audience</span><span class="o">:</span><span class="w"> </span><span class="kt">clientId</span><span class="p">,</span>
<a id="__codelineno-57-100" name="__codelineno-57-100"></a><span class="w">        </span><span class="nx">subject</span><span class="o">:</span><span class="w"> </span><span class="kt">this.user.username</span><span class="p">,</span>
<a id="__codelineno-57-101" name="__codelineno-57-101"></a><span class="w">        </span><span class="nx">issuer</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.JWT_ISSUER</span><span class="p">,</span>
<a id="__codelineno-57-102" name="__codelineno-57-102"></a><span class="w">      </span><span class="p">});</span>
<a id="__codelineno-57-103" name="__codelineno-57-103"></a><span class="w">      </span><span class="nx">response</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">client</span><span class="p">.</span><span class="nx">redirectUrl</span><span class="si">}</span><span class="sb">?code=</span><span class="si">${</span><span class="nx">token</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<a id="__codelineno-57-104" name="__codelineno-57-104"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-57-105" name="__codelineno-57-105"></a><span class="w">      </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">HttpErrors</span><span class="p">.</span><span class="nx">InternalServerError</span><span class="p">(</span><span class="nx">AuthErrorKeys</span><span class="p">.</span><span class="nx">UnknownError</span><span class="p">);</span>
<a id="__codelineno-57-106" name="__codelineno-57-106"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-57-107" name="__codelineno-57-107"></a><span class="w">  </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Please note above that we are creating two new APIs for google auth. The first one is for UI clients to hit. We are authenticating client as well, then passing the details to the google auth. Then, the actual authentication is done by google authorization url, which redirects to the second API we created after success. The first API method body is empty as we do not need to handle its response. The google auth provider in this package will do the redirection for you automatically.</p>
<p>For accessing the authenticated AuthUser model reference, you can inject the CURRENT_USER provider, provided by the extension, which is populated by the auth action sequence above.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-58-1">1</a></span>
<span class="normal"><a href="#__codelineno-58-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-58-1" name="__codelineno-58-1"></a><span class="w">  </span><span class="kd">@inject</span><span class="p">.</span><span class="nx">getter</span><span class="p">(</span><span class="nx">AuthenticationBindings</span><span class="p">.</span><span class="nx">CURRENT_USER</span><span class="p">)</span>
<a id="__codelineno-58-2" name="__codelineno-58-2"></a><span class="w">  </span><span class="k">private</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="nx">getCurrentUser</span><span class="o">:</span><span class="w"> </span><span class="kt">Getter</span><span class="o">&lt;</span><span class="nx">User</span><span class="o">&gt;</span><span class="p">,</span>
</code></pre></div></td></tr></table></div>
<h3 id="instagram-oauth-2">Instagram Oauth 2<a class="headerlink" href="#instagram-oauth-2" title="Permanent link">&para;</a></h3>
<p>In order to use it, run <code>npm install passport-instagram</code>.
First, create a AuthUser model implementing the IAuthUser interface. You can implement the interface in the user model itself. See sample below.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-59-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-59-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-59-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-59-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-59-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-59-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-59-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-59-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-59-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-59-10">10</a></span>
<span class="normal"><a href="#__codelineno-59-11">11</a></span>
<span class="normal"><a href="#__codelineno-59-12">12</a></span>
<span class="normal"><a href="#__codelineno-59-13">13</a></span>
<span class="normal"><a href="#__codelineno-59-14">14</a></span>
<span class="normal"><a href="#__codelineno-59-15">15</a></span>
<span class="normal"><a href="#__codelineno-59-16">16</a></span>
<span class="normal"><a href="#__codelineno-59-17">17</a></span>
<span class="normal"><a href="#__codelineno-59-18">18</a></span>
<span class="normal"><a href="#__codelineno-59-19">19</a></span>
<span class="normal"><a href="#__codelineno-59-20">20</a></span>
<span class="normal"><a href="#__codelineno-59-21">21</a></span>
<span class="normal"><a href="#__codelineno-59-22">22</a></span>
<span class="normal"><a href="#__codelineno-59-23">23</a></span>
<span class="normal"><a href="#__codelineno-59-24">24</a></span>
<span class="normal"><a href="#__codelineno-59-25">25</a></span>
<span class="normal"><a href="#__codelineno-59-26">26</a></span>
<span class="normal"><a href="#__codelineno-59-27">27</a></span>
<span class="normal"><a href="#__codelineno-59-28">28</a></span>
<span class="normal"><a href="#__codelineno-59-29">29</a></span>
<span class="normal"><a href="#__codelineno-59-30">30</a></span>
<span class="normal"><a href="#__codelineno-59-31">31</a></span>
<span class="normal"><a href="#__codelineno-59-32">32</a></span>
<span class="normal"><a href="#__codelineno-59-33">33</a></span>
<span class="normal"><a href="#__codelineno-59-34">34</a></span>
<span class="normal"><a href="#__codelineno-59-35">35</a></span>
<span class="normal"><a href="#__codelineno-59-36">36</a></span>
<span class="normal"><a href="#__codelineno-59-37">37</a></span>
<span class="normal"><a href="#__codelineno-59-38">38</a></span>
<span class="normal"><a href="#__codelineno-59-39">39</a></span>
<span class="normal"><a href="#__codelineno-59-40">40</a></span>
<span class="normal"><a href="#__codelineno-59-41">41</a></span>
<span class="normal"><a href="#__codelineno-59-42">42</a></span>
<span class="normal"><a href="#__codelineno-59-43">43</a></span>
<span class="normal"><a href="#__codelineno-59-44">44</a></span>
<span class="normal"><a href="#__codelineno-59-45">45</a></span>
<span class="normal"><a href="#__codelineno-59-46">46</a></span>
<span class="normal"><a href="#__codelineno-59-47">47</a></span>
<span class="normal"><a href="#__codelineno-59-48">48</a></span>
<span class="normal"><a href="#__codelineno-59-49">49</a></span>
<span class="normal"><a href="#__codelineno-59-50">50</a></span>
<span class="normal"><a href="#__codelineno-59-51">51</a></span>
<span class="normal"><a href="#__codelineno-59-52">52</a></span>
<span class="normal"><a href="#__codelineno-59-53">53</a></span>
<span class="normal"><a href="#__codelineno-59-54">54</a></span>
<span class="normal"><a href="#__codelineno-59-55">55</a></span>
<span class="normal"><a href="#__codelineno-59-56">56</a></span>
<span class="normal"><a href="#__codelineno-59-57">57</a></span>
<span class="normal"><a href="#__codelineno-59-58">58</a></span>
<span class="normal"><a href="#__codelineno-59-59">59</a></span>
<span class="normal"><a href="#__codelineno-59-60">60</a></span>
<span class="normal"><a href="#__codelineno-59-61">61</a></span>
<span class="normal"><a href="#__codelineno-59-62">62</a></span>
<span class="normal"><a href="#__codelineno-59-63">63</a></span>
<span class="normal"><a href="#__codelineno-59-64">64</a></span>
<span class="normal"><a href="#__codelineno-59-65">65</a></span>
<span class="normal"><a href="#__codelineno-59-66">66</a></span>
<span class="normal"><a href="#__codelineno-59-67">67</a></span>
<span class="normal"><a href="#__codelineno-59-68">68</a></span>
<span class="normal"><a href="#__codelineno-59-69">69</a></span>
<span class="normal"><a href="#__codelineno-59-70">70</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-59-1" name="__codelineno-59-1"></a><span class="kd">@model</span><span class="p">({</span>
<a id="__codelineno-59-2" name="__codelineno-59-2"></a><span class="w">  </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;users&#39;</span><span class="p">,</span>
<a id="__codelineno-59-3" name="__codelineno-59-3"></a><span class="p">})</span>
<a id="__codelineno-59-4" name="__codelineno-59-4"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">User</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">Entity</span><span class="w"> </span><span class="k">implements</span><span class="w"> </span><span class="nx">IAuthUser</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-59-5" name="__codelineno-59-5"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-59-6" name="__codelineno-59-6"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;number&#39;</span><span class="p">,</span>
<a id="__codelineno-59-7" name="__codelineno-59-7"></a><span class="w">    </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<a id="__codelineno-59-8" name="__codelineno-59-8"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-59-9" name="__codelineno-59-9"></a><span class="w">  </span><span class="nx">id?</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">;</span>
<a id="__codelineno-59-10" name="__codelineno-59-10"></a>
<a id="__codelineno-59-11" name="__codelineno-59-11"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-59-12" name="__codelineno-59-12"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-59-13" name="__codelineno-59-13"></a><span class="w">    </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<a id="__codelineno-59-14" name="__codelineno-59-14"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;first_name&#39;</span><span class="p">,</span>
<a id="__codelineno-59-15" name="__codelineno-59-15"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-59-16" name="__codelineno-59-16"></a><span class="w">  </span><span class="nx">firstName</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-59-17" name="__codelineno-59-17"></a>
<a id="__codelineno-59-18" name="__codelineno-59-18"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-59-19" name="__codelineno-59-19"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-59-20" name="__codelineno-59-20"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;last_name&#39;</span><span class="p">,</span>
<a id="__codelineno-59-21" name="__codelineno-59-21"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-59-22" name="__codelineno-59-22"></a><span class="w">  </span><span class="nx">lastName</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-59-23" name="__codelineno-59-23"></a>
<a id="__codelineno-59-24" name="__codelineno-59-24"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-59-25" name="__codelineno-59-25"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-59-26" name="__codelineno-59-26"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;middle_name&#39;</span><span class="p">,</span>
<a id="__codelineno-59-27" name="__codelineno-59-27"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-59-28" name="__codelineno-59-28"></a><span class="w">  </span><span class="nx">middleName?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-59-29" name="__codelineno-59-29"></a>
<a id="__codelineno-59-30" name="__codelineno-59-30"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-59-31" name="__codelineno-59-31"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-59-32" name="__codelineno-59-32"></a><span class="w">    </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<a id="__codelineno-59-33" name="__codelineno-59-33"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-59-34" name="__codelineno-59-34"></a><span class="w">  </span><span class="nx">username</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-59-35" name="__codelineno-59-35"></a>
<a id="__codelineno-59-36" name="__codelineno-59-36"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-59-37" name="__codelineno-59-37"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-59-38" name="__codelineno-59-38"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-59-39" name="__codelineno-59-39"></a><span class="w">  </span><span class="nx">email?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-59-40" name="__codelineno-59-40"></a>
<a id="__codelineno-59-41" name="__codelineno-59-41"></a><span class="w">  </span><span class="c1">// Auth provider - &#39;instagram&#39;</span>
<a id="__codelineno-59-42" name="__codelineno-59-42"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-59-43" name="__codelineno-59-43"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-59-44" name="__codelineno-59-44"></a><span class="w">    </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<a id="__codelineno-59-45" name="__codelineno-59-45"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;auth_provider&#39;</span><span class="p">,</span>
<a id="__codelineno-59-46" name="__codelineno-59-46"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-59-47" name="__codelineno-59-47"></a><span class="w">  </span><span class="nx">authProvider</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-59-48" name="__codelineno-59-48"></a>
<a id="__codelineno-59-49" name="__codelineno-59-49"></a><span class="w">  </span><span class="c1">// Id from external provider</span>
<a id="__codelineno-59-50" name="__codelineno-59-50"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-59-51" name="__codelineno-59-51"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-59-52" name="__codelineno-59-52"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;auth_id&#39;</span><span class="p">,</span>
<a id="__codelineno-59-53" name="__codelineno-59-53"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-59-54" name="__codelineno-59-54"></a><span class="w">  </span><span class="nx">authId?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-59-55" name="__codelineno-59-55"></a>
<a id="__codelineno-59-56" name="__codelineno-59-56"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-59-57" name="__codelineno-59-57"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-59-58" name="__codelineno-59-58"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;auth_token&#39;</span><span class="p">,</span>
<a id="__codelineno-59-59" name="__codelineno-59-59"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-59-60" name="__codelineno-59-60"></a><span class="w">  </span><span class="nx">authToken?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-59-61" name="__codelineno-59-61"></a>
<a id="__codelineno-59-62" name="__codelineno-59-62"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-59-63" name="__codelineno-59-63"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-59-64" name="__codelineno-59-64"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-59-65" name="__codelineno-59-65"></a><span class="w">  </span><span class="nx">password?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-59-66" name="__codelineno-59-66"></a>
<a id="__codelineno-59-67" name="__codelineno-59-67"></a><span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">data?</span><span class="o">:</span><span class="w"> </span><span class="kt">Partial</span><span class="o">&lt;</span><span class="nx">User</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-59-68" name="__codelineno-59-68"></a><span class="w">    </span><span class="k">super</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<a id="__codelineno-59-69" name="__codelineno-59-69"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-59-70" name="__codelineno-59-70"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Now bind this model to USER_MODEL key in application.ts</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-60-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-60-1" name="__codelineno-60-1"></a><span class="k">this</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">AuthenticationBindings</span><span class="p">.</span><span class="nx">USER_MODEL</span><span class="p">).</span><span class="nx">to</span><span class="p">(</span><span class="nx">User</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>Create CRUD repository for the above model. Use loopback CLI.</p>
<div class="language-sh highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-61-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-61-1" name="__codelineno-61-1"></a>lb4<span class="w"> </span>repository
</code></pre></div></td></tr></table></div>
<p>Add the verifier function for the strategy. You need to create a provider for the same. You can add your application specific business logic for client auth here. Here is a simple example.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-62-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-62-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-62-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-62-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-62-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-62-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-62-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-62-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-62-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-62-10">10</a></span>
<span class="normal"><a href="#__codelineno-62-11">11</a></span>
<span class="normal"><a href="#__codelineno-62-12">12</a></span>
<span class="normal"><a href="#__codelineno-62-13">13</a></span>
<span class="normal"><a href="#__codelineno-62-14">14</a></span>
<span class="normal"><a href="#__codelineno-62-15">15</a></span>
<span class="normal"><a href="#__codelineno-62-16">16</a></span>
<span class="normal"><a href="#__codelineno-62-17">17</a></span>
<span class="normal"><a href="#__codelineno-62-18">18</a></span>
<span class="normal"><a href="#__codelineno-62-19">19</a></span>
<span class="normal"><a href="#__codelineno-62-20">20</a></span>
<span class="normal"><a href="#__codelineno-62-21">21</a></span>
<span class="normal"><a href="#__codelineno-62-22">22</a></span>
<span class="normal"><a href="#__codelineno-62-23">23</a></span>
<span class="normal"><a href="#__codelineno-62-24">24</a></span>
<span class="normal"><a href="#__codelineno-62-25">25</a></span>
<span class="normal"><a href="#__codelineno-62-26">26</a></span>
<span class="normal"><a href="#__codelineno-62-27">27</a></span>
<span class="normal"><a href="#__codelineno-62-28">28</a></span>
<span class="normal"><a href="#__codelineno-62-29">29</a></span>
<span class="normal"><a href="#__codelineno-62-30">30</a></span>
<span class="normal"><a href="#__codelineno-62-31">31</a></span>
<span class="normal"><a href="#__codelineno-62-32">32</a></span>
<span class="normal"><a href="#__codelineno-62-33">33</a></span>
<span class="normal"><a href="#__codelineno-62-34">34</a></span>
<span class="normal"><a href="#__codelineno-62-35">35</a></span>
<span class="normal"><a href="#__codelineno-62-36">36</a></span>
<span class="normal"><a href="#__codelineno-62-37">37</a></span>
<span class="normal"><a href="#__codelineno-62-38">38</a></span>
<span class="normal"><a href="#__codelineno-62-39">39</a></span>
<span class="normal"><a href="#__codelineno-62-40">40</a></span>
<span class="normal"><a href="#__codelineno-62-41">41</a></span>
<span class="normal"><a href="#__codelineno-62-42">42</a></span>
<span class="normal"><a href="#__codelineno-62-43">43</a></span>
<span class="normal"><a href="#__codelineno-62-44">44</a></span>
<span class="normal"><a href="#__codelineno-62-45">45</a></span>
<span class="normal"><a href="#__codelineno-62-46">46</a></span>
<span class="normal"><a href="#__codelineno-62-47">47</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-62-1" name="__codelineno-62-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">Provider</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@loopback/context&#39;</span><span class="p">;</span>
<a id="__codelineno-62-2" name="__codelineno-62-2"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">repository</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@loopback/repository&#39;</span><span class="p">;</span>
<a id="__codelineno-62-3" name="__codelineno-62-3"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">HttpErrors</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@loopback/rest&#39;</span><span class="p">;</span>
<a id="__codelineno-62-4" name="__codelineno-62-4"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">AuthErrorKeys</span><span class="p">,</span><span class="w"> </span><span class="nx">VerifyFunction</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;loopback4-authentication&#39;</span><span class="p">;</span>
<a id="__codelineno-62-5" name="__codelineno-62-5"></a>
<a id="__codelineno-62-6" name="__codelineno-62-6"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">Tenant</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../../../models&#39;</span><span class="p">;</span>
<a id="__codelineno-62-7" name="__codelineno-62-7"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">UserCredentialsRepository</span><span class="p">,</span><span class="w"> </span><span class="nx">UserRepository</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../../../repositories&#39;</span><span class="p">;</span>
<a id="__codelineno-62-8" name="__codelineno-62-8"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">AuthUser</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../models/auth-user.model&#39;</span><span class="p">;</span>
<a id="__codelineno-62-9" name="__codelineno-62-9"></a>
<a id="__codelineno-62-10" name="__codelineno-62-10"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">InstagramOauth2VerifyProvider</span>
<a id="__codelineno-62-11" name="__codelineno-62-11"></a><span class="w">  </span><span class="k">implements</span><span class="w"> </span><span class="nx">Provider</span><span class="o">&lt;</span><span class="nx">VerifyFunction</span><span class="p">.</span><span class="nx">InstagramAuthFn</span><span class="o">&gt;</span>
<a id="__codelineno-62-12" name="__codelineno-62-12"></a><span class="p">{</span>
<a id="__codelineno-62-13" name="__codelineno-62-13"></a><span class="w">  </span><span class="kr">constructor</span><span class="p">(</span>
<a id="__codelineno-62-14" name="__codelineno-62-14"></a><span class="w">    </span><span class="kd">@repository</span><span class="p">(</span><span class="nx">UserRepository</span><span class="p">)</span>
<a id="__codelineno-62-15" name="__codelineno-62-15"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nx">userRepository</span><span class="o">:</span><span class="w"> </span><span class="kt">UserRepository</span><span class="p">,</span>
<a id="__codelineno-62-16" name="__codelineno-62-16"></a><span class="w">    </span><span class="kd">@repository</span><span class="p">(</span><span class="nx">UserCredentialsRepository</span><span class="p">)</span>
<a id="__codelineno-62-17" name="__codelineno-62-17"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nx">userCredsRepository</span><span class="o">:</span><span class="w"> </span><span class="kt">UserCredentialsRepository</span><span class="p">,</span>
<a id="__codelineno-62-18" name="__codelineno-62-18"></a><span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-62-19" name="__codelineno-62-19"></a>
<a id="__codelineno-62-20" name="__codelineno-62-20"></a><span class="w">  </span><span class="nx">value</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">VerifyFunction</span><span class="p">.</span><span class="nx">InstagramAuthFn</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-62-21" name="__codelineno-62-21"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">(</span><span class="nx">accessToken</span><span class="p">,</span><span class="w"> </span><span class="nx">refreshToken</span><span class="p">,</span><span class="w"> </span><span class="nx">profile</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-62-22" name="__codelineno-62-22"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">userRepository</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span>
<a id="__codelineno-62-23" name="__codelineno-62-23"></a><span class="w">        </span><span class="nx">where</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-62-24" name="__codelineno-62-24"></a><span class="w">          </span><span class="cm">/* eslint-disable-next-line @typescript-eslint/no-explicit-any */</span>
<a id="__codelineno-62-25" name="__codelineno-62-25"></a><span class="w">          </span><span class="nx">email</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">profile</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">any</span><span class="p">).</span><span class="nx">_json</span><span class="p">.</span><span class="nx">email</span><span class="p">,</span>
<a id="__codelineno-62-26" name="__codelineno-62-26"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-62-27" name="__codelineno-62-27"></a><span class="w">      </span><span class="p">});</span>
<a id="__codelineno-62-28" name="__codelineno-62-28"></a><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">user</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-62-29" name="__codelineno-62-29"></a><span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">HttpErrors</span><span class="p">.</span><span class="nx">Unauthorized</span><span class="p">(</span><span class="nx">AuthErrorKeys</span><span class="p">.</span><span class="nx">InvalidCredentials</span><span class="p">);</span>
<a id="__codelineno-62-30" name="__codelineno-62-30"></a><span class="w">      </span><span class="p">}</span>
<a id="__codelineno-62-31" name="__codelineno-62-31"></a><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-62-32" name="__codelineno-62-32"></a><span class="w">        </span><span class="o">!</span><span class="nx">user</span><span class="w"> </span><span class="o">||</span>
<a id="__codelineno-62-33" name="__codelineno-62-33"></a><span class="w">        </span><span class="nx">user</span><span class="p">.</span><span class="nx">authProvider</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="s1">&#39;instagram&#39;</span><span class="w"> </span><span class="o">||</span>
<a id="__codelineno-62-34" name="__codelineno-62-34"></a><span class="w">        </span><span class="nx">user</span><span class="p">.</span><span class="nx">authId</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="nx">profile</span><span class="p">.</span><span class="nx">id</span>
<a id="__codelineno-62-35" name="__codelineno-62-35"></a><span class="w">      </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-62-36" name="__codelineno-62-36"></a><span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">HttpErrors</span><span class="p">.</span><span class="nx">Unauthorized</span><span class="p">(</span><span class="nx">AuthErrorKeys</span><span class="p">.</span><span class="nx">InvalidCredentials</span><span class="p">);</span>
<a id="__codelineno-62-37" name="__codelineno-62-37"></a><span class="w">      </span><span class="p">}</span>
<a id="__codelineno-62-38" name="__codelineno-62-38"></a>
<a id="__codelineno-62-39" name="__codelineno-62-39"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">authUser</span><span class="o">:</span><span class="w"> </span><span class="kt">AuthUser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">AuthUser</span><span class="p">(</span><span class="nx">user</span><span class="p">);</span>
<a id="__codelineno-62-40" name="__codelineno-62-40"></a><span class="w">      </span><span class="nx">authUser</span><span class="p">.</span><span class="nx">permissions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
<a id="__codelineno-62-41" name="__codelineno-62-41"></a><span class="w">      </span><span class="nx">authUser</span><span class="p">.</span><span class="nx">externalAuthToken</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">accessToken</span><span class="p">;</span>
<a id="__codelineno-62-42" name="__codelineno-62-42"></a><span class="w">      </span><span class="nx">authUser</span><span class="p">.</span><span class="nx">externalRefreshToken</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">refreshToken</span><span class="p">;</span>
<a id="__codelineno-62-43" name="__codelineno-62-43"></a><span class="w">      </span><span class="nx">authUser</span><span class="p">.</span><span class="nx">tenant</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Tenant</span><span class="p">({</span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="kt">user.defaultTenant</span><span class="p">});</span>
<a id="__codelineno-62-44" name="__codelineno-62-44"></a><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="nx">authUser</span><span class="p">;</span>
<a id="__codelineno-62-45" name="__codelineno-62-45"></a><span class="w">    </span><span class="p">};</span>
<a id="__codelineno-62-46" name="__codelineno-62-46"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-62-47" name="__codelineno-62-47"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Please note the Verify function type <em>VerifyFunction.LocalPasswordFn</em></p>
<p>Now bind this provider to the application in application.ts.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-63-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-63-1" name="__codelineno-63-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">AuthenticationComponent</span><span class="p">,</span><span class="w"> </span><span class="nx">Strategies</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;loopback4-authentication&#39;</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-64-1">1</a></span>
<span class="normal"><a href="#__codelineno-64-2">2</a></span>
<span class="normal"><a href="#__codelineno-64-3">3</a></span>
<span class="normal"><a href="#__codelineno-64-4">4</a></span>
<span class="normal"><a href="#__codelineno-64-5">5</a></span>
<span class="normal"><a href="#__codelineno-64-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-64-1" name="__codelineno-64-1"></a><span class="c1">// Add authentication component</span>
<a id="__codelineno-64-2" name="__codelineno-64-2"></a><span class="k">this</span><span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="nx">AuthenticationComponent</span><span class="p">);</span>
<a id="__codelineno-64-3" name="__codelineno-64-3"></a><span class="c1">// Customize authentication verify handlers</span>
<a id="__codelineno-64-4" name="__codelineno-64-4"></a><span class="k">this</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">Strategies</span><span class="p">.</span><span class="nx">Passport</span><span class="p">.</span><span class="nx">INSTAGRAM_OAUTH2_VERIFIER</span><span class="p">).</span><span class="nx">toProvider</span><span class="p">(</span>
<a id="__codelineno-64-5" name="__codelineno-64-5"></a><span class="w">  </span><span class="nx">InstagramOauth2VerifyProvider</span><span class="p">,</span>
<a id="__codelineno-64-6" name="__codelineno-64-6"></a><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>Finally, add the authenticate function as a sequence action to sequence.ts.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-65-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-65-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-65-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-65-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-65-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-65-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-65-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-65-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-65-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-65-10">10</a></span>
<span class="normal"><a href="#__codelineno-65-11">11</a></span>
<span class="normal"><a href="#__codelineno-65-12">12</a></span>
<span class="normal"><a href="#__codelineno-65-13">13</a></span>
<span class="normal"><a href="#__codelineno-65-14">14</a></span>
<span class="normal"><a href="#__codelineno-65-15">15</a></span>
<span class="normal"><a href="#__codelineno-65-16">16</a></span>
<span class="normal"><a href="#__codelineno-65-17">17</a></span>
<span class="normal"><a href="#__codelineno-65-18">18</a></span>
<span class="normal"><a href="#__codelineno-65-19">19</a></span>
<span class="normal"><a href="#__codelineno-65-20">20</a></span>
<span class="normal"><a href="#__codelineno-65-21">21</a></span>
<span class="normal"><a href="#__codelineno-65-22">22</a></span>
<span class="normal"><a href="#__codelineno-65-23">23</a></span>
<span class="normal"><a href="#__codelineno-65-24">24</a></span>
<span class="normal"><a href="#__codelineno-65-25">25</a></span>
<span class="normal"><a href="#__codelineno-65-26">26</a></span>
<span class="normal"><a href="#__codelineno-65-27">27</a></span>
<span class="normal"><a href="#__codelineno-65-28">28</a></span>
<span class="normal"><a href="#__codelineno-65-29">29</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-65-1" name="__codelineno-65-1"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">MySequence</span><span class="w"> </span><span class="k">implements</span><span class="w"> </span><span class="nx">SequenceHandler</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-65-2" name="__codelineno-65-2"></a><span class="w">  </span><span class="kr">constructor</span><span class="p">(</span>
<a id="__codelineno-65-3" name="__codelineno-65-3"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">FIND_ROUTE</span><span class="p">)</span><span class="w"> </span><span class="k">protected</span><span class="w"> </span><span class="nx">findRoute</span><span class="o">:</span><span class="w"> </span><span class="kt">FindRoute</span><span class="p">,</span>
<a id="__codelineno-65-4" name="__codelineno-65-4"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">PARSE_PARAMS</span><span class="p">)</span><span class="w"> </span><span class="k">protected</span><span class="w"> </span><span class="nx">parseParams</span><span class="o">:</span><span class="w"> </span><span class="kt">ParseParams</span><span class="p">,</span>
<a id="__codelineno-65-5" name="__codelineno-65-5"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">INVOKE_METHOD</span><span class="p">)</span><span class="w"> </span><span class="k">protected</span><span class="w"> </span><span class="nx">invoke</span><span class="o">:</span><span class="w"> </span><span class="kt">InvokeMethod</span><span class="p">,</span>
<a id="__codelineno-65-6" name="__codelineno-65-6"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">SEND</span><span class="p">)</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="nx">send</span><span class="o">:</span><span class="w"> </span><span class="kt">Send</span><span class="p">,</span>
<a id="__codelineno-65-7" name="__codelineno-65-7"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">REJECT</span><span class="p">)</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="nx">reject</span><span class="o">:</span><span class="w"> </span><span class="kt">Reject</span><span class="p">,</span>
<a id="__codelineno-65-8" name="__codelineno-65-8"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">AuthenticationBindings</span><span class="p">.</span><span class="nx">USER_AUTH_ACTION</span><span class="p">)</span>
<a id="__codelineno-65-9" name="__codelineno-65-9"></a><span class="w">    </span><span class="k">protected</span><span class="w"> </span><span class="nx">authenticateRequest</span><span class="o">:</span><span class="w"> </span><span class="kt">AuthenticateFn</span><span class="o">&lt;</span><span class="nx">AuthUser</span><span class="o">&gt;</span><span class="p">,</span>
<a id="__codelineno-65-10" name="__codelineno-65-10"></a><span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-65-11" name="__codelineno-65-11"></a>
<a id="__codelineno-65-12" name="__codelineno-65-12"></a><span class="w">  </span><span class="k">async</span><span class="w"> </span><span class="nx">handle</span><span class="p">(</span><span class="nx">context</span><span class="o">:</span><span class="w"> </span><span class="kt">RequestContext</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-65-13" name="__codelineno-65-13"></a><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-65-14" name="__codelineno-65-14"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="nx">request</span><span class="p">,</span><span class="w"> </span><span class="nx">response</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">context</span><span class="p">;</span>
<a id="__codelineno-65-15" name="__codelineno-65-15"></a>
<a id="__codelineno-65-16" name="__codelineno-65-16"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">route</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">findRoute</span><span class="p">(</span><span class="nx">request</span><span class="p">);</span>
<a id="__codelineno-65-17" name="__codelineno-65-17"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">parseParams</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span><span class="w"> </span><span class="nx">route</span><span class="p">);</span>
<a id="__codelineno-65-18" name="__codelineno-65-18"></a><span class="w">      </span><span class="nx">request</span><span class="p">.</span><span class="nx">body</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">args</span><span class="p">[</span><span class="nx">args</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">];</span>
<a id="__codelineno-65-19" name="__codelineno-65-19"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">authUser</span><span class="o">:</span><span class="w"> </span><span class="kt">AuthUser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">authenticateRequest</span><span class="p">(</span>
<a id="__codelineno-65-20" name="__codelineno-65-20"></a><span class="w">        </span><span class="nx">request</span><span class="p">,</span>
<a id="__codelineno-65-21" name="__codelineno-65-21"></a><span class="w">        </span><span class="nx">response</span><span class="p">,</span>
<a id="__codelineno-65-22" name="__codelineno-65-22"></a><span class="w">      </span><span class="p">);</span>
<a id="__codelineno-65-23" name="__codelineno-65-23"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">invoke</span><span class="p">(</span><span class="nx">route</span><span class="p">,</span><span class="w"> </span><span class="nx">args</span><span class="p">);</span>
<a id="__codelineno-65-24" name="__codelineno-65-24"></a><span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">response</span><span class="p">,</span><span class="w"> </span><span class="nx">result</span><span class="p">);</span>
<a id="__codelineno-65-25" name="__codelineno-65-25"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-65-26" name="__codelineno-65-26"></a><span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">reject</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">);</span>
<a id="__codelineno-65-27" name="__codelineno-65-27"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-65-28" name="__codelineno-65-28"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-65-29" name="__codelineno-65-29"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>After this, you can use decorator to apply auth to controller functions wherever needed. See below.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-66-1">  1</a></span>
<span class="normal"><a href="#__codelineno-66-2">  2</a></span>
<span class="normal"><a href="#__codelineno-66-3">  3</a></span>
<span class="normal"><a href="#__codelineno-66-4">  4</a></span>
<span class="normal"><a href="#__codelineno-66-5">  5</a></span>
<span class="normal"><a href="#__codelineno-66-6">  6</a></span>
<span class="normal"><a href="#__codelineno-66-7">  7</a></span>
<span class="normal"><a href="#__codelineno-66-8">  8</a></span>
<span class="normal"><a href="#__codelineno-66-9">  9</a></span>
<span class="normal"><a href="#__codelineno-66-10"> 10</a></span>
<span class="normal"><a href="#__codelineno-66-11"> 11</a></span>
<span class="normal"><a href="#__codelineno-66-12"> 12</a></span>
<span class="normal"><a href="#__codelineno-66-13"> 13</a></span>
<span class="normal"><a href="#__codelineno-66-14"> 14</a></span>
<span class="normal"><a href="#__codelineno-66-15"> 15</a></span>
<span class="normal"><a href="#__codelineno-66-16"> 16</a></span>
<span class="normal"><a href="#__codelineno-66-17"> 17</a></span>
<span class="normal"><a href="#__codelineno-66-18"> 18</a></span>
<span class="normal"><a href="#__codelineno-66-19"> 19</a></span>
<span class="normal"><a href="#__codelineno-66-20"> 20</a></span>
<span class="normal"><a href="#__codelineno-66-21"> 21</a></span>
<span class="normal"><a href="#__codelineno-66-22"> 22</a></span>
<span class="normal"><a href="#__codelineno-66-23"> 23</a></span>
<span class="normal"><a href="#__codelineno-66-24"> 24</a></span>
<span class="normal"><a href="#__codelineno-66-25"> 25</a></span>
<span class="normal"><a href="#__codelineno-66-26"> 26</a></span>
<span class="normal"><a href="#__codelineno-66-27"> 27</a></span>
<span class="normal"><a href="#__codelineno-66-28"> 28</a></span>
<span class="normal"><a href="#__codelineno-66-29"> 29</a></span>
<span class="normal"><a href="#__codelineno-66-30"> 30</a></span>
<span class="normal"><a href="#__codelineno-66-31"> 31</a></span>
<span class="normal"><a href="#__codelineno-66-32"> 32</a></span>
<span class="normal"><a href="#__codelineno-66-33"> 33</a></span>
<span class="normal"><a href="#__codelineno-66-34"> 34</a></span>
<span class="normal"><a href="#__codelineno-66-35"> 35</a></span>
<span class="normal"><a href="#__codelineno-66-36"> 36</a></span>
<span class="normal"><a href="#__codelineno-66-37"> 37</a></span>
<span class="normal"><a href="#__codelineno-66-38"> 38</a></span>
<span class="normal"><a href="#__codelineno-66-39"> 39</a></span>
<span class="normal"><a href="#__codelineno-66-40"> 40</a></span>
<span class="normal"><a href="#__codelineno-66-41"> 41</a></span>
<span class="normal"><a href="#__codelineno-66-42"> 42</a></span>
<span class="normal"><a href="#__codelineno-66-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-66-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-66-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-66-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-66-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-66-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-66-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-66-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-66-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-66-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-66-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-66-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-66-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-66-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-66-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-66-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-66-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-66-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-66-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-66-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-66-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-66-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-66-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-66-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-66-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-66-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-66-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-66-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-66-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-66-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-66-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-66-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-66-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-66-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-66-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-66-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-66-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-66-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-66-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-66-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-66-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-66-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-66-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-66-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-66-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-66-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-66-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-66-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-66-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-66-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-66-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-66-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-66-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-66-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-66-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-66-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-66-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-66-100">100</a></span>
<span class="normal"><a href="#__codelineno-66-101">101</a></span>
<span class="normal"><a href="#__codelineno-66-102">102</a></span>
<span class="normal"><a href="#__codelineno-66-103">103</a></span>
<span class="normal"><a href="#__codelineno-66-104">104</a></span>
<span class="normal"><a href="#__codelineno-66-105">105</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-66-1" name="__codelineno-66-1"></a><span class="kd">@authenticateClient</span><span class="p">(</span><span class="nx">STRATEGY</span><span class="p">.</span><span class="nx">CLIENT_PASSWORD</span><span class="p">)</span>
<a id="__codelineno-66-2" name="__codelineno-66-2"></a><span class="w">  </span><span class="kd">@authenticate</span><span class="p">(</span>
<a id="__codelineno-66-3" name="__codelineno-66-3"></a><span class="w">    </span><span class="nx">STRATEGY</span><span class="p">.</span><span class="nx">INSTAGRAM_OAUTH2</span><span class="p">,</span>
<a id="__codelineno-66-4" name="__codelineno-66-4"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-66-5" name="__codelineno-66-5"></a><span class="w">      </span><span class="nx">accessType</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;offline&#39;</span><span class="p">,</span>
<a id="__codelineno-66-6" name="__codelineno-66-6"></a><span class="w">      </span><span class="nx">authorizationURL</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.INSTAGRAM_AUTH_URL</span><span class="p">,</span>
<a id="__codelineno-66-7" name="__codelineno-66-7"></a><span class="w">      </span><span class="nx">callbackURL</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.INSTAGRAM_AUTH_CALLBACK_URL</span><span class="p">,</span>
<a id="__codelineno-66-8" name="__codelineno-66-8"></a><span class="w">      </span><span class="nx">clientID</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.INSTAGRAM_AUTH_CLIENT_ID</span><span class="p">,</span>
<a id="__codelineno-66-9" name="__codelineno-66-9"></a><span class="w">      </span><span class="nx">clientSecret</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.INSTAGRAM_AUTH_CLIENT_SECRET</span><span class="p">,</span>
<a id="__codelineno-66-10" name="__codelineno-66-10"></a><span class="w">      </span><span class="nx">tokenURL</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.INSTAGRAM_AUTH_TOKEN_URL</span><span class="p">,</span>
<a id="__codelineno-66-11" name="__codelineno-66-11"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-66-12" name="__codelineno-66-12"></a><span class="w">    </span><span class="p">(</span><span class="nx">req</span><span class="o">:</span><span class="w"> </span><span class="kt">Request</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-66-13" name="__codelineno-66-13"></a><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-66-14" name="__codelineno-66-14"></a><span class="w">        </span><span class="nx">accessType</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;offline&#39;</span><span class="p">,</span>
<a id="__codelineno-66-15" name="__codelineno-66-15"></a><span class="w">        </span><span class="nx">state</span><span class="o">:</span><span class="w"> </span><span class="kt">Object.keys</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">)</span>
<a id="__codelineno-66-16" name="__codelineno-66-16"></a><span class="w">          </span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">key</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">key</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">&#39;=&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">[</span><span class="nx">key</span><span class="p">])</span>
<a id="__codelineno-66-17" name="__codelineno-66-17"></a><span class="w">          </span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;&amp;&#39;</span><span class="p">),</span>
<a id="__codelineno-66-18" name="__codelineno-66-18"></a><span class="w">      </span><span class="p">};</span>
<a id="__codelineno-66-19" name="__codelineno-66-19"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-66-20" name="__codelineno-66-20"></a><span class="w">  </span><span class="p">)</span>
<a id="__codelineno-66-21" name="__codelineno-66-21"></a><span class="w">  </span><span class="kd">@authorize</span><span class="p">([</span><span class="s1">&#39;*&#39;</span><span class="p">])</span>
<a id="__codelineno-66-22" name="__codelineno-66-22"></a><span class="w">  </span><span class="kd">@get</span><span class="p">(</span><span class="s1">&#39;/auth/instagram&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-66-23" name="__codelineno-66-23"></a><span class="w">    </span><span class="nx">responses</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-66-24" name="__codelineno-66-24"></a><span class="w">      </span><span class="p">[</span><span class="nx">STATUS_CODE</span><span class="p">.</span><span class="nx">OK</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-66-25" name="__codelineno-66-25"></a><span class="w">        </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Token Response&#39;</span><span class="p">,</span>
<a id="__codelineno-66-26" name="__codelineno-66-26"></a><span class="w">        </span><span class="nx">content</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-66-27" name="__codelineno-66-27"></a><span class="w">          </span><span class="p">[</span><span class="nx">CONTENT_TYPE</span><span class="p">.</span><span class="nb">JSON</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-66-28" name="__codelineno-66-28"></a><span class="w">            </span><span class="nx">schema</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="s1">&#39;x-ts-type&#39;</span><span class="o">:</span><span class="w"> </span><span class="nx">TokenResponse</span><span class="p">},</span>
<a id="__codelineno-66-29" name="__codelineno-66-29"></a><span class="w">          </span><span class="p">},</span>
<a id="__codelineno-66-30" name="__codelineno-66-30"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-66-31" name="__codelineno-66-31"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-66-32" name="__codelineno-66-32"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-66-33" name="__codelineno-66-33"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-66-34" name="__codelineno-66-34"></a><span class="w">  </span><span class="k">async</span><span class="w"> </span><span class="nx">loginViaInstagram</span><span class="p">(</span>
<a id="__codelineno-66-35" name="__codelineno-66-35"></a><span class="w">    </span><span class="kd">@param</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="kt">string</span><span class="p">(</span><span class="s1">&#39;client_id&#39;</span><span class="p">)</span>
<a id="__codelineno-66-36" name="__codelineno-66-36"></a><span class="w">    </span><span class="nx">clientId?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span>
<a id="__codelineno-66-37" name="__codelineno-66-37"></a><span class="w">    </span><span class="kd">@param</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="kt">string</span><span class="p">(</span><span class="s1">&#39;client_secret&#39;</span><span class="p">)</span>
<a id="__codelineno-66-38" name="__codelineno-66-38"></a><span class="w">    </span><span class="nx">clientSecret?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span>
<a id="__codelineno-66-39" name="__codelineno-66-39"></a><span class="w">  </span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nb">Promise</span><span class="o">&lt;</span><span class="ow">void</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-66-40" name="__codelineno-66-40"></a>
<a id="__codelineno-66-41" name="__codelineno-66-41"></a><span class="w">  </span><span class="kd">@authenticate</span><span class="p">(</span>
<a id="__codelineno-66-42" name="__codelineno-66-42"></a><span class="w">    </span><span class="nx">STRATEGY</span><span class="p">.</span><span class="nx">INSTAGRAM_OAUTH2</span><span class="p">,</span>
<a id="__codelineno-66-43" name="__codelineno-66-43"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-66-44" name="__codelineno-66-44"></a><span class="w">      </span><span class="nx">accessType</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;offline&#39;</span><span class="p">,</span>
<a id="__codelineno-66-45" name="__codelineno-66-45"></a><span class="w">      </span><span class="nx">authorizationURL</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.INSTAGRAM_AUTH_URL</span><span class="p">,</span>
<a id="__codelineno-66-46" name="__codelineno-66-46"></a><span class="w">      </span><span class="nx">callbackURL</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.INSTAGRAM_AUTH_CALLBACK_URL</span><span class="p">,</span>
<a id="__codelineno-66-47" name="__codelineno-66-47"></a><span class="w">      </span><span class="nx">clientID</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.INSTAGRAM_AUTH_CLIENT_ID</span><span class="p">,</span>
<a id="__codelineno-66-48" name="__codelineno-66-48"></a><span class="w">      </span><span class="nx">clientSecret</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.INSTAGRAM_AUTH_CLIENT_SECRET</span><span class="p">,</span>
<a id="__codelineno-66-49" name="__codelineno-66-49"></a><span class="w">      </span><span class="nx">tokenURL</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.INSTAGRAM_AUTH_TOKEN_URL</span><span class="p">,</span>
<a id="__codelineno-66-50" name="__codelineno-66-50"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-66-51" name="__codelineno-66-51"></a><span class="w">    </span><span class="p">(</span><span class="nx">req</span><span class="o">:</span><span class="w"> </span><span class="kt">Request</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-66-52" name="__codelineno-66-52"></a><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-66-53" name="__codelineno-66-53"></a><span class="w">        </span><span class="nx">accessType</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;offline&#39;</span><span class="p">,</span>
<a id="__codelineno-66-54" name="__codelineno-66-54"></a><span class="w">        </span><span class="nx">state</span><span class="o">:</span><span class="w"> </span><span class="kt">Object.keys</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">)</span>
<a id="__codelineno-66-55" name="__codelineno-66-55"></a><span class="w">          </span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">key</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="sb">`</span><span class="si">${</span><span class="nx">key</span><span class="si">}</span><span class="sb">=</span><span class="si">${</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
<a id="__codelineno-66-56" name="__codelineno-66-56"></a><span class="w">          </span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;&amp;&#39;</span><span class="p">),</span>
<a id="__codelineno-66-57" name="__codelineno-66-57"></a><span class="w">      </span><span class="p">};</span>
<a id="__codelineno-66-58" name="__codelineno-66-58"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-66-59" name="__codelineno-66-59"></a><span class="w">  </span><span class="p">)</span>
<a id="__codelineno-66-60" name="__codelineno-66-60"></a><span class="w">  </span><span class="kd">@authorize</span><span class="p">([</span><span class="s1">&#39;*&#39;</span><span class="p">])</span>
<a id="__codelineno-66-61" name="__codelineno-66-61"></a><span class="w">  </span><span class="kd">@get</span><span class="p">(</span><span class="s1">&#39;/auth/instagram-auth-redirect&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-66-62" name="__codelineno-66-62"></a><span class="w">    </span><span class="nx">responses</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-66-63" name="__codelineno-66-63"></a><span class="w">      </span><span class="p">[</span><span class="nx">STATUS_CODE</span><span class="p">.</span><span class="nx">OK</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-66-64" name="__codelineno-66-64"></a><span class="w">        </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Token Response&#39;</span><span class="p">,</span>
<a id="__codelineno-66-65" name="__codelineno-66-65"></a><span class="w">        </span><span class="nx">content</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-66-66" name="__codelineno-66-66"></a><span class="w">          </span><span class="p">[</span><span class="nx">CONTENT_TYPE</span><span class="p">.</span><span class="nb">JSON</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-66-67" name="__codelineno-66-67"></a><span class="w">            </span><span class="nx">schema</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="s1">&#39;x-ts-type&#39;</span><span class="o">:</span><span class="w"> </span><span class="nx">TokenResponse</span><span class="p">},</span>
<a id="__codelineno-66-68" name="__codelineno-66-68"></a><span class="w">          </span><span class="p">},</span>
<a id="__codelineno-66-69" name="__codelineno-66-69"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-66-70" name="__codelineno-66-70"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-66-71" name="__codelineno-66-71"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-66-72" name="__codelineno-66-72"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-66-73" name="__codelineno-66-73"></a><span class="w">  </span><span class="k">async</span><span class="w"> </span><span class="nx">instagramCallback</span><span class="p">(</span>
<a id="__codelineno-66-74" name="__codelineno-66-74"></a><span class="w">    </span><span class="kd">@param</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="kt">string</span><span class="p">(</span><span class="s1">&#39;code&#39;</span><span class="p">)</span><span class="w"> </span><span class="nx">code</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span>
<a id="__codelineno-66-75" name="__codelineno-66-75"></a><span class="w">    </span><span class="kd">@param</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="kt">string</span><span class="p">(</span><span class="s1">&#39;state&#39;</span><span class="p">)</span><span class="w"> </span><span class="nx">state</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span>
<a id="__codelineno-66-76" name="__codelineno-66-76"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">RestBindings</span><span class="p">.</span><span class="nx">Http</span><span class="p">.</span><span class="nx">RESPONSE</span><span class="p">)</span><span class="w"> </span><span class="nx">response</span><span class="o">:</span><span class="w"> </span><span class="kt">Response</span><span class="p">,</span>
<a id="__codelineno-66-77" name="__codelineno-66-77"></a><span class="w">  </span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nb">Promise</span><span class="o">&lt;</span><span class="ow">void</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-66-78" name="__codelineno-66-78"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">clientId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">URLSearchParams</span><span class="p">(</span><span class="nx">state</span><span class="p">).</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;client_id&#39;</span><span class="p">);</span>
<a id="__codelineno-66-79" name="__codelineno-66-79"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">clientId</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">user</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-66-80" name="__codelineno-66-80"></a><span class="w">      </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">HttpErrors</span><span class="p">.</span><span class="nx">Unauthorized</span><span class="p">(</span><span class="nx">AuthErrorKeys</span><span class="p">.</span><span class="nx">ClientInvalid</span><span class="p">);</span>
<a id="__codelineno-66-81" name="__codelineno-66-81"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-66-82" name="__codelineno-66-82"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">authClientRepository</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span>
<a id="__codelineno-66-83" name="__codelineno-66-83"></a><span class="w">      </span><span class="nx">where</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-66-84" name="__codelineno-66-84"></a><span class="w">        </span><span class="nx">clientId</span><span class="o">:</span><span class="w"> </span><span class="kt">clientId</span><span class="p">,</span>
<a id="__codelineno-66-85" name="__codelineno-66-85"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-66-86" name="__codelineno-66-86"></a><span class="w">    </span><span class="p">});</span>
<a id="__codelineno-66-87" name="__codelineno-66-87"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">client</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">!</span><span class="nx">client</span><span class="p">.</span><span class="nx">redirectUrl</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-66-88" name="__codelineno-66-88"></a><span class="w">      </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">HttpErrors</span><span class="p">.</span><span class="nx">Unauthorized</span><span class="p">(</span><span class="nx">AuthErrorKeys</span><span class="p">.</span><span class="nx">ClientInvalid</span><span class="p">);</span>
<a id="__codelineno-66-89" name="__codelineno-66-89"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-66-90" name="__codelineno-66-90"></a><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-66-91" name="__codelineno-66-91"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">codePayload</span><span class="o">:</span><span class="w"> </span><span class="kt">ClientAuthCode</span><span class="o">&lt;</span><span class="nx">User</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-66-92" name="__codelineno-66-92"></a><span class="w">        </span><span class="nx">clientId</span><span class="p">,</span>
<a id="__codelineno-66-93" name="__codelineno-66-93"></a><span class="w">        </span><span class="nx">user</span><span class="o">:</span><span class="w"> </span><span class="kt">this.user</span><span class="p">,</span>
<a id="__codelineno-66-94" name="__codelineno-66-94"></a><span class="w">      </span><span class="p">};</span>
<a id="__codelineno-66-95" name="__codelineno-66-95"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">jwt</span><span class="p">.</span><span class="nx">sign</span><span class="p">(</span><span class="nx">codePayload</span><span class="p">,</span><span class="w"> </span><span class="nx">client</span><span class="p">.</span><span class="nx">secret</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-66-96" name="__codelineno-66-96"></a><span class="w">        </span><span class="nx">expiresIn</span><span class="o">:</span><span class="w"> </span><span class="kt">client.authCodeExpiration</span><span class="p">,</span>
<a id="__codelineno-66-97" name="__codelineno-66-97"></a><span class="w">        </span><span class="nx">audience</span><span class="o">:</span><span class="w"> </span><span class="kt">clientId</span><span class="p">,</span>
<a id="__codelineno-66-98" name="__codelineno-66-98"></a><span class="w">        </span><span class="nx">subject</span><span class="o">:</span><span class="w"> </span><span class="kt">this.user.username</span><span class="p">,</span>
<a id="__codelineno-66-99" name="__codelineno-66-99"></a><span class="w">        </span><span class="nx">issuer</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.JWT_ISSUER</span><span class="p">,</span>
<a id="__codelineno-66-100" name="__codelineno-66-100"></a><span class="w">      </span><span class="p">});</span>
<a id="__codelineno-66-101" name="__codelineno-66-101"></a><span class="w">      </span><span class="nx">response</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">client</span><span class="p">.</span><span class="nx">redirectUrl</span><span class="si">}</span><span class="sb">?code=</span><span class="si">${</span><span class="nx">token</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<a id="__codelineno-66-102" name="__codelineno-66-102"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-66-103" name="__codelineno-66-103"></a><span class="w">      </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">HttpErrors</span><span class="p">.</span><span class="nx">InternalServerError</span><span class="p">(</span><span class="nx">AuthErrorKeys</span><span class="p">.</span><span class="nx">UnknownError</span><span class="p">);</span>
<a id="__codelineno-66-104" name="__codelineno-66-104"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-66-105" name="__codelineno-66-105"></a><span class="w">  </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Please note above that we are creating two new APIs for instagram auth. The first one is for UI clients to hit. We are authenticating client as well, then passing the details to the instagram auth. Then, the actual authentication is done by instagram authorization url, which redirects to the second API we created after success. The first API method body is empty as we do not need to handle its response. The instagram auth provider in this package will do the redirection for you automatically.</p>
<p>For accessing the authenticated AuthUser model reference, you can inject the CURRENT_USER provider, provided by the extension, which is populated by the auth action sequence above.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-67-1">1</a></span>
<span class="normal"><a href="#__codelineno-67-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-67-1" name="__codelineno-67-1"></a><span class="w">  </span><span class="kd">@inject</span><span class="p">.</span><span class="nx">getter</span><span class="p">(</span><span class="nx">AuthenticationBindings</span><span class="p">.</span><span class="nx">CURRENT_USER</span><span class="p">)</span>
<a id="__codelineno-67-2" name="__codelineno-67-2"></a><span class="w">  </span><span class="k">private</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="nx">getCurrentUser</span><span class="o">:</span><span class="w"> </span><span class="kt">Getter</span><span class="o">&lt;</span><span class="nx">User</span><span class="o">&gt;</span><span class="p">,</span>
</code></pre></div></td></tr></table></div>
<h3 id="apple-oauth-2">Apple Oauth 2<a class="headerlink" href="#apple-oauth-2" title="Permanent link">&para;</a></h3>
<p>In order to use it, run <code>npm install --save passport-apple</code>.
First, create a AuthUser model implementing the IAuthUser interface. You can implement the interface in the user model itself. See sample below.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-68-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-68-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-68-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-68-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-68-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-68-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-68-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-68-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-68-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-68-10">10</a></span>
<span class="normal"><a href="#__codelineno-68-11">11</a></span>
<span class="normal"><a href="#__codelineno-68-12">12</a></span>
<span class="normal"><a href="#__codelineno-68-13">13</a></span>
<span class="normal"><a href="#__codelineno-68-14">14</a></span>
<span class="normal"><a href="#__codelineno-68-15">15</a></span>
<span class="normal"><a href="#__codelineno-68-16">16</a></span>
<span class="normal"><a href="#__codelineno-68-17">17</a></span>
<span class="normal"><a href="#__codelineno-68-18">18</a></span>
<span class="normal"><a href="#__codelineno-68-19">19</a></span>
<span class="normal"><a href="#__codelineno-68-20">20</a></span>
<span class="normal"><a href="#__codelineno-68-21">21</a></span>
<span class="normal"><a href="#__codelineno-68-22">22</a></span>
<span class="normal"><a href="#__codelineno-68-23">23</a></span>
<span class="normal"><a href="#__codelineno-68-24">24</a></span>
<span class="normal"><a href="#__codelineno-68-25">25</a></span>
<span class="normal"><a href="#__codelineno-68-26">26</a></span>
<span class="normal"><a href="#__codelineno-68-27">27</a></span>
<span class="normal"><a href="#__codelineno-68-28">28</a></span>
<span class="normal"><a href="#__codelineno-68-29">29</a></span>
<span class="normal"><a href="#__codelineno-68-30">30</a></span>
<span class="normal"><a href="#__codelineno-68-31">31</a></span>
<span class="normal"><a href="#__codelineno-68-32">32</a></span>
<span class="normal"><a href="#__codelineno-68-33">33</a></span>
<span class="normal"><a href="#__codelineno-68-34">34</a></span>
<span class="normal"><a href="#__codelineno-68-35">35</a></span>
<span class="normal"><a href="#__codelineno-68-36">36</a></span>
<span class="normal"><a href="#__codelineno-68-37">37</a></span>
<span class="normal"><a href="#__codelineno-68-38">38</a></span>
<span class="normal"><a href="#__codelineno-68-39">39</a></span>
<span class="normal"><a href="#__codelineno-68-40">40</a></span>
<span class="normal"><a href="#__codelineno-68-41">41</a></span>
<span class="normal"><a href="#__codelineno-68-42">42</a></span>
<span class="normal"><a href="#__codelineno-68-43">43</a></span>
<span class="normal"><a href="#__codelineno-68-44">44</a></span>
<span class="normal"><a href="#__codelineno-68-45">45</a></span>
<span class="normal"><a href="#__codelineno-68-46">46</a></span>
<span class="normal"><a href="#__codelineno-68-47">47</a></span>
<span class="normal"><a href="#__codelineno-68-48">48</a></span>
<span class="normal"><a href="#__codelineno-68-49">49</a></span>
<span class="normal"><a href="#__codelineno-68-50">50</a></span>
<span class="normal"><a href="#__codelineno-68-51">51</a></span>
<span class="normal"><a href="#__codelineno-68-52">52</a></span>
<span class="normal"><a href="#__codelineno-68-53">53</a></span>
<span class="normal"><a href="#__codelineno-68-54">54</a></span>
<span class="normal"><a href="#__codelineno-68-55">55</a></span>
<span class="normal"><a href="#__codelineno-68-56">56</a></span>
<span class="normal"><a href="#__codelineno-68-57">57</a></span>
<span class="normal"><a href="#__codelineno-68-58">58</a></span>
<span class="normal"><a href="#__codelineno-68-59">59</a></span>
<span class="normal"><a href="#__codelineno-68-60">60</a></span>
<span class="normal"><a href="#__codelineno-68-61">61</a></span>
<span class="normal"><a href="#__codelineno-68-62">62</a></span>
<span class="normal"><a href="#__codelineno-68-63">63</a></span>
<span class="normal"><a href="#__codelineno-68-64">64</a></span>
<span class="normal"><a href="#__codelineno-68-65">65</a></span>
<span class="normal"><a href="#__codelineno-68-66">66</a></span>
<span class="normal"><a href="#__codelineno-68-67">67</a></span>
<span class="normal"><a href="#__codelineno-68-68">68</a></span>
<span class="normal"><a href="#__codelineno-68-69">69</a></span>
<span class="normal"><a href="#__codelineno-68-70">70</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-68-1" name="__codelineno-68-1"></a><span class="kd">@model</span><span class="p">({</span>
<a id="__codelineno-68-2" name="__codelineno-68-2"></a><span class="w">  </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;users&#39;</span><span class="p">,</span>
<a id="__codelineno-68-3" name="__codelineno-68-3"></a><span class="p">})</span>
<a id="__codelineno-68-4" name="__codelineno-68-4"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">User</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">Entity</span><span class="w"> </span><span class="k">implements</span><span class="w"> </span><span class="nx">IAuthUser</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-68-5" name="__codelineno-68-5"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-68-6" name="__codelineno-68-6"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;number&#39;</span><span class="p">,</span>
<a id="__codelineno-68-7" name="__codelineno-68-7"></a><span class="w">    </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<a id="__codelineno-68-8" name="__codelineno-68-8"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-68-9" name="__codelineno-68-9"></a><span class="w">  </span><span class="nx">id?</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">;</span>
<a id="__codelineno-68-10" name="__codelineno-68-10"></a>
<a id="__codelineno-68-11" name="__codelineno-68-11"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-68-12" name="__codelineno-68-12"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-68-13" name="__codelineno-68-13"></a><span class="w">    </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<a id="__codelineno-68-14" name="__codelineno-68-14"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;first_name&#39;</span><span class="p">,</span>
<a id="__codelineno-68-15" name="__codelineno-68-15"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-68-16" name="__codelineno-68-16"></a><span class="w">  </span><span class="nx">firstName</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-68-17" name="__codelineno-68-17"></a>
<a id="__codelineno-68-18" name="__codelineno-68-18"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-68-19" name="__codelineno-68-19"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-68-20" name="__codelineno-68-20"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;last_name&#39;</span><span class="p">,</span>
<a id="__codelineno-68-21" name="__codelineno-68-21"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-68-22" name="__codelineno-68-22"></a><span class="w">  </span><span class="nx">lastName</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-68-23" name="__codelineno-68-23"></a>
<a id="__codelineno-68-24" name="__codelineno-68-24"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-68-25" name="__codelineno-68-25"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-68-26" name="__codelineno-68-26"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;middle_name&#39;</span><span class="p">,</span>
<a id="__codelineno-68-27" name="__codelineno-68-27"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-68-28" name="__codelineno-68-28"></a><span class="w">  </span><span class="nx">middleName?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-68-29" name="__codelineno-68-29"></a>
<a id="__codelineno-68-30" name="__codelineno-68-30"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-68-31" name="__codelineno-68-31"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-68-32" name="__codelineno-68-32"></a><span class="w">    </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<a id="__codelineno-68-33" name="__codelineno-68-33"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-68-34" name="__codelineno-68-34"></a><span class="w">  </span><span class="nx">username</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-68-35" name="__codelineno-68-35"></a>
<a id="__codelineno-68-36" name="__codelineno-68-36"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-68-37" name="__codelineno-68-37"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-68-38" name="__codelineno-68-38"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-68-39" name="__codelineno-68-39"></a><span class="w">  </span><span class="nx">email?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-68-40" name="__codelineno-68-40"></a>
<a id="__codelineno-68-41" name="__codelineno-68-41"></a><span class="w">  </span><span class="c1">// Auth provider - &#39;apple&#39;</span>
<a id="__codelineno-68-42" name="__codelineno-68-42"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-68-43" name="__codelineno-68-43"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-68-44" name="__codelineno-68-44"></a><span class="w">    </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<a id="__codelineno-68-45" name="__codelineno-68-45"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;auth_provider&#39;</span><span class="p">,</span>
<a id="__codelineno-68-46" name="__codelineno-68-46"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-68-47" name="__codelineno-68-47"></a><span class="w">  </span><span class="nx">authProvider</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-68-48" name="__codelineno-68-48"></a>
<a id="__codelineno-68-49" name="__codelineno-68-49"></a><span class="w">  </span><span class="c1">// Id from external provider</span>
<a id="__codelineno-68-50" name="__codelineno-68-50"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-68-51" name="__codelineno-68-51"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-68-52" name="__codelineno-68-52"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;auth_id&#39;</span><span class="p">,</span>
<a id="__codelineno-68-53" name="__codelineno-68-53"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-68-54" name="__codelineno-68-54"></a><span class="w">  </span><span class="nx">authId?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-68-55" name="__codelineno-68-55"></a>
<a id="__codelineno-68-56" name="__codelineno-68-56"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-68-57" name="__codelineno-68-57"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-68-58" name="__codelineno-68-58"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;auth_token&#39;</span><span class="p">,</span>
<a id="__codelineno-68-59" name="__codelineno-68-59"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-68-60" name="__codelineno-68-60"></a><span class="w">  </span><span class="nx">authToken?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-68-61" name="__codelineno-68-61"></a>
<a id="__codelineno-68-62" name="__codelineno-68-62"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-68-63" name="__codelineno-68-63"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-68-64" name="__codelineno-68-64"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-68-65" name="__codelineno-68-65"></a><span class="w">  </span><span class="nx">password?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-68-66" name="__codelineno-68-66"></a>
<a id="__codelineno-68-67" name="__codelineno-68-67"></a><span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">data?</span><span class="o">:</span><span class="w"> </span><span class="kt">Partial</span><span class="o">&lt;</span><span class="nx">User</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-68-68" name="__codelineno-68-68"></a><span class="w">    </span><span class="k">super</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<a id="__codelineno-68-69" name="__codelineno-68-69"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-68-70" name="__codelineno-68-70"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Now bind this model to USER_MODEL key in application.ts</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-69-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-69-1" name="__codelineno-69-1"></a><span class="k">this</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">AuthenticationBindings</span><span class="p">.</span><span class="nx">USER_MODEL</span><span class="p">).</span><span class="nx">to</span><span class="p">(</span><span class="nx">User</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>Create CRUD repository for the above model. Use loopback CLI.</p>
<div class="language-sh highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-70-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-70-1" name="__codelineno-70-1"></a>lb4<span class="w"> </span>repository
</code></pre></div></td></tr></table></div>
<p>Add the verifier function for the strategy. You need to create a provider for the same. You can add your application specific business logic for client auth here. Here is a simple example.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-71-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-71-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-71-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-71-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-71-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-71-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-71-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-71-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-71-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-71-10">10</a></span>
<span class="normal"><a href="#__codelineno-71-11">11</a></span>
<span class="normal"><a href="#__codelineno-71-12">12</a></span>
<span class="normal"><a href="#__codelineno-71-13">13</a></span>
<span class="normal"><a href="#__codelineno-71-14">14</a></span>
<span class="normal"><a href="#__codelineno-71-15">15</a></span>
<span class="normal"><a href="#__codelineno-71-16">16</a></span>
<span class="normal"><a href="#__codelineno-71-17">17</a></span>
<span class="normal"><a href="#__codelineno-71-18">18</a></span>
<span class="normal"><a href="#__codelineno-71-19">19</a></span>
<span class="normal"><a href="#__codelineno-71-20">20</a></span>
<span class="normal"><a href="#__codelineno-71-21">21</a></span>
<span class="normal"><a href="#__codelineno-71-22">22</a></span>
<span class="normal"><a href="#__codelineno-71-23">23</a></span>
<span class="normal"><a href="#__codelineno-71-24">24</a></span>
<span class="normal"><a href="#__codelineno-71-25">25</a></span>
<span class="normal"><a href="#__codelineno-71-26">26</a></span>
<span class="normal"><a href="#__codelineno-71-27">27</a></span>
<span class="normal"><a href="#__codelineno-71-28">28</a></span>
<span class="normal"><a href="#__codelineno-71-29">29</a></span>
<span class="normal"><a href="#__codelineno-71-30">30</a></span>
<span class="normal"><a href="#__codelineno-71-31">31</a></span>
<span class="normal"><a href="#__codelineno-71-32">32</a></span>
<span class="normal"><a href="#__codelineno-71-33">33</a></span>
<span class="normal"><a href="#__codelineno-71-34">34</a></span>
<span class="normal"><a href="#__codelineno-71-35">35</a></span>
<span class="normal"><a href="#__codelineno-71-36">36</a></span>
<span class="normal"><a href="#__codelineno-71-37">37</a></span>
<span class="normal"><a href="#__codelineno-71-38">38</a></span>
<span class="normal"><a href="#__codelineno-71-39">39</a></span>
<span class="normal"><a href="#__codelineno-71-40">40</a></span>
<span class="normal"><a href="#__codelineno-71-41">41</a></span>
<span class="normal"><a href="#__codelineno-71-42">42</a></span>
<span class="normal"><a href="#__codelineno-71-43">43</a></span>
<span class="normal"><a href="#__codelineno-71-44">44</a></span>
<span class="normal"><a href="#__codelineno-71-45">45</a></span>
<span class="normal"><a href="#__codelineno-71-46">46</a></span>
<span class="normal"><a href="#__codelineno-71-47">47</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-71-1" name="__codelineno-71-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">Provider</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@loopback/context&#39;</span><span class="p">;</span>
<a id="__codelineno-71-2" name="__codelineno-71-2"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">repository</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@loopback/repository&#39;</span><span class="p">;</span>
<a id="__codelineno-71-3" name="__codelineno-71-3"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">HttpErrors</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@loopback/rest&#39;</span><span class="p">;</span>
<a id="__codelineno-71-4" name="__codelineno-71-4"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">AuthErrorKeys</span><span class="p">,</span><span class="w"> </span><span class="nx">VerifyFunction</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;loopback4-authentication&#39;</span><span class="p">;</span>
<a id="__codelineno-71-5" name="__codelineno-71-5"></a>
<a id="__codelineno-71-6" name="__codelineno-71-6"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">Tenant</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../../../models&#39;</span><span class="p">;</span>
<a id="__codelineno-71-7" name="__codelineno-71-7"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">UserCredentialsRepository</span><span class="p">,</span><span class="w"> </span><span class="nx">UserRepository</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../../../repositories&#39;</span><span class="p">;</span>
<a id="__codelineno-71-8" name="__codelineno-71-8"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">AuthUser</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../models/auth-user.model&#39;</span><span class="p">;</span>
<a id="__codelineno-71-9" name="__codelineno-71-9"></a>
<a id="__codelineno-71-10" name="__codelineno-71-10"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">AppleOauth2VerifyProvider</span>
<a id="__codelineno-71-11" name="__codelineno-71-11"></a><span class="w">  </span><span class="k">implements</span><span class="w"> </span><span class="nx">Provider</span><span class="o">&lt;</span><span class="nx">VerifyFunction</span><span class="p">.</span><span class="nx">AppleAuthFn</span><span class="o">&gt;</span>
<a id="__codelineno-71-12" name="__codelineno-71-12"></a><span class="p">{</span>
<a id="__codelineno-71-13" name="__codelineno-71-13"></a><span class="w">  </span><span class="kr">constructor</span><span class="p">(</span>
<a id="__codelineno-71-14" name="__codelineno-71-14"></a><span class="w">    </span><span class="kd">@repository</span><span class="p">(</span><span class="nx">UserRepository</span><span class="p">)</span>
<a id="__codelineno-71-15" name="__codelineno-71-15"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nx">userRepository</span><span class="o">:</span><span class="w"> </span><span class="kt">UserRepository</span><span class="p">,</span>
<a id="__codelineno-71-16" name="__codelineno-71-16"></a><span class="w">    </span><span class="kd">@repository</span><span class="p">(</span><span class="nx">UserCredentialsRepository</span><span class="p">)</span>
<a id="__codelineno-71-17" name="__codelineno-71-17"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nx">userCredsRepository</span><span class="o">:</span><span class="w"> </span><span class="kt">UserCredentialsRepository</span><span class="p">,</span>
<a id="__codelineno-71-18" name="__codelineno-71-18"></a><span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-71-19" name="__codelineno-71-19"></a>
<a id="__codelineno-71-20" name="__codelineno-71-20"></a><span class="w">  </span><span class="nx">value</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">VerifyFunction</span><span class="p">.</span><span class="nx">AppleAuthFn</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-71-21" name="__codelineno-71-21"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">(</span><span class="nx">accessToken</span><span class="p">,</span><span class="w"> </span><span class="nx">refreshToken</span><span class="p">,</span><span class="w"> </span><span class="nx">profile</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-71-22" name="__codelineno-71-22"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">userRepository</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span>
<a id="__codelineno-71-23" name="__codelineno-71-23"></a><span class="w">        </span><span class="nx">where</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-71-24" name="__codelineno-71-24"></a><span class="w">          </span><span class="cm">/* eslint-disable-next-line @typescript-eslint/no-explicit-any */</span>
<a id="__codelineno-71-25" name="__codelineno-71-25"></a><span class="w">          </span><span class="nx">email</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">profile</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">any</span><span class="p">).</span><span class="nx">_json</span><span class="p">.</span><span class="nx">email</span><span class="p">,</span>
<a id="__codelineno-71-26" name="__codelineno-71-26"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-71-27" name="__codelineno-71-27"></a><span class="w">      </span><span class="p">});</span>
<a id="__codelineno-71-28" name="__codelineno-71-28"></a><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">user</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-71-29" name="__codelineno-71-29"></a><span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">HttpErrors</span><span class="p">.</span><span class="nx">Unauthorized</span><span class="p">(</span><span class="nx">AuthErrorKeys</span><span class="p">.</span><span class="nx">InvalidCredentials</span><span class="p">);</span>
<a id="__codelineno-71-30" name="__codelineno-71-30"></a><span class="w">      </span><span class="p">}</span>
<a id="__codelineno-71-31" name="__codelineno-71-31"></a><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-71-32" name="__codelineno-71-32"></a><span class="w">        </span><span class="o">!</span><span class="nx">user</span><span class="w"> </span><span class="o">||</span>
<a id="__codelineno-71-33" name="__codelineno-71-33"></a><span class="w">        </span><span class="nx">user</span><span class="p">.</span><span class="nx">authProvider</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="s1">&#39;apple&#39;</span><span class="w"> </span><span class="o">||</span>
<a id="__codelineno-71-34" name="__codelineno-71-34"></a><span class="w">        </span><span class="nx">user</span><span class="p">.</span><span class="nx">authId</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="nx">profile</span><span class="p">.</span><span class="nx">id</span>
<a id="__codelineno-71-35" name="__codelineno-71-35"></a><span class="w">      </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-71-36" name="__codelineno-71-36"></a><span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">HttpErrors</span><span class="p">.</span><span class="nx">Unauthorized</span><span class="p">(</span><span class="nx">AuthErrorKeys</span><span class="p">.</span><span class="nx">InvalidCredentials</span><span class="p">);</span>
<a id="__codelineno-71-37" name="__codelineno-71-37"></a><span class="w">      </span><span class="p">}</span>
<a id="__codelineno-71-38" name="__codelineno-71-38"></a>
<a id="__codelineno-71-39" name="__codelineno-71-39"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">authUser</span><span class="o">:</span><span class="w"> </span><span class="kt">AuthUser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">AuthUser</span><span class="p">(</span><span class="nx">user</span><span class="p">);</span>
<a id="__codelineno-71-40" name="__codelineno-71-40"></a><span class="w">      </span><span class="nx">authUser</span><span class="p">.</span><span class="nx">permissions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
<a id="__codelineno-71-41" name="__codelineno-71-41"></a><span class="w">      </span><span class="nx">authUser</span><span class="p">.</span><span class="nx">externalAuthToken</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">accessToken</span><span class="p">;</span>
<a id="__codelineno-71-42" name="__codelineno-71-42"></a><span class="w">      </span><span class="nx">authUser</span><span class="p">.</span><span class="nx">externalRefreshToken</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">refreshToken</span><span class="p">;</span>
<a id="__codelineno-71-43" name="__codelineno-71-43"></a><span class="w">      </span><span class="nx">authUser</span><span class="p">.</span><span class="nx">tenant</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Tenant</span><span class="p">({</span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="kt">user.defaultTenant</span><span class="p">});</span>
<a id="__codelineno-71-44" name="__codelineno-71-44"></a><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="nx">authUser</span><span class="p">;</span>
<a id="__codelineno-71-45" name="__codelineno-71-45"></a><span class="w">    </span><span class="p">};</span>
<a id="__codelineno-71-46" name="__codelineno-71-46"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-71-47" name="__codelineno-71-47"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Please note the Verify function type <em>VerifyFunction.LocalPasswordFn</em></p>
<p>Now bind this provider to the application in application.ts.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-72-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-72-1" name="__codelineno-72-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">AuthenticationComponent</span><span class="p">,</span><span class="w"> </span><span class="nx">Strategies</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;loopback4-authentication&#39;</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-73-1">1</a></span>
<span class="normal"><a href="#__codelineno-73-2">2</a></span>
<span class="normal"><a href="#__codelineno-73-3">3</a></span>
<span class="normal"><a href="#__codelineno-73-4">4</a></span>
<span class="normal"><a href="#__codelineno-73-5">5</a></span>
<span class="normal"><a href="#__codelineno-73-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-73-1" name="__codelineno-73-1"></a><span class="c1">// Add authentication component</span>
<a id="__codelineno-73-2" name="__codelineno-73-2"></a><span class="k">this</span><span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="nx">AuthenticationComponent</span><span class="p">);</span>
<a id="__codelineno-73-3" name="__codelineno-73-3"></a><span class="c1">// Customize authentication verify handlers</span>
<a id="__codelineno-73-4" name="__codelineno-73-4"></a><span class="k">this</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">Strategies</span><span class="p">.</span><span class="nx">Passport</span><span class="p">.</span><span class="nx">APPLE_OAUTH2_VERIFIER</span><span class="p">).</span><span class="nx">toProvider</span><span class="p">(</span>
<a id="__codelineno-73-5" name="__codelineno-73-5"></a><span class="w">  </span><span class="nx">AppleOauth2VerifyProvider</span><span class="p">,</span>
<a id="__codelineno-73-6" name="__codelineno-73-6"></a><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>Finally, add the authenticate function as a sequence action to sequence.ts.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-74-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-74-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-74-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-74-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-74-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-74-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-74-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-74-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-74-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-74-10">10</a></span>
<span class="normal"><a href="#__codelineno-74-11">11</a></span>
<span class="normal"><a href="#__codelineno-74-12">12</a></span>
<span class="normal"><a href="#__codelineno-74-13">13</a></span>
<span class="normal"><a href="#__codelineno-74-14">14</a></span>
<span class="normal"><a href="#__codelineno-74-15">15</a></span>
<span class="normal"><a href="#__codelineno-74-16">16</a></span>
<span class="normal"><a href="#__codelineno-74-17">17</a></span>
<span class="normal"><a href="#__codelineno-74-18">18</a></span>
<span class="normal"><a href="#__codelineno-74-19">19</a></span>
<span class="normal"><a href="#__codelineno-74-20">20</a></span>
<span class="normal"><a href="#__codelineno-74-21">21</a></span>
<span class="normal"><a href="#__codelineno-74-22">22</a></span>
<span class="normal"><a href="#__codelineno-74-23">23</a></span>
<span class="normal"><a href="#__codelineno-74-24">24</a></span>
<span class="normal"><a href="#__codelineno-74-25">25</a></span>
<span class="normal"><a href="#__codelineno-74-26">26</a></span>
<span class="normal"><a href="#__codelineno-74-27">27</a></span>
<span class="normal"><a href="#__codelineno-74-28">28</a></span>
<span class="normal"><a href="#__codelineno-74-29">29</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-74-1" name="__codelineno-74-1"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">MySequence</span><span class="w"> </span><span class="k">implements</span><span class="w"> </span><span class="nx">SequenceHandler</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-74-2" name="__codelineno-74-2"></a><span class="w">  </span><span class="kr">constructor</span><span class="p">(</span>
<a id="__codelineno-74-3" name="__codelineno-74-3"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">FIND_ROUTE</span><span class="p">)</span><span class="w"> </span><span class="k">protected</span><span class="w"> </span><span class="nx">findRoute</span><span class="o">:</span><span class="w"> </span><span class="kt">FindRoute</span><span class="p">,</span>
<a id="__codelineno-74-4" name="__codelineno-74-4"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">PARSE_PARAMS</span><span class="p">)</span><span class="w"> </span><span class="k">protected</span><span class="w"> </span><span class="nx">parseParams</span><span class="o">:</span><span class="w"> </span><span class="kt">ParseParams</span><span class="p">,</span>
<a id="__codelineno-74-5" name="__codelineno-74-5"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">INVOKE_METHOD</span><span class="p">)</span><span class="w"> </span><span class="k">protected</span><span class="w"> </span><span class="nx">invoke</span><span class="o">:</span><span class="w"> </span><span class="kt">InvokeMethod</span><span class="p">,</span>
<a id="__codelineno-74-6" name="__codelineno-74-6"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">SEND</span><span class="p">)</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="nx">send</span><span class="o">:</span><span class="w"> </span><span class="kt">Send</span><span class="p">,</span>
<a id="__codelineno-74-7" name="__codelineno-74-7"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">REJECT</span><span class="p">)</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="nx">reject</span><span class="o">:</span><span class="w"> </span><span class="kt">Reject</span><span class="p">,</span>
<a id="__codelineno-74-8" name="__codelineno-74-8"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">AuthenticationBindings</span><span class="p">.</span><span class="nx">USER_AUTH_ACTION</span><span class="p">)</span>
<a id="__codelineno-74-9" name="__codelineno-74-9"></a><span class="w">    </span><span class="k">protected</span><span class="w"> </span><span class="nx">authenticateRequest</span><span class="o">:</span><span class="w"> </span><span class="kt">AuthenticateFn</span><span class="o">&lt;</span><span class="nx">AuthUser</span><span class="o">&gt;</span><span class="p">,</span>
<a id="__codelineno-74-10" name="__codelineno-74-10"></a><span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-74-11" name="__codelineno-74-11"></a>
<a id="__codelineno-74-12" name="__codelineno-74-12"></a><span class="w">  </span><span class="k">async</span><span class="w"> </span><span class="nx">handle</span><span class="p">(</span><span class="nx">context</span><span class="o">:</span><span class="w"> </span><span class="kt">RequestContext</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-74-13" name="__codelineno-74-13"></a><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-74-14" name="__codelineno-74-14"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="nx">request</span><span class="p">,</span><span class="w"> </span><span class="nx">response</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">context</span><span class="p">;</span>
<a id="__codelineno-74-15" name="__codelineno-74-15"></a>
<a id="__codelineno-74-16" name="__codelineno-74-16"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">route</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">findRoute</span><span class="p">(</span><span class="nx">request</span><span class="p">);</span>
<a id="__codelineno-74-17" name="__codelineno-74-17"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">parseParams</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span><span class="w"> </span><span class="nx">route</span><span class="p">);</span>
<a id="__codelineno-74-18" name="__codelineno-74-18"></a><span class="w">      </span><span class="nx">request</span><span class="p">.</span><span class="nx">body</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">args</span><span class="p">[</span><span class="nx">args</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">];</span>
<a id="__codelineno-74-19" name="__codelineno-74-19"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">authUser</span><span class="o">:</span><span class="w"> </span><span class="kt">AuthUser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">authenticateRequest</span><span class="p">(</span>
<a id="__codelineno-74-20" name="__codelineno-74-20"></a><span class="w">        </span><span class="nx">request</span><span class="p">,</span>
<a id="__codelineno-74-21" name="__codelineno-74-21"></a><span class="w">        </span><span class="nx">response</span><span class="p">,</span>
<a id="__codelineno-74-22" name="__codelineno-74-22"></a><span class="w">      </span><span class="p">);</span>
<a id="__codelineno-74-23" name="__codelineno-74-23"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">invoke</span><span class="p">(</span><span class="nx">route</span><span class="p">,</span><span class="w"> </span><span class="nx">args</span><span class="p">);</span>
<a id="__codelineno-74-24" name="__codelineno-74-24"></a><span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">response</span><span class="p">,</span><span class="w"> </span><span class="nx">result</span><span class="p">);</span>
<a id="__codelineno-74-25" name="__codelineno-74-25"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-74-26" name="__codelineno-74-26"></a><span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">reject</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">);</span>
<a id="__codelineno-74-27" name="__codelineno-74-27"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-74-28" name="__codelineno-74-28"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-74-29" name="__codelineno-74-29"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>After this, you can use decorator to apply auth to controller functions wherever needed. See below.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-75-1">  1</a></span>
<span class="normal"><a href="#__codelineno-75-2">  2</a></span>
<span class="normal"><a href="#__codelineno-75-3">  3</a></span>
<span class="normal"><a href="#__codelineno-75-4">  4</a></span>
<span class="normal"><a href="#__codelineno-75-5">  5</a></span>
<span class="normal"><a href="#__codelineno-75-6">  6</a></span>
<span class="normal"><a href="#__codelineno-75-7">  7</a></span>
<span class="normal"><a href="#__codelineno-75-8">  8</a></span>
<span class="normal"><a href="#__codelineno-75-9">  9</a></span>
<span class="normal"><a href="#__codelineno-75-10"> 10</a></span>
<span class="normal"><a href="#__codelineno-75-11"> 11</a></span>
<span class="normal"><a href="#__codelineno-75-12"> 12</a></span>
<span class="normal"><a href="#__codelineno-75-13"> 13</a></span>
<span class="normal"><a href="#__codelineno-75-14"> 14</a></span>
<span class="normal"><a href="#__codelineno-75-15"> 15</a></span>
<span class="normal"><a href="#__codelineno-75-16"> 16</a></span>
<span class="normal"><a href="#__codelineno-75-17"> 17</a></span>
<span class="normal"><a href="#__codelineno-75-18"> 18</a></span>
<span class="normal"><a href="#__codelineno-75-19"> 19</a></span>
<span class="normal"><a href="#__codelineno-75-20"> 20</a></span>
<span class="normal"><a href="#__codelineno-75-21"> 21</a></span>
<span class="normal"><a href="#__codelineno-75-22"> 22</a></span>
<span class="normal"><a href="#__codelineno-75-23"> 23</a></span>
<span class="normal"><a href="#__codelineno-75-24"> 24</a></span>
<span class="normal"><a href="#__codelineno-75-25"> 25</a></span>
<span class="normal"><a href="#__codelineno-75-26"> 26</a></span>
<span class="normal"><a href="#__codelineno-75-27"> 27</a></span>
<span class="normal"><a href="#__codelineno-75-28"> 28</a></span>
<span class="normal"><a href="#__codelineno-75-29"> 29</a></span>
<span class="normal"><a href="#__codelineno-75-30"> 30</a></span>
<span class="normal"><a href="#__codelineno-75-31"> 31</a></span>
<span class="normal"><a href="#__codelineno-75-32"> 32</a></span>
<span class="normal"><a href="#__codelineno-75-33"> 33</a></span>
<span class="normal"><a href="#__codelineno-75-34"> 34</a></span>
<span class="normal"><a href="#__codelineno-75-35"> 35</a></span>
<span class="normal"><a href="#__codelineno-75-36"> 36</a></span>
<span class="normal"><a href="#__codelineno-75-37"> 37</a></span>
<span class="normal"><a href="#__codelineno-75-38"> 38</a></span>
<span class="normal"><a href="#__codelineno-75-39"> 39</a></span>
<span class="normal"><a href="#__codelineno-75-40"> 40</a></span>
<span class="normal"><a href="#__codelineno-75-41"> 41</a></span>
<span class="normal"><a href="#__codelineno-75-42"> 42</a></span>
<span class="normal"><a href="#__codelineno-75-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-75-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-75-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-75-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-75-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-75-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-75-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-75-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-75-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-75-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-75-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-75-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-75-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-75-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-75-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-75-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-75-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-75-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-75-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-75-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-75-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-75-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-75-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-75-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-75-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-75-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-75-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-75-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-75-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-75-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-75-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-75-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-75-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-75-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-75-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-75-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-75-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-75-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-75-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-75-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-75-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-75-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-75-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-75-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-75-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-75-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-75-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-75-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-75-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-75-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-75-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-75-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-75-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-75-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-75-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-75-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-75-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-75-100">100</a></span>
<span class="normal"><a href="#__codelineno-75-101">101</a></span>
<span class="normal"><a href="#__codelineno-75-102">102</a></span>
<span class="normal"><a href="#__codelineno-75-103">103</a></span>
<span class="normal"><a href="#__codelineno-75-104">104</a></span>
<span class="normal"><a href="#__codelineno-75-105">105</a></span>
<span class="normal"><a href="#__codelineno-75-106">106</a></span>
<span class="normal"><a href="#__codelineno-75-107">107</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-75-1" name="__codelineno-75-1"></a><span class="kd">@authenticateClient</span><span class="p">(</span><span class="nx">STRATEGY</span><span class="p">.</span><span class="nx">CLIENT_PASSWORD</span><span class="p">)</span>
<a id="__codelineno-75-2" name="__codelineno-75-2"></a><span class="w">  </span><span class="kd">@authenticate</span><span class="p">(</span>
<a id="__codelineno-75-3" name="__codelineno-75-3"></a><span class="w">    </span><span class="nx">STRATEGY</span><span class="p">.</span><span class="nx">APPLE_OAUTH2</span><span class="p">,</span>
<a id="__codelineno-75-4" name="__codelineno-75-4"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-75-5" name="__codelineno-75-5"></a><span class="w">      </span><span class="nx">accessType</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;offline&#39;</span><span class="p">,</span>
<a id="__codelineno-75-6" name="__codelineno-75-6"></a><span class="w">      </span><span class="nx">scope</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;email&#39;</span><span class="p">],</span>
<a id="__codelineno-75-7" name="__codelineno-75-7"></a><span class="w">      </span><span class="nx">callbackURL</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.APPLE_AUTH_CALLBACK_URL</span><span class="p">,</span>
<a id="__codelineno-75-8" name="__codelineno-75-8"></a><span class="w">      </span><span class="nx">clientID</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.APPLE_AUTH_CLIENT_ID</span><span class="p">,</span>
<a id="__codelineno-75-9" name="__codelineno-75-9"></a><span class="w">      </span><span class="nx">teamID</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.APPLE_AUTH_TEAM_ID</span><span class="p">,</span>
<a id="__codelineno-75-10" name="__codelineno-75-10"></a><span class="w">      </span><span class="nx">keyID</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.APPLE_AUTH_KEY_ID</span><span class="p">,</span>
<a id="__codelineno-75-11" name="__codelineno-75-11"></a><span class="w">      </span><span class="nx">privateKeyLocation</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.APPLE_AUTH_PRIVATE_KEY_LOCATION</span><span class="p">,</span>
<a id="__codelineno-75-12" name="__codelineno-75-12"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-75-13" name="__codelineno-75-13"></a><span class="w">    </span><span class="p">(</span><span class="nx">req</span><span class="o">:</span><span class="w"> </span><span class="kt">Request</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-75-14" name="__codelineno-75-14"></a><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-75-15" name="__codelineno-75-15"></a><span class="w">        </span><span class="nx">accessType</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;offline&#39;</span><span class="p">,</span>
<a id="__codelineno-75-16" name="__codelineno-75-16"></a><span class="w">        </span><span class="nx">state</span><span class="o">:</span><span class="w"> </span><span class="kt">Object.keys</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">)</span>
<a id="__codelineno-75-17" name="__codelineno-75-17"></a><span class="w">          </span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">key</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">key</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">&#39;=&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">[</span><span class="nx">key</span><span class="p">])</span>
<a id="__codelineno-75-18" name="__codelineno-75-18"></a><span class="w">          </span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;&amp;&#39;</span><span class="p">),</span>
<a id="__codelineno-75-19" name="__codelineno-75-19"></a><span class="w">      </span><span class="p">};</span>
<a id="__codelineno-75-20" name="__codelineno-75-20"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-75-21" name="__codelineno-75-21"></a><span class="w">  </span><span class="p">)</span>
<a id="__codelineno-75-22" name="__codelineno-75-22"></a><span class="w">  </span><span class="kd">@authorize</span><span class="p">([</span><span class="s1">&#39;*&#39;</span><span class="p">])</span>
<a id="__codelineno-75-23" name="__codelineno-75-23"></a><span class="w">  </span><span class="kd">@get</span><span class="p">(</span><span class="s1">&#39;/auth/oauth-apple&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-75-24" name="__codelineno-75-24"></a><span class="w">    </span><span class="nx">responses</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-75-25" name="__codelineno-75-25"></a><span class="w">      </span><span class="p">[</span><span class="nx">STATUS_CODE</span><span class="p">.</span><span class="nx">OK</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-75-26" name="__codelineno-75-26"></a><span class="w">        </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Token Response&#39;</span><span class="p">,</span>
<a id="__codelineno-75-27" name="__codelineno-75-27"></a><span class="w">        </span><span class="nx">content</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-75-28" name="__codelineno-75-28"></a><span class="w">          </span><span class="p">[</span><span class="nx">CONTENT_TYPE</span><span class="p">.</span><span class="nb">JSON</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-75-29" name="__codelineno-75-29"></a><span class="w">            </span><span class="nx">schema</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="s1">&#39;x-ts-type&#39;</span><span class="o">:</span><span class="w"> </span><span class="nx">TokenResponse</span><span class="p">},</span>
<a id="__codelineno-75-30" name="__codelineno-75-30"></a><span class="w">          </span><span class="p">},</span>
<a id="__codelineno-75-31" name="__codelineno-75-31"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-75-32" name="__codelineno-75-32"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-75-33" name="__codelineno-75-33"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-75-34" name="__codelineno-75-34"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-75-35" name="__codelineno-75-35"></a><span class="w">  </span><span class="k">async</span><span class="w"> </span><span class="nx">loginViaApple</span><span class="p">(</span>
<a id="__codelineno-75-36" name="__codelineno-75-36"></a><span class="w">    </span><span class="kd">@param</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="kt">string</span><span class="p">(</span><span class="s1">&#39;client_id&#39;</span><span class="p">)</span>
<a id="__codelineno-75-37" name="__codelineno-75-37"></a><span class="w">    </span><span class="nx">clientId?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span>
<a id="__codelineno-75-38" name="__codelineno-75-38"></a><span class="w">    </span><span class="kd">@param</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="kt">string</span><span class="p">(</span><span class="s1">&#39;client_secret&#39;</span><span class="p">)</span>
<a id="__codelineno-75-39" name="__codelineno-75-39"></a><span class="w">    </span><span class="nx">clientSecret?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span>
<a id="__codelineno-75-40" name="__codelineno-75-40"></a><span class="w">  </span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nb">Promise</span><span class="o">&lt;</span><span class="ow">void</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-75-41" name="__codelineno-75-41"></a>
<a id="__codelineno-75-42" name="__codelineno-75-42"></a><span class="w">  </span><span class="kd">@authenticate</span><span class="p">(</span>
<a id="__codelineno-75-43" name="__codelineno-75-43"></a><span class="w">    </span><span class="nx">STRATEGY</span><span class="p">.</span><span class="nx">APPLE_OAUTH2</span><span class="p">,</span>
<a id="__codelineno-75-44" name="__codelineno-75-44"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-75-45" name="__codelineno-75-45"></a><span class="w">      </span><span class="nx">accessType</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;offline&#39;</span><span class="p">,</span>
<a id="__codelineno-75-46" name="__codelineno-75-46"></a><span class="w">      </span><span class="nx">scope</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;email&#39;</span><span class="p">],</span>
<a id="__codelineno-75-47" name="__codelineno-75-47"></a><span class="w">      </span><span class="nx">callbackURL</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.APPLE_AUTH_CALLBACK_URL</span><span class="p">,</span>
<a id="__codelineno-75-48" name="__codelineno-75-48"></a><span class="w">      </span><span class="nx">clientID</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.APPLE_AUTH_CLIENT_ID</span><span class="p">,</span>
<a id="__codelineno-75-49" name="__codelineno-75-49"></a><span class="w">      </span><span class="nx">teamID</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.APPLE_AUTH_TEAM_ID</span><span class="p">,</span>
<a id="__codelineno-75-50" name="__codelineno-75-50"></a><span class="w">      </span><span class="nx">keyID</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.APPLE_AUTH_KEY_ID</span><span class="p">,</span>
<a id="__codelineno-75-51" name="__codelineno-75-51"></a><span class="w">      </span><span class="nx">privateKeyLocation</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.APPLE_AUTH_PRIVATE_KEY_LOCATION</span><span class="p">,</span>
<a id="__codelineno-75-52" name="__codelineno-75-52"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-75-53" name="__codelineno-75-53"></a><span class="w">    </span><span class="p">(</span><span class="nx">req</span><span class="o">:</span><span class="w"> </span><span class="kt">Request</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-75-54" name="__codelineno-75-54"></a><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-75-55" name="__codelineno-75-55"></a><span class="w">        </span><span class="nx">accessType</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;offline&#39;</span><span class="p">,</span>
<a id="__codelineno-75-56" name="__codelineno-75-56"></a><span class="w">        </span><span class="nx">state</span><span class="o">:</span><span class="w"> </span><span class="kt">Object.keys</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">)</span>
<a id="__codelineno-75-57" name="__codelineno-75-57"></a><span class="w">          </span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">key</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="sb">`</span><span class="si">${</span><span class="nx">key</span><span class="si">}</span><span class="sb">=</span><span class="si">${</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
<a id="__codelineno-75-58" name="__codelineno-75-58"></a><span class="w">          </span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;&amp;&#39;</span><span class="p">),</span>
<a id="__codelineno-75-59" name="__codelineno-75-59"></a><span class="w">      </span><span class="p">};</span>
<a id="__codelineno-75-60" name="__codelineno-75-60"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-75-61" name="__codelineno-75-61"></a><span class="w">  </span><span class="p">)</span>
<a id="__codelineno-75-62" name="__codelineno-75-62"></a><span class="w">  </span><span class="kd">@authorize</span><span class="p">([</span><span class="s1">&#39;*&#39;</span><span class="p">])</span>
<a id="__codelineno-75-63" name="__codelineno-75-63"></a><span class="w">  </span><span class="kd">@get</span><span class="p">(</span><span class="s1">&#39;/auth/apple-oauth-redirect&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-75-64" name="__codelineno-75-64"></a><span class="w">    </span><span class="nx">responses</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-75-65" name="__codelineno-75-65"></a><span class="w">      </span><span class="p">[</span><span class="nx">STATUS_CODE</span><span class="p">.</span><span class="nx">OK</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-75-66" name="__codelineno-75-66"></a><span class="w">        </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Token Response&#39;</span><span class="p">,</span>
<a id="__codelineno-75-67" name="__codelineno-75-67"></a><span class="w">        </span><span class="nx">content</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-75-68" name="__codelineno-75-68"></a><span class="w">          </span><span class="p">[</span><span class="nx">CONTENT_TYPE</span><span class="p">.</span><span class="nb">JSON</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-75-69" name="__codelineno-75-69"></a><span class="w">            </span><span class="nx">schema</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="s1">&#39;x-ts-type&#39;</span><span class="o">:</span><span class="w"> </span><span class="nx">TokenResponse</span><span class="p">},</span>
<a id="__codelineno-75-70" name="__codelineno-75-70"></a><span class="w">          </span><span class="p">},</span>
<a id="__codelineno-75-71" name="__codelineno-75-71"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-75-72" name="__codelineno-75-72"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-75-73" name="__codelineno-75-73"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-75-74" name="__codelineno-75-74"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-75-75" name="__codelineno-75-75"></a><span class="w">  </span><span class="k">async</span><span class="w"> </span><span class="nx">appleCallback</span><span class="p">(</span>
<a id="__codelineno-75-76" name="__codelineno-75-76"></a><span class="w">    </span><span class="kd">@param</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="kt">string</span><span class="p">(</span><span class="s1">&#39;code&#39;</span><span class="p">)</span><span class="w"> </span><span class="nx">code</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span>
<a id="__codelineno-75-77" name="__codelineno-75-77"></a><span class="w">    </span><span class="kd">@param</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="kt">string</span><span class="p">(</span><span class="s1">&#39;state&#39;</span><span class="p">)</span><span class="w"> </span><span class="nx">state</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span>
<a id="__codelineno-75-78" name="__codelineno-75-78"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">RestBindings</span><span class="p">.</span><span class="nx">Http</span><span class="p">.</span><span class="nx">RESPONSE</span><span class="p">)</span><span class="w"> </span><span class="nx">response</span><span class="o">:</span><span class="w"> </span><span class="kt">Response</span><span class="p">,</span>
<a id="__codelineno-75-79" name="__codelineno-75-79"></a><span class="w">  </span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nb">Promise</span><span class="o">&lt;</span><span class="ow">void</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-75-80" name="__codelineno-75-80"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">clientId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">URLSearchParams</span><span class="p">(</span><span class="nx">state</span><span class="p">).</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;client_id&#39;</span><span class="p">);</span>
<a id="__codelineno-75-81" name="__codelineno-75-81"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">clientId</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">user</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-75-82" name="__codelineno-75-82"></a><span class="w">      </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">HttpErrors</span><span class="p">.</span><span class="nx">Unauthorized</span><span class="p">(</span><span class="nx">AuthErrorKeys</span><span class="p">.</span><span class="nx">ClientInvalid</span><span class="p">);</span>
<a id="__codelineno-75-83" name="__codelineno-75-83"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-75-84" name="__codelineno-75-84"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">authClientRepository</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span>
<a id="__codelineno-75-85" name="__codelineno-75-85"></a><span class="w">      </span><span class="nx">where</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-75-86" name="__codelineno-75-86"></a><span class="w">        </span><span class="nx">clientId</span><span class="o">:</span><span class="w"> </span><span class="kt">clientId</span><span class="p">,</span>
<a id="__codelineno-75-87" name="__codelineno-75-87"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-75-88" name="__codelineno-75-88"></a><span class="w">    </span><span class="p">});</span>
<a id="__codelineno-75-89" name="__codelineno-75-89"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">client</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">!</span><span class="nx">client</span><span class="p">.</span><span class="nx">redirectUrl</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-75-90" name="__codelineno-75-90"></a><span class="w">      </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">HttpErrors</span><span class="p">.</span><span class="nx">Unauthorized</span><span class="p">(</span><span class="nx">AuthErrorKeys</span><span class="p">.</span><span class="nx">ClientInvalid</span><span class="p">);</span>
<a id="__codelineno-75-91" name="__codelineno-75-91"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-75-92" name="__codelineno-75-92"></a><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-75-93" name="__codelineno-75-93"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">codePayload</span><span class="o">:</span><span class="w"> </span><span class="kt">ClientAuthCode</span><span class="o">&lt;</span><span class="nx">User</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-75-94" name="__codelineno-75-94"></a><span class="w">        </span><span class="nx">clientId</span><span class="p">,</span>
<a id="__codelineno-75-95" name="__codelineno-75-95"></a><span class="w">        </span><span class="nx">user</span><span class="o">:</span><span class="w"> </span><span class="kt">this.user</span><span class="p">,</span>
<a id="__codelineno-75-96" name="__codelineno-75-96"></a><span class="w">      </span><span class="p">};</span>
<a id="__codelineno-75-97" name="__codelineno-75-97"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">jwt</span><span class="p">.</span><span class="nx">sign</span><span class="p">(</span><span class="nx">codePayload</span><span class="p">,</span><span class="w"> </span><span class="nx">client</span><span class="p">.</span><span class="nx">secret</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-75-98" name="__codelineno-75-98"></a><span class="w">        </span><span class="nx">expiresIn</span><span class="o">:</span><span class="w"> </span><span class="kt">client.authCodeExpiration</span><span class="p">,</span>
<a id="__codelineno-75-99" name="__codelineno-75-99"></a><span class="w">        </span><span class="nx">audience</span><span class="o">:</span><span class="w"> </span><span class="kt">clientId</span><span class="p">,</span>
<a id="__codelineno-75-100" name="__codelineno-75-100"></a><span class="w">        </span><span class="nx">subject</span><span class="o">:</span><span class="w"> </span><span class="kt">this.user.username</span><span class="p">,</span>
<a id="__codelineno-75-101" name="__codelineno-75-101"></a><span class="w">        </span><span class="nx">issuer</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.JWT_ISSUER</span><span class="p">,</span>
<a id="__codelineno-75-102" name="__codelineno-75-102"></a><span class="w">      </span><span class="p">});</span>
<a id="__codelineno-75-103" name="__codelineno-75-103"></a><span class="w">      </span><span class="nx">response</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">client</span><span class="p">.</span><span class="nx">redirectUrl</span><span class="si">}</span><span class="sb">?code=</span><span class="si">${</span><span class="nx">token</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<a id="__codelineno-75-104" name="__codelineno-75-104"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-75-105" name="__codelineno-75-105"></a><span class="w">      </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">HttpErrors</span><span class="p">.</span><span class="nx">InternalServerError</span><span class="p">(</span><span class="nx">AuthErrorKeys</span><span class="p">.</span><span class="nx">UnknownError</span><span class="p">);</span>
<a id="__codelineno-75-106" name="__codelineno-75-106"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-75-107" name="__codelineno-75-107"></a><span class="w">  </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Please note above that we are creating two new APIs for apple auth. The first one is for UI clients to hit. We are authenticating client as well, then passing the details to the apple auth. Then, the actual authentication is done by apple authorization url, which redirects to the second API we created after success. The first API method body is empty as we do not need to handle its response. The apple auth provider in this package will do the redirection for you automatically.</p>
<p>For accessing the authenticated AuthUser model reference, you can inject the CURRENT_USER provider, provided by the extension, which is populated by the auth action sequence above.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-76-1">1</a></span>
<span class="normal"><a href="#__codelineno-76-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-76-1" name="__codelineno-76-1"></a><span class="w">  </span><span class="kd">@inject</span><span class="p">.</span><span class="nx">getter</span><span class="p">(</span><span class="nx">AuthenticationBindings</span><span class="p">.</span><span class="nx">CURRENT_USER</span><span class="p">)</span>
<a id="__codelineno-76-2" name="__codelineno-76-2"></a><span class="w">  </span><span class="k">private</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="nx">getCurrentUser</span><span class="o">:</span><span class="w"> </span><span class="kt">Getter</span><span class="o">&lt;</span><span class="nx">User</span><span class="o">&gt;</span><span class="p">,</span>
</code></pre></div></td></tr></table></div>
<h3 id="facebook-oauth-2">Facebook Oauth 2<a class="headerlink" href="#facebook-oauth-2" title="Permanent link">&para;</a></h3>
<p>In order to use it, run <code>npm install passport-facebook</code>.
First, create a AuthUser model implementing the IAuthUser interface. You can implement the interface in the user model itself. See sample below.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-77-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-77-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-77-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-77-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-77-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-77-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-77-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-77-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-77-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-77-10">10</a></span>
<span class="normal"><a href="#__codelineno-77-11">11</a></span>
<span class="normal"><a href="#__codelineno-77-12">12</a></span>
<span class="normal"><a href="#__codelineno-77-13">13</a></span>
<span class="normal"><a href="#__codelineno-77-14">14</a></span>
<span class="normal"><a href="#__codelineno-77-15">15</a></span>
<span class="normal"><a href="#__codelineno-77-16">16</a></span>
<span class="normal"><a href="#__codelineno-77-17">17</a></span>
<span class="normal"><a href="#__codelineno-77-18">18</a></span>
<span class="normal"><a href="#__codelineno-77-19">19</a></span>
<span class="normal"><a href="#__codelineno-77-20">20</a></span>
<span class="normal"><a href="#__codelineno-77-21">21</a></span>
<span class="normal"><a href="#__codelineno-77-22">22</a></span>
<span class="normal"><a href="#__codelineno-77-23">23</a></span>
<span class="normal"><a href="#__codelineno-77-24">24</a></span>
<span class="normal"><a href="#__codelineno-77-25">25</a></span>
<span class="normal"><a href="#__codelineno-77-26">26</a></span>
<span class="normal"><a href="#__codelineno-77-27">27</a></span>
<span class="normal"><a href="#__codelineno-77-28">28</a></span>
<span class="normal"><a href="#__codelineno-77-29">29</a></span>
<span class="normal"><a href="#__codelineno-77-30">30</a></span>
<span class="normal"><a href="#__codelineno-77-31">31</a></span>
<span class="normal"><a href="#__codelineno-77-32">32</a></span>
<span class="normal"><a href="#__codelineno-77-33">33</a></span>
<span class="normal"><a href="#__codelineno-77-34">34</a></span>
<span class="normal"><a href="#__codelineno-77-35">35</a></span>
<span class="normal"><a href="#__codelineno-77-36">36</a></span>
<span class="normal"><a href="#__codelineno-77-37">37</a></span>
<span class="normal"><a href="#__codelineno-77-38">38</a></span>
<span class="normal"><a href="#__codelineno-77-39">39</a></span>
<span class="normal"><a href="#__codelineno-77-40">40</a></span>
<span class="normal"><a href="#__codelineno-77-41">41</a></span>
<span class="normal"><a href="#__codelineno-77-42">42</a></span>
<span class="normal"><a href="#__codelineno-77-43">43</a></span>
<span class="normal"><a href="#__codelineno-77-44">44</a></span>
<span class="normal"><a href="#__codelineno-77-45">45</a></span>
<span class="normal"><a href="#__codelineno-77-46">46</a></span>
<span class="normal"><a href="#__codelineno-77-47">47</a></span>
<span class="normal"><a href="#__codelineno-77-48">48</a></span>
<span class="normal"><a href="#__codelineno-77-49">49</a></span>
<span class="normal"><a href="#__codelineno-77-50">50</a></span>
<span class="normal"><a href="#__codelineno-77-51">51</a></span>
<span class="normal"><a href="#__codelineno-77-52">52</a></span>
<span class="normal"><a href="#__codelineno-77-53">53</a></span>
<span class="normal"><a href="#__codelineno-77-54">54</a></span>
<span class="normal"><a href="#__codelineno-77-55">55</a></span>
<span class="normal"><a href="#__codelineno-77-56">56</a></span>
<span class="normal"><a href="#__codelineno-77-57">57</a></span>
<span class="normal"><a href="#__codelineno-77-58">58</a></span>
<span class="normal"><a href="#__codelineno-77-59">59</a></span>
<span class="normal"><a href="#__codelineno-77-60">60</a></span>
<span class="normal"><a href="#__codelineno-77-61">61</a></span>
<span class="normal"><a href="#__codelineno-77-62">62</a></span>
<span class="normal"><a href="#__codelineno-77-63">63</a></span>
<span class="normal"><a href="#__codelineno-77-64">64</a></span>
<span class="normal"><a href="#__codelineno-77-65">65</a></span>
<span class="normal"><a href="#__codelineno-77-66">66</a></span>
<span class="normal"><a href="#__codelineno-77-67">67</a></span>
<span class="normal"><a href="#__codelineno-77-68">68</a></span>
<span class="normal"><a href="#__codelineno-77-69">69</a></span>
<span class="normal"><a href="#__codelineno-77-70">70</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-77-1" name="__codelineno-77-1"></a><span class="kd">@model</span><span class="p">({</span>
<a id="__codelineno-77-2" name="__codelineno-77-2"></a><span class="w">  </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;users&#39;</span><span class="p">,</span>
<a id="__codelineno-77-3" name="__codelineno-77-3"></a><span class="p">})</span>
<a id="__codelineno-77-4" name="__codelineno-77-4"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">User</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">Entity</span><span class="w"> </span><span class="k">implements</span><span class="w"> </span><span class="nx">IAuthUser</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-77-5" name="__codelineno-77-5"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-77-6" name="__codelineno-77-6"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;number&#39;</span><span class="p">,</span>
<a id="__codelineno-77-7" name="__codelineno-77-7"></a><span class="w">    </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<a id="__codelineno-77-8" name="__codelineno-77-8"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-77-9" name="__codelineno-77-9"></a><span class="w">  </span><span class="nx">id?</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">;</span>
<a id="__codelineno-77-10" name="__codelineno-77-10"></a>
<a id="__codelineno-77-11" name="__codelineno-77-11"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-77-12" name="__codelineno-77-12"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-77-13" name="__codelineno-77-13"></a><span class="w">    </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<a id="__codelineno-77-14" name="__codelineno-77-14"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;first_name&#39;</span><span class="p">,</span>
<a id="__codelineno-77-15" name="__codelineno-77-15"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-77-16" name="__codelineno-77-16"></a><span class="w">  </span><span class="nx">firstName</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-77-17" name="__codelineno-77-17"></a>
<a id="__codelineno-77-18" name="__codelineno-77-18"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-77-19" name="__codelineno-77-19"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-77-20" name="__codelineno-77-20"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;last_name&#39;</span><span class="p">,</span>
<a id="__codelineno-77-21" name="__codelineno-77-21"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-77-22" name="__codelineno-77-22"></a><span class="w">  </span><span class="nx">lastName</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-77-23" name="__codelineno-77-23"></a>
<a id="__codelineno-77-24" name="__codelineno-77-24"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-77-25" name="__codelineno-77-25"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-77-26" name="__codelineno-77-26"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;middle_name&#39;</span><span class="p">,</span>
<a id="__codelineno-77-27" name="__codelineno-77-27"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-77-28" name="__codelineno-77-28"></a><span class="w">  </span><span class="nx">middleName?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-77-29" name="__codelineno-77-29"></a>
<a id="__codelineno-77-30" name="__codelineno-77-30"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-77-31" name="__codelineno-77-31"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-77-32" name="__codelineno-77-32"></a><span class="w">    </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<a id="__codelineno-77-33" name="__codelineno-77-33"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-77-34" name="__codelineno-77-34"></a><span class="w">  </span><span class="nx">username</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-77-35" name="__codelineno-77-35"></a>
<a id="__codelineno-77-36" name="__codelineno-77-36"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-77-37" name="__codelineno-77-37"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-77-38" name="__codelineno-77-38"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-77-39" name="__codelineno-77-39"></a><span class="w">  </span><span class="nx">email?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-77-40" name="__codelineno-77-40"></a>
<a id="__codelineno-77-41" name="__codelineno-77-41"></a><span class="w">  </span><span class="c1">// Auth provider - &#39;facebook&#39;</span>
<a id="__codelineno-77-42" name="__codelineno-77-42"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-77-43" name="__codelineno-77-43"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-77-44" name="__codelineno-77-44"></a><span class="w">    </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<a id="__codelineno-77-45" name="__codelineno-77-45"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;auth_provider&#39;</span><span class="p">,</span>
<a id="__codelineno-77-46" name="__codelineno-77-46"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-77-47" name="__codelineno-77-47"></a><span class="w">  </span><span class="nx">authProvider</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-77-48" name="__codelineno-77-48"></a>
<a id="__codelineno-77-49" name="__codelineno-77-49"></a><span class="w">  </span><span class="c1">// Id from external provider</span>
<a id="__codelineno-77-50" name="__codelineno-77-50"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-77-51" name="__codelineno-77-51"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-77-52" name="__codelineno-77-52"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;auth_id&#39;</span><span class="p">,</span>
<a id="__codelineno-77-53" name="__codelineno-77-53"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-77-54" name="__codelineno-77-54"></a><span class="w">  </span><span class="nx">authId?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-77-55" name="__codelineno-77-55"></a>
<a id="__codelineno-77-56" name="__codelineno-77-56"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-77-57" name="__codelineno-77-57"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-77-58" name="__codelineno-77-58"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;auth_token&#39;</span><span class="p">,</span>
<a id="__codelineno-77-59" name="__codelineno-77-59"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-77-60" name="__codelineno-77-60"></a><span class="w">  </span><span class="nx">authToken?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-77-61" name="__codelineno-77-61"></a>
<a id="__codelineno-77-62" name="__codelineno-77-62"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-77-63" name="__codelineno-77-63"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-77-64" name="__codelineno-77-64"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-77-65" name="__codelineno-77-65"></a><span class="w">  </span><span class="nx">password?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-77-66" name="__codelineno-77-66"></a>
<a id="__codelineno-77-67" name="__codelineno-77-67"></a><span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">data?</span><span class="o">:</span><span class="w"> </span><span class="kt">Partial</span><span class="o">&lt;</span><span class="nx">User</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-77-68" name="__codelineno-77-68"></a><span class="w">    </span><span class="k">super</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<a id="__codelineno-77-69" name="__codelineno-77-69"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-77-70" name="__codelineno-77-70"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Now bind this model to USER_MODEL key in application.ts</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-78-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-78-1" name="__codelineno-78-1"></a><span class="k">this</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">AuthenticationBindings</span><span class="p">.</span><span class="nx">USER_MODEL</span><span class="p">).</span><span class="nx">to</span><span class="p">(</span><span class="nx">User</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>Create CRUD repository for the above model. Use loopback CLI.</p>
<div class="language-sh highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-79-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-79-1" name="__codelineno-79-1"></a>lb4<span class="w"> </span>repository
</code></pre></div></td></tr></table></div>
<p>Add the verifier function for the strategy. You need to create a provider for the same. You can add your application specific business logic for client auth here. Here is a simple example.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-80-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-80-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-80-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-80-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-80-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-80-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-80-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-80-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-80-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-80-10">10</a></span>
<span class="normal"><a href="#__codelineno-80-11">11</a></span>
<span class="normal"><a href="#__codelineno-80-12">12</a></span>
<span class="normal"><a href="#__codelineno-80-13">13</a></span>
<span class="normal"><a href="#__codelineno-80-14">14</a></span>
<span class="normal"><a href="#__codelineno-80-15">15</a></span>
<span class="normal"><a href="#__codelineno-80-16">16</a></span>
<span class="normal"><a href="#__codelineno-80-17">17</a></span>
<span class="normal"><a href="#__codelineno-80-18">18</a></span>
<span class="normal"><a href="#__codelineno-80-19">19</a></span>
<span class="normal"><a href="#__codelineno-80-20">20</a></span>
<span class="normal"><a href="#__codelineno-80-21">21</a></span>
<span class="normal"><a href="#__codelineno-80-22">22</a></span>
<span class="normal"><a href="#__codelineno-80-23">23</a></span>
<span class="normal"><a href="#__codelineno-80-24">24</a></span>
<span class="normal"><a href="#__codelineno-80-25">25</a></span>
<span class="normal"><a href="#__codelineno-80-26">26</a></span>
<span class="normal"><a href="#__codelineno-80-27">27</a></span>
<span class="normal"><a href="#__codelineno-80-28">28</a></span>
<span class="normal"><a href="#__codelineno-80-29">29</a></span>
<span class="normal"><a href="#__codelineno-80-30">30</a></span>
<span class="normal"><a href="#__codelineno-80-31">31</a></span>
<span class="normal"><a href="#__codelineno-80-32">32</a></span>
<span class="normal"><a href="#__codelineno-80-33">33</a></span>
<span class="normal"><a href="#__codelineno-80-34">34</a></span>
<span class="normal"><a href="#__codelineno-80-35">35</a></span>
<span class="normal"><a href="#__codelineno-80-36">36</a></span>
<span class="normal"><a href="#__codelineno-80-37">37</a></span>
<span class="normal"><a href="#__codelineno-80-38">38</a></span>
<span class="normal"><a href="#__codelineno-80-39">39</a></span>
<span class="normal"><a href="#__codelineno-80-40">40</a></span>
<span class="normal"><a href="#__codelineno-80-41">41</a></span>
<span class="normal"><a href="#__codelineno-80-42">42</a></span>
<span class="normal"><a href="#__codelineno-80-43">43</a></span>
<span class="normal"><a href="#__codelineno-80-44">44</a></span>
<span class="normal"><a href="#__codelineno-80-45">45</a></span>
<span class="normal"><a href="#__codelineno-80-46">46</a></span>
<span class="normal"><a href="#__codelineno-80-47">47</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-80-1" name="__codelineno-80-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">Provider</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@loopback/context&#39;</span><span class="p">;</span>
<a id="__codelineno-80-2" name="__codelineno-80-2"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">repository</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@loopback/repository&#39;</span><span class="p">;</span>
<a id="__codelineno-80-3" name="__codelineno-80-3"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">HttpErrors</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@loopback/rest&#39;</span><span class="p">;</span>
<a id="__codelineno-80-4" name="__codelineno-80-4"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">AuthErrorKeys</span><span class="p">,</span><span class="w"> </span><span class="nx">VerifyFunction</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;loopback4-authentication&#39;</span><span class="p">;</span>
<a id="__codelineno-80-5" name="__codelineno-80-5"></a>
<a id="__codelineno-80-6" name="__codelineno-80-6"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">Tenant</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../../../models&#39;</span><span class="p">;</span>
<a id="__codelineno-80-7" name="__codelineno-80-7"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">UserCredentialsRepository</span><span class="p">,</span><span class="w"> </span><span class="nx">UserRepository</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../../../repositories&#39;</span><span class="p">;</span>
<a id="__codelineno-80-8" name="__codelineno-80-8"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">AuthUser</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../models/auth-user.model&#39;</span><span class="p">;</span>
<a id="__codelineno-80-9" name="__codelineno-80-9"></a>
<a id="__codelineno-80-10" name="__codelineno-80-10"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">FacebookOauth2VerifyProvider</span>
<a id="__codelineno-80-11" name="__codelineno-80-11"></a><span class="w">  </span><span class="k">implements</span><span class="w"> </span><span class="nx">Provider</span><span class="o">&lt;</span><span class="nx">VerifyFunction</span><span class="p">.</span><span class="nx">FacebookAuthFn</span><span class="o">&gt;</span>
<a id="__codelineno-80-12" name="__codelineno-80-12"></a><span class="p">{</span>
<a id="__codelineno-80-13" name="__codelineno-80-13"></a><span class="w">  </span><span class="kr">constructor</span><span class="p">(</span>
<a id="__codelineno-80-14" name="__codelineno-80-14"></a><span class="w">    </span><span class="kd">@repository</span><span class="p">(</span><span class="nx">UserRepository</span><span class="p">)</span>
<a id="__codelineno-80-15" name="__codelineno-80-15"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nx">userRepository</span><span class="o">:</span><span class="w"> </span><span class="kt">UserRepository</span><span class="p">,</span>
<a id="__codelineno-80-16" name="__codelineno-80-16"></a><span class="w">    </span><span class="kd">@repository</span><span class="p">(</span><span class="nx">UserCredentialsRepository</span><span class="p">)</span>
<a id="__codelineno-80-17" name="__codelineno-80-17"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nx">userCredsRepository</span><span class="o">:</span><span class="w"> </span><span class="kt">UserCredentialsRepository</span><span class="p">,</span>
<a id="__codelineno-80-18" name="__codelineno-80-18"></a><span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-80-19" name="__codelineno-80-19"></a>
<a id="__codelineno-80-20" name="__codelineno-80-20"></a><span class="w">  </span><span class="nx">value</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">VerifyFunction</span><span class="p">.</span><span class="nx">FacebookAuthFn</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-80-21" name="__codelineno-80-21"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">(</span><span class="nx">accessToken</span><span class="p">,</span><span class="w"> </span><span class="nx">refreshToken</span><span class="p">,</span><span class="w"> </span><span class="nx">profile</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-80-22" name="__codelineno-80-22"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">userRepository</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span>
<a id="__codelineno-80-23" name="__codelineno-80-23"></a><span class="w">        </span><span class="nx">where</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-80-24" name="__codelineno-80-24"></a><span class="w">          </span><span class="cm">/* eslint-disable-next-line @typescript-eslint/no-explicit-any */</span>
<a id="__codelineno-80-25" name="__codelineno-80-25"></a><span class="w">          </span><span class="nx">email</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">profile</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">any</span><span class="p">).</span><span class="nx">_json</span><span class="p">.</span><span class="nx">email</span><span class="p">,</span>
<a id="__codelineno-80-26" name="__codelineno-80-26"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-80-27" name="__codelineno-80-27"></a><span class="w">      </span><span class="p">});</span>
<a id="__codelineno-80-28" name="__codelineno-80-28"></a><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">user</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-80-29" name="__codelineno-80-29"></a><span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">HttpErrors</span><span class="p">.</span><span class="nx">Unauthorized</span><span class="p">(</span><span class="nx">AuthErrorKeys</span><span class="p">.</span><span class="nx">InvalidCredentials</span><span class="p">);</span>
<a id="__codelineno-80-30" name="__codelineno-80-30"></a><span class="w">      </span><span class="p">}</span>
<a id="__codelineno-80-31" name="__codelineno-80-31"></a><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-80-32" name="__codelineno-80-32"></a><span class="w">        </span><span class="o">!</span><span class="nx">user</span><span class="w"> </span><span class="o">||</span>
<a id="__codelineno-80-33" name="__codelineno-80-33"></a><span class="w">        </span><span class="nx">user</span><span class="p">.</span><span class="nx">authProvider</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="s1">&#39;facebook&#39;</span><span class="w"> </span><span class="o">||</span>
<a id="__codelineno-80-34" name="__codelineno-80-34"></a><span class="w">        </span><span class="nx">user</span><span class="p">.</span><span class="nx">authId</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="nx">profile</span><span class="p">.</span><span class="nx">id</span>
<a id="__codelineno-80-35" name="__codelineno-80-35"></a><span class="w">      </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-80-36" name="__codelineno-80-36"></a><span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">HttpErrors</span><span class="p">.</span><span class="nx">Unauthorized</span><span class="p">(</span><span class="nx">AuthErrorKeys</span><span class="p">.</span><span class="nx">InvalidCredentials</span><span class="p">);</span>
<a id="__codelineno-80-37" name="__codelineno-80-37"></a><span class="w">      </span><span class="p">}</span>
<a id="__codelineno-80-38" name="__codelineno-80-38"></a>
<a id="__codelineno-80-39" name="__codelineno-80-39"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">authUser</span><span class="o">:</span><span class="w"> </span><span class="kt">AuthUser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">AuthUser</span><span class="p">(</span><span class="nx">user</span><span class="p">);</span>
<a id="__codelineno-80-40" name="__codelineno-80-40"></a><span class="w">      </span><span class="nx">authUser</span><span class="p">.</span><span class="nx">permissions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
<a id="__codelineno-80-41" name="__codelineno-80-41"></a><span class="w">      </span><span class="nx">authUser</span><span class="p">.</span><span class="nx">externalAuthToken</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">accessToken</span><span class="p">;</span>
<a id="__codelineno-80-42" name="__codelineno-80-42"></a><span class="w">      </span><span class="nx">authUser</span><span class="p">.</span><span class="nx">externalRefreshToken</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">refreshToken</span><span class="p">;</span>
<a id="__codelineno-80-43" name="__codelineno-80-43"></a><span class="w">      </span><span class="nx">authUser</span><span class="p">.</span><span class="nx">tenant</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Tenant</span><span class="p">({</span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="kt">user.defaultTenant</span><span class="p">});</span>
<a id="__codelineno-80-44" name="__codelineno-80-44"></a><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="nx">authUser</span><span class="p">;</span>
<a id="__codelineno-80-45" name="__codelineno-80-45"></a><span class="w">    </span><span class="p">};</span>
<a id="__codelineno-80-46" name="__codelineno-80-46"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-80-47" name="__codelineno-80-47"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Please note the Verify function type <em>VerifyFunction.LocalPasswordFn</em></p>
<p>Now bind this provider to the application in application.ts.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-81-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-81-1" name="__codelineno-81-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">AuthenticationComponent</span><span class="p">,</span><span class="w"> </span><span class="nx">Strategies</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;loopback4-authentication&#39;</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-82-1">1</a></span>
<span class="normal"><a href="#__codelineno-82-2">2</a></span>
<span class="normal"><a href="#__codelineno-82-3">3</a></span>
<span class="normal"><a href="#__codelineno-82-4">4</a></span>
<span class="normal"><a href="#__codelineno-82-5">5</a></span>
<span class="normal"><a href="#__codelineno-82-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-82-1" name="__codelineno-82-1"></a><span class="c1">// Add authentication component</span>
<a id="__codelineno-82-2" name="__codelineno-82-2"></a><span class="k">this</span><span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="nx">AuthenticationComponent</span><span class="p">);</span>
<a id="__codelineno-82-3" name="__codelineno-82-3"></a><span class="c1">// Customize authentication verify handlers</span>
<a id="__codelineno-82-4" name="__codelineno-82-4"></a><span class="k">this</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">Strategies</span><span class="p">.</span><span class="nx">Passport</span><span class="p">.</span><span class="nx">FACEBOOK_OAUTH2_VERIFIER</span><span class="p">).</span><span class="nx">toProvider</span><span class="p">(</span>
<a id="__codelineno-82-5" name="__codelineno-82-5"></a><span class="w">  </span><span class="nx">FacebookOauth2VerifyProvider</span><span class="p">,</span>
<a id="__codelineno-82-6" name="__codelineno-82-6"></a><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>Finally, add the authenticate function as a sequence action to sequence.ts.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-83-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-83-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-83-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-83-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-83-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-83-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-83-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-83-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-83-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-83-10">10</a></span>
<span class="normal"><a href="#__codelineno-83-11">11</a></span>
<span class="normal"><a href="#__codelineno-83-12">12</a></span>
<span class="normal"><a href="#__codelineno-83-13">13</a></span>
<span class="normal"><a href="#__codelineno-83-14">14</a></span>
<span class="normal"><a href="#__codelineno-83-15">15</a></span>
<span class="normal"><a href="#__codelineno-83-16">16</a></span>
<span class="normal"><a href="#__codelineno-83-17">17</a></span>
<span class="normal"><a href="#__codelineno-83-18">18</a></span>
<span class="normal"><a href="#__codelineno-83-19">19</a></span>
<span class="normal"><a href="#__codelineno-83-20">20</a></span>
<span class="normal"><a href="#__codelineno-83-21">21</a></span>
<span class="normal"><a href="#__codelineno-83-22">22</a></span>
<span class="normal"><a href="#__codelineno-83-23">23</a></span>
<span class="normal"><a href="#__codelineno-83-24">24</a></span>
<span class="normal"><a href="#__codelineno-83-25">25</a></span>
<span class="normal"><a href="#__codelineno-83-26">26</a></span>
<span class="normal"><a href="#__codelineno-83-27">27</a></span>
<span class="normal"><a href="#__codelineno-83-28">28</a></span>
<span class="normal"><a href="#__codelineno-83-29">29</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-83-1" name="__codelineno-83-1"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">MySequence</span><span class="w"> </span><span class="k">implements</span><span class="w"> </span><span class="nx">SequenceHandler</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-83-2" name="__codelineno-83-2"></a><span class="w">  </span><span class="kr">constructor</span><span class="p">(</span>
<a id="__codelineno-83-3" name="__codelineno-83-3"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">FIND_ROUTE</span><span class="p">)</span><span class="w"> </span><span class="k">protected</span><span class="w"> </span><span class="nx">findRoute</span><span class="o">:</span><span class="w"> </span><span class="kt">FindRoute</span><span class="p">,</span>
<a id="__codelineno-83-4" name="__codelineno-83-4"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">PARSE_PARAMS</span><span class="p">)</span><span class="w"> </span><span class="k">protected</span><span class="w"> </span><span class="nx">parseParams</span><span class="o">:</span><span class="w"> </span><span class="kt">ParseParams</span><span class="p">,</span>
<a id="__codelineno-83-5" name="__codelineno-83-5"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">INVOKE_METHOD</span><span class="p">)</span><span class="w"> </span><span class="k">protected</span><span class="w"> </span><span class="nx">invoke</span><span class="o">:</span><span class="w"> </span><span class="kt">InvokeMethod</span><span class="p">,</span>
<a id="__codelineno-83-6" name="__codelineno-83-6"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">SEND</span><span class="p">)</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="nx">send</span><span class="o">:</span><span class="w"> </span><span class="kt">Send</span><span class="p">,</span>
<a id="__codelineno-83-7" name="__codelineno-83-7"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">REJECT</span><span class="p">)</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="nx">reject</span><span class="o">:</span><span class="w"> </span><span class="kt">Reject</span><span class="p">,</span>
<a id="__codelineno-83-8" name="__codelineno-83-8"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">AuthenticationBindings</span><span class="p">.</span><span class="nx">USER_AUTH_ACTION</span><span class="p">)</span>
<a id="__codelineno-83-9" name="__codelineno-83-9"></a><span class="w">    </span><span class="k">protected</span><span class="w"> </span><span class="nx">authenticateRequest</span><span class="o">:</span><span class="w"> </span><span class="kt">AuthenticateFn</span><span class="o">&lt;</span><span class="nx">AuthUser</span><span class="o">&gt;</span><span class="p">,</span>
<a id="__codelineno-83-10" name="__codelineno-83-10"></a><span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-83-11" name="__codelineno-83-11"></a>
<a id="__codelineno-83-12" name="__codelineno-83-12"></a><span class="w">  </span><span class="k">async</span><span class="w"> </span><span class="nx">handle</span><span class="p">(</span><span class="nx">context</span><span class="o">:</span><span class="w"> </span><span class="kt">RequestContext</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-83-13" name="__codelineno-83-13"></a><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-83-14" name="__codelineno-83-14"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="nx">request</span><span class="p">,</span><span class="w"> </span><span class="nx">response</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">context</span><span class="p">;</span>
<a id="__codelineno-83-15" name="__codelineno-83-15"></a>
<a id="__codelineno-83-16" name="__codelineno-83-16"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">route</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">findRoute</span><span class="p">(</span><span class="nx">request</span><span class="p">);</span>
<a id="__codelineno-83-17" name="__codelineno-83-17"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">parseParams</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span><span class="w"> </span><span class="nx">route</span><span class="p">);</span>
<a id="__codelineno-83-18" name="__codelineno-83-18"></a><span class="w">      </span><span class="nx">request</span><span class="p">.</span><span class="nx">body</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">args</span><span class="p">[</span><span class="nx">args</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">];</span>
<a id="__codelineno-83-19" name="__codelineno-83-19"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">authUser</span><span class="o">:</span><span class="w"> </span><span class="kt">AuthUser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">authenticateRequest</span><span class="p">(</span>
<a id="__codelineno-83-20" name="__codelineno-83-20"></a><span class="w">        </span><span class="nx">request</span><span class="p">,</span>
<a id="__codelineno-83-21" name="__codelineno-83-21"></a><span class="w">        </span><span class="nx">response</span><span class="p">,</span>
<a id="__codelineno-83-22" name="__codelineno-83-22"></a><span class="w">      </span><span class="p">);</span>
<a id="__codelineno-83-23" name="__codelineno-83-23"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">invoke</span><span class="p">(</span><span class="nx">route</span><span class="p">,</span><span class="w"> </span><span class="nx">args</span><span class="p">);</span>
<a id="__codelineno-83-24" name="__codelineno-83-24"></a><span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">response</span><span class="p">,</span><span class="w"> </span><span class="nx">result</span><span class="p">);</span>
<a id="__codelineno-83-25" name="__codelineno-83-25"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-83-26" name="__codelineno-83-26"></a><span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">reject</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">);</span>
<a id="__codelineno-83-27" name="__codelineno-83-27"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-83-28" name="__codelineno-83-28"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-83-29" name="__codelineno-83-29"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>After this, you can use decorator to apply auth to controller functions wherever needed. See below.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-84-1">  1</a></span>
<span class="normal"><a href="#__codelineno-84-2">  2</a></span>
<span class="normal"><a href="#__codelineno-84-3">  3</a></span>
<span class="normal"><a href="#__codelineno-84-4">  4</a></span>
<span class="normal"><a href="#__codelineno-84-5">  5</a></span>
<span class="normal"><a href="#__codelineno-84-6">  6</a></span>
<span class="normal"><a href="#__codelineno-84-7">  7</a></span>
<span class="normal"><a href="#__codelineno-84-8">  8</a></span>
<span class="normal"><a href="#__codelineno-84-9">  9</a></span>
<span class="normal"><a href="#__codelineno-84-10"> 10</a></span>
<span class="normal"><a href="#__codelineno-84-11"> 11</a></span>
<span class="normal"><a href="#__codelineno-84-12"> 12</a></span>
<span class="normal"><a href="#__codelineno-84-13"> 13</a></span>
<span class="normal"><a href="#__codelineno-84-14"> 14</a></span>
<span class="normal"><a href="#__codelineno-84-15"> 15</a></span>
<span class="normal"><a href="#__codelineno-84-16"> 16</a></span>
<span class="normal"><a href="#__codelineno-84-17"> 17</a></span>
<span class="normal"><a href="#__codelineno-84-18"> 18</a></span>
<span class="normal"><a href="#__codelineno-84-19"> 19</a></span>
<span class="normal"><a href="#__codelineno-84-20"> 20</a></span>
<span class="normal"><a href="#__codelineno-84-21"> 21</a></span>
<span class="normal"><a href="#__codelineno-84-22"> 22</a></span>
<span class="normal"><a href="#__codelineno-84-23"> 23</a></span>
<span class="normal"><a href="#__codelineno-84-24"> 24</a></span>
<span class="normal"><a href="#__codelineno-84-25"> 25</a></span>
<span class="normal"><a href="#__codelineno-84-26"> 26</a></span>
<span class="normal"><a href="#__codelineno-84-27"> 27</a></span>
<span class="normal"><a href="#__codelineno-84-28"> 28</a></span>
<span class="normal"><a href="#__codelineno-84-29"> 29</a></span>
<span class="normal"><a href="#__codelineno-84-30"> 30</a></span>
<span class="normal"><a href="#__codelineno-84-31"> 31</a></span>
<span class="normal"><a href="#__codelineno-84-32"> 32</a></span>
<span class="normal"><a href="#__codelineno-84-33"> 33</a></span>
<span class="normal"><a href="#__codelineno-84-34"> 34</a></span>
<span class="normal"><a href="#__codelineno-84-35"> 35</a></span>
<span class="normal"><a href="#__codelineno-84-36"> 36</a></span>
<span class="normal"><a href="#__codelineno-84-37"> 37</a></span>
<span class="normal"><a href="#__codelineno-84-38"> 38</a></span>
<span class="normal"><a href="#__codelineno-84-39"> 39</a></span>
<span class="normal"><a href="#__codelineno-84-40"> 40</a></span>
<span class="normal"><a href="#__codelineno-84-41"> 41</a></span>
<span class="normal"><a href="#__codelineno-84-42"> 42</a></span>
<span class="normal"><a href="#__codelineno-84-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-84-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-84-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-84-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-84-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-84-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-84-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-84-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-84-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-84-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-84-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-84-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-84-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-84-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-84-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-84-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-84-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-84-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-84-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-84-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-84-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-84-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-84-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-84-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-84-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-84-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-84-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-84-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-84-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-84-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-84-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-84-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-84-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-84-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-84-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-84-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-84-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-84-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-84-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-84-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-84-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-84-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-84-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-84-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-84-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-84-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-84-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-84-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-84-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-84-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-84-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-84-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-84-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-84-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-84-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-84-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-84-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-84-100">100</a></span>
<span class="normal"><a href="#__codelineno-84-101">101</a></span>
<span class="normal"><a href="#__codelineno-84-102">102</a></span>
<span class="normal"><a href="#__codelineno-84-103">103</a></span>
<span class="normal"><a href="#__codelineno-84-104">104</a></span>
<span class="normal"><a href="#__codelineno-84-105">105</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-84-1" name="__codelineno-84-1"></a><span class="kd">@authenticateClient</span><span class="p">(</span><span class="nx">STRATEGY</span><span class="p">.</span><span class="nx">CLIENT_PASSWORD</span><span class="p">)</span>
<a id="__codelineno-84-2" name="__codelineno-84-2"></a><span class="w">  </span><span class="kd">@authenticate</span><span class="p">(</span>
<a id="__codelineno-84-3" name="__codelineno-84-3"></a><span class="w">    </span><span class="nx">STRATEGY</span><span class="p">.</span><span class="nx">FACEBOOK_OAUTH2</span><span class="p">,</span>
<a id="__codelineno-84-4" name="__codelineno-84-4"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-84-5" name="__codelineno-84-5"></a><span class="w">      </span><span class="nx">accessType</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;offline&#39;</span><span class="p">,</span>
<a id="__codelineno-84-6" name="__codelineno-84-6"></a><span class="w">      </span><span class="nx">authorizationURL</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.FACEBOOK_AUTH_URL</span><span class="p">,</span>
<a id="__codelineno-84-7" name="__codelineno-84-7"></a><span class="w">      </span><span class="nx">callbackURL</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.FACEBOOK_AUTH_CALLBACK_URL</span><span class="p">,</span>
<a id="__codelineno-84-8" name="__codelineno-84-8"></a><span class="w">      </span><span class="nx">clientID</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.FACEBOOK_AUTH_CLIENT_ID</span><span class="p">,</span>
<a id="__codelineno-84-9" name="__codelineno-84-9"></a><span class="w">      </span><span class="nx">clientSecret</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.FACEBOOK_AUTH_CLIENT_SECRET</span><span class="p">,</span>
<a id="__codelineno-84-10" name="__codelineno-84-10"></a><span class="w">      </span><span class="nx">tokenURL</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.FACEBOOK_AUTH_TOKEN_URL</span><span class="p">,</span>
<a id="__codelineno-84-11" name="__codelineno-84-11"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-84-12" name="__codelineno-84-12"></a><span class="w">    </span><span class="p">(</span><span class="nx">req</span><span class="o">:</span><span class="w"> </span><span class="kt">Request</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-84-13" name="__codelineno-84-13"></a><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-84-14" name="__codelineno-84-14"></a><span class="w">        </span><span class="nx">accessType</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;offline&#39;</span><span class="p">,</span>
<a id="__codelineno-84-15" name="__codelineno-84-15"></a><span class="w">        </span><span class="nx">state</span><span class="o">:</span><span class="w"> </span><span class="kt">Object.keys</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">)</span>
<a id="__codelineno-84-16" name="__codelineno-84-16"></a><span class="w">          </span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">key</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">key</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">&#39;=&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">[</span><span class="nx">key</span><span class="p">])</span>
<a id="__codelineno-84-17" name="__codelineno-84-17"></a><span class="w">          </span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;&amp;&#39;</span><span class="p">),</span>
<a id="__codelineno-84-18" name="__codelineno-84-18"></a><span class="w">      </span><span class="p">};</span>
<a id="__codelineno-84-19" name="__codelineno-84-19"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-84-20" name="__codelineno-84-20"></a><span class="w">  </span><span class="p">)</span>
<a id="__codelineno-84-21" name="__codelineno-84-21"></a><span class="w">  </span><span class="kd">@authorize</span><span class="p">([</span><span class="s1">&#39;*&#39;</span><span class="p">])</span>
<a id="__codelineno-84-22" name="__codelineno-84-22"></a><span class="w">  </span><span class="kd">@get</span><span class="p">(</span><span class="s1">&#39;/auth/facebook&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-84-23" name="__codelineno-84-23"></a><span class="w">    </span><span class="nx">responses</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-84-24" name="__codelineno-84-24"></a><span class="w">      </span><span class="p">[</span><span class="nx">STATUS_CODE</span><span class="p">.</span><span class="nx">OK</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-84-25" name="__codelineno-84-25"></a><span class="w">        </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Token Response&#39;</span><span class="p">,</span>
<a id="__codelineno-84-26" name="__codelineno-84-26"></a><span class="w">        </span><span class="nx">content</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-84-27" name="__codelineno-84-27"></a><span class="w">          </span><span class="p">[</span><span class="nx">CONTENT_TYPE</span><span class="p">.</span><span class="nb">JSON</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-84-28" name="__codelineno-84-28"></a><span class="w">            </span><span class="nx">schema</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="s1">&#39;x-ts-type&#39;</span><span class="o">:</span><span class="w"> </span><span class="nx">TokenResponse</span><span class="p">},</span>
<a id="__codelineno-84-29" name="__codelineno-84-29"></a><span class="w">          </span><span class="p">},</span>
<a id="__codelineno-84-30" name="__codelineno-84-30"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-84-31" name="__codelineno-84-31"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-84-32" name="__codelineno-84-32"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-84-33" name="__codelineno-84-33"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-84-34" name="__codelineno-84-34"></a><span class="w">  </span><span class="k">async</span><span class="w"> </span><span class="nx">loginViaFacebook</span><span class="p">(</span>
<a id="__codelineno-84-35" name="__codelineno-84-35"></a><span class="w">    </span><span class="kd">@param</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="kt">string</span><span class="p">(</span><span class="s1">&#39;client_id&#39;</span><span class="p">)</span>
<a id="__codelineno-84-36" name="__codelineno-84-36"></a><span class="w">    </span><span class="nx">clientId?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span>
<a id="__codelineno-84-37" name="__codelineno-84-37"></a><span class="w">    </span><span class="kd">@param</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="kt">string</span><span class="p">(</span><span class="s1">&#39;client_secret&#39;</span><span class="p">)</span>
<a id="__codelineno-84-38" name="__codelineno-84-38"></a><span class="w">    </span><span class="nx">clientSecret?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span>
<a id="__codelineno-84-39" name="__codelineno-84-39"></a><span class="w">  </span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nb">Promise</span><span class="o">&lt;</span><span class="ow">void</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-84-40" name="__codelineno-84-40"></a>
<a id="__codelineno-84-41" name="__codelineno-84-41"></a><span class="w">  </span><span class="kd">@authenticate</span><span class="p">(</span>
<a id="__codelineno-84-42" name="__codelineno-84-42"></a><span class="w">    </span><span class="nx">STRATEGY</span><span class="p">.</span><span class="nx">FACEBOOK_OAUTH2</span><span class="p">,</span>
<a id="__codelineno-84-43" name="__codelineno-84-43"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-84-44" name="__codelineno-84-44"></a><span class="w">      </span><span class="nx">accessType</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;offline&#39;</span><span class="p">,</span>
<a id="__codelineno-84-45" name="__codelineno-84-45"></a><span class="w">      </span><span class="nx">authorizationURL</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.FACEBOOK_AUTH_URL</span><span class="p">,</span>
<a id="__codelineno-84-46" name="__codelineno-84-46"></a><span class="w">      </span><span class="nx">callbackURL</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.FACEBOOK_AUTH_CALLBACK_URL</span><span class="p">,</span>
<a id="__codelineno-84-47" name="__codelineno-84-47"></a><span class="w">      </span><span class="nx">clientID</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.FACEBOOK_AUTH_CLIENT_ID</span><span class="p">,</span>
<a id="__codelineno-84-48" name="__codelineno-84-48"></a><span class="w">      </span><span class="nx">clientSecret</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.FACEBOOK_AUTH_CLIENT_SECRET</span><span class="p">,</span>
<a id="__codelineno-84-49" name="__codelineno-84-49"></a><span class="w">      </span><span class="nx">tokenURL</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.FACEBOOK_AUTH_TOKEN_URL</span><span class="p">,</span>
<a id="__codelineno-84-50" name="__codelineno-84-50"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-84-51" name="__codelineno-84-51"></a><span class="w">    </span><span class="p">(</span><span class="nx">req</span><span class="o">:</span><span class="w"> </span><span class="kt">Request</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-84-52" name="__codelineno-84-52"></a><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-84-53" name="__codelineno-84-53"></a><span class="w">        </span><span class="nx">accessType</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;offline&#39;</span><span class="p">,</span>
<a id="__codelineno-84-54" name="__codelineno-84-54"></a><span class="w">        </span><span class="nx">state</span><span class="o">:</span><span class="w"> </span><span class="kt">Object.keys</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">)</span>
<a id="__codelineno-84-55" name="__codelineno-84-55"></a><span class="w">          </span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">key</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="sb">`</span><span class="si">${</span><span class="nx">key</span><span class="si">}</span><span class="sb">=</span><span class="si">${</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
<a id="__codelineno-84-56" name="__codelineno-84-56"></a><span class="w">          </span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;&amp;&#39;</span><span class="p">),</span>
<a id="__codelineno-84-57" name="__codelineno-84-57"></a><span class="w">      </span><span class="p">};</span>
<a id="__codelineno-84-58" name="__codelineno-84-58"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-84-59" name="__codelineno-84-59"></a><span class="w">  </span><span class="p">)</span>
<a id="__codelineno-84-60" name="__codelineno-84-60"></a><span class="w">  </span><span class="kd">@authorize</span><span class="p">([</span><span class="s1">&#39;*&#39;</span><span class="p">])</span>
<a id="__codelineno-84-61" name="__codelineno-84-61"></a><span class="w">  </span><span class="kd">@get</span><span class="p">(</span><span class="s1">&#39;/auth/facebook-auth-redirect&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-84-62" name="__codelineno-84-62"></a><span class="w">    </span><span class="nx">responses</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-84-63" name="__codelineno-84-63"></a><span class="w">      </span><span class="p">[</span><span class="nx">STATUS_CODE</span><span class="p">.</span><span class="nx">OK</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-84-64" name="__codelineno-84-64"></a><span class="w">        </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Token Response&#39;</span><span class="p">,</span>
<a id="__codelineno-84-65" name="__codelineno-84-65"></a><span class="w">        </span><span class="nx">content</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-84-66" name="__codelineno-84-66"></a><span class="w">          </span><span class="p">[</span><span class="nx">CONTENT_TYPE</span><span class="p">.</span><span class="nb">JSON</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-84-67" name="__codelineno-84-67"></a><span class="w">            </span><span class="nx">schema</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="s1">&#39;x-ts-type&#39;</span><span class="o">:</span><span class="w"> </span><span class="nx">TokenResponse</span><span class="p">},</span>
<a id="__codelineno-84-68" name="__codelineno-84-68"></a><span class="w">          </span><span class="p">},</span>
<a id="__codelineno-84-69" name="__codelineno-84-69"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-84-70" name="__codelineno-84-70"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-84-71" name="__codelineno-84-71"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-84-72" name="__codelineno-84-72"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-84-73" name="__codelineno-84-73"></a><span class="w">  </span><span class="k">async</span><span class="w"> </span><span class="nx">facebookCallback</span><span class="p">(</span>
<a id="__codelineno-84-74" name="__codelineno-84-74"></a><span class="w">    </span><span class="kd">@param</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="kt">string</span><span class="p">(</span><span class="s1">&#39;code&#39;</span><span class="p">)</span><span class="w"> </span><span class="nx">code</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span>
<a id="__codelineno-84-75" name="__codelineno-84-75"></a><span class="w">    </span><span class="kd">@param</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="kt">string</span><span class="p">(</span><span class="s1">&#39;state&#39;</span><span class="p">)</span><span class="w"> </span><span class="nx">state</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span>
<a id="__codelineno-84-76" name="__codelineno-84-76"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">RestBindings</span><span class="p">.</span><span class="nx">Http</span><span class="p">.</span><span class="nx">RESPONSE</span><span class="p">)</span><span class="w"> </span><span class="nx">response</span><span class="o">:</span><span class="w"> </span><span class="kt">Response</span><span class="p">,</span>
<a id="__codelineno-84-77" name="__codelineno-84-77"></a><span class="w">  </span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nb">Promise</span><span class="o">&lt;</span><span class="ow">void</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-84-78" name="__codelineno-84-78"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">clientId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">URLSearchParams</span><span class="p">(</span><span class="nx">state</span><span class="p">).</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;client_id&#39;</span><span class="p">);</span>
<a id="__codelineno-84-79" name="__codelineno-84-79"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">clientId</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">user</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-84-80" name="__codelineno-84-80"></a><span class="w">      </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">HttpErrors</span><span class="p">.</span><span class="nx">Unauthorized</span><span class="p">(</span><span class="nx">AuthErrorKeys</span><span class="p">.</span><span class="nx">ClientInvalid</span><span class="p">);</span>
<a id="__codelineno-84-81" name="__codelineno-84-81"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-84-82" name="__codelineno-84-82"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">authClientRepository</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span>
<a id="__codelineno-84-83" name="__codelineno-84-83"></a><span class="w">      </span><span class="nx">where</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-84-84" name="__codelineno-84-84"></a><span class="w">        </span><span class="nx">clientId</span><span class="o">:</span><span class="w"> </span><span class="kt">clientId</span><span class="p">,</span>
<a id="__codelineno-84-85" name="__codelineno-84-85"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-84-86" name="__codelineno-84-86"></a><span class="w">    </span><span class="p">});</span>
<a id="__codelineno-84-87" name="__codelineno-84-87"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">client</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">!</span><span class="nx">client</span><span class="p">.</span><span class="nx">redirectUrl</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-84-88" name="__codelineno-84-88"></a><span class="w">      </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">HttpErrors</span><span class="p">.</span><span class="nx">Unauthorized</span><span class="p">(</span><span class="nx">AuthErrorKeys</span><span class="p">.</span><span class="nx">ClientInvalid</span><span class="p">);</span>
<a id="__codelineno-84-89" name="__codelineno-84-89"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-84-90" name="__codelineno-84-90"></a><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-84-91" name="__codelineno-84-91"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">codePayload</span><span class="o">:</span><span class="w"> </span><span class="kt">ClientAuthCode</span><span class="o">&lt;</span><span class="nx">User</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-84-92" name="__codelineno-84-92"></a><span class="w">        </span><span class="nx">clientId</span><span class="p">,</span>
<a id="__codelineno-84-93" name="__codelineno-84-93"></a><span class="w">        </span><span class="nx">user</span><span class="o">:</span><span class="w"> </span><span class="kt">this.user</span><span class="p">,</span>
<a id="__codelineno-84-94" name="__codelineno-84-94"></a><span class="w">      </span><span class="p">};</span>
<a id="__codelineno-84-95" name="__codelineno-84-95"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">jwt</span><span class="p">.</span><span class="nx">sign</span><span class="p">(</span><span class="nx">codePayload</span><span class="p">,</span><span class="w"> </span><span class="nx">client</span><span class="p">.</span><span class="nx">secret</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-84-96" name="__codelineno-84-96"></a><span class="w">        </span><span class="nx">expiresIn</span><span class="o">:</span><span class="w"> </span><span class="kt">client.authCodeExpiration</span><span class="p">,</span>
<a id="__codelineno-84-97" name="__codelineno-84-97"></a><span class="w">        </span><span class="nx">audience</span><span class="o">:</span><span class="w"> </span><span class="kt">clientId</span><span class="p">,</span>
<a id="__codelineno-84-98" name="__codelineno-84-98"></a><span class="w">        </span><span class="nx">subject</span><span class="o">:</span><span class="w"> </span><span class="kt">this.user.username</span><span class="p">,</span>
<a id="__codelineno-84-99" name="__codelineno-84-99"></a><span class="w">        </span><span class="nx">issuer</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.JWT_ISSUER</span><span class="p">,</span>
<a id="__codelineno-84-100" name="__codelineno-84-100"></a><span class="w">      </span><span class="p">});</span>
<a id="__codelineno-84-101" name="__codelineno-84-101"></a><span class="w">      </span><span class="nx">response</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">client</span><span class="p">.</span><span class="nx">redirectUrl</span><span class="si">}</span><span class="sb">?code=</span><span class="si">${</span><span class="nx">token</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<a id="__codelineno-84-102" name="__codelineno-84-102"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-84-103" name="__codelineno-84-103"></a><span class="w">      </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">HttpErrors</span><span class="p">.</span><span class="nx">InternalServerError</span><span class="p">(</span><span class="nx">AuthErrorKeys</span><span class="p">.</span><span class="nx">UnknownError</span><span class="p">);</span>
<a id="__codelineno-84-104" name="__codelineno-84-104"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-84-105" name="__codelineno-84-105"></a><span class="w">  </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Please note above that we are creating two new APIs for facebook auth. The first one is for UI clients to hit. We are authenticating client as well, then passing the details to the facebook auth. Then, the actual authentication is done by facebook authorization url, which redirects to the second API we created after success. The first API method body is empty as we do not need to handle its response. The facebook auth provider in this package will do the redirection for you automatically.</p>
<p>For accessing the authenticated AuthUser model reference, you can inject the CURRENT_USER provider, provided by the extension, which is populated by the auth action sequence above.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-85-1">1</a></span>
<span class="normal"><a href="#__codelineno-85-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-85-1" name="__codelineno-85-1"></a><span class="w">  </span><span class="kd">@inject</span><span class="p">.</span><span class="nx">getter</span><span class="p">(</span><span class="nx">AuthenticationBindings</span><span class="p">.</span><span class="nx">CURRENT_USER</span><span class="p">)</span>
<a id="__codelineno-85-2" name="__codelineno-85-2"></a><span class="w">  </span><span class="k">private</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="nx">getCurrentUser</span><span class="o">:</span><span class="w"> </span><span class="kt">Getter</span><span class="o">&lt;</span><span class="nx">User</span><span class="o">&gt;</span><span class="p">,</span>
</code></pre></div></td></tr></table></div>
<h3 id="keycloak">Keycloak<a class="headerlink" href="#keycloak" title="Permanent link">&para;</a></h3>
<p>In order to use it, run <code>npm install @exlinc/keycloak-passport</code>.
First, create a AuthUser model implementing the IAuthUser interface. You can implement the interface in the user model itself. See sample below.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-86-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-86-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-86-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-86-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-86-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-86-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-86-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-86-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-86-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-86-10">10</a></span>
<span class="normal"><a href="#__codelineno-86-11">11</a></span>
<span class="normal"><a href="#__codelineno-86-12">12</a></span>
<span class="normal"><a href="#__codelineno-86-13">13</a></span>
<span class="normal"><a href="#__codelineno-86-14">14</a></span>
<span class="normal"><a href="#__codelineno-86-15">15</a></span>
<span class="normal"><a href="#__codelineno-86-16">16</a></span>
<span class="normal"><a href="#__codelineno-86-17">17</a></span>
<span class="normal"><a href="#__codelineno-86-18">18</a></span>
<span class="normal"><a href="#__codelineno-86-19">19</a></span>
<span class="normal"><a href="#__codelineno-86-20">20</a></span>
<span class="normal"><a href="#__codelineno-86-21">21</a></span>
<span class="normal"><a href="#__codelineno-86-22">22</a></span>
<span class="normal"><a href="#__codelineno-86-23">23</a></span>
<span class="normal"><a href="#__codelineno-86-24">24</a></span>
<span class="normal"><a href="#__codelineno-86-25">25</a></span>
<span class="normal"><a href="#__codelineno-86-26">26</a></span>
<span class="normal"><a href="#__codelineno-86-27">27</a></span>
<span class="normal"><a href="#__codelineno-86-28">28</a></span>
<span class="normal"><a href="#__codelineno-86-29">29</a></span>
<span class="normal"><a href="#__codelineno-86-30">30</a></span>
<span class="normal"><a href="#__codelineno-86-31">31</a></span>
<span class="normal"><a href="#__codelineno-86-32">32</a></span>
<span class="normal"><a href="#__codelineno-86-33">33</a></span>
<span class="normal"><a href="#__codelineno-86-34">34</a></span>
<span class="normal"><a href="#__codelineno-86-35">35</a></span>
<span class="normal"><a href="#__codelineno-86-36">36</a></span>
<span class="normal"><a href="#__codelineno-86-37">37</a></span>
<span class="normal"><a href="#__codelineno-86-38">38</a></span>
<span class="normal"><a href="#__codelineno-86-39">39</a></span>
<span class="normal"><a href="#__codelineno-86-40">40</a></span>
<span class="normal"><a href="#__codelineno-86-41">41</a></span>
<span class="normal"><a href="#__codelineno-86-42">42</a></span>
<span class="normal"><a href="#__codelineno-86-43">43</a></span>
<span class="normal"><a href="#__codelineno-86-44">44</a></span>
<span class="normal"><a href="#__codelineno-86-45">45</a></span>
<span class="normal"><a href="#__codelineno-86-46">46</a></span>
<span class="normal"><a href="#__codelineno-86-47">47</a></span>
<span class="normal"><a href="#__codelineno-86-48">48</a></span>
<span class="normal"><a href="#__codelineno-86-49">49</a></span>
<span class="normal"><a href="#__codelineno-86-50">50</a></span>
<span class="normal"><a href="#__codelineno-86-51">51</a></span>
<span class="normal"><a href="#__codelineno-86-52">52</a></span>
<span class="normal"><a href="#__codelineno-86-53">53</a></span>
<span class="normal"><a href="#__codelineno-86-54">54</a></span>
<span class="normal"><a href="#__codelineno-86-55">55</a></span>
<span class="normal"><a href="#__codelineno-86-56">56</a></span>
<span class="normal"><a href="#__codelineno-86-57">57</a></span>
<span class="normal"><a href="#__codelineno-86-58">58</a></span>
<span class="normal"><a href="#__codelineno-86-59">59</a></span>
<span class="normal"><a href="#__codelineno-86-60">60</a></span>
<span class="normal"><a href="#__codelineno-86-61">61</a></span>
<span class="normal"><a href="#__codelineno-86-62">62</a></span>
<span class="normal"><a href="#__codelineno-86-63">63</a></span>
<span class="normal"><a href="#__codelineno-86-64">64</a></span>
<span class="normal"><a href="#__codelineno-86-65">65</a></span>
<span class="normal"><a href="#__codelineno-86-66">66</a></span>
<span class="normal"><a href="#__codelineno-86-67">67</a></span>
<span class="normal"><a href="#__codelineno-86-68">68</a></span>
<span class="normal"><a href="#__codelineno-86-69">69</a></span>
<span class="normal"><a href="#__codelineno-86-70">70</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-86-1" name="__codelineno-86-1"></a><span class="kd">@model</span><span class="p">({</span>
<a id="__codelineno-86-2" name="__codelineno-86-2"></a><span class="w">  </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;users&#39;</span><span class="p">,</span>
<a id="__codelineno-86-3" name="__codelineno-86-3"></a><span class="p">})</span>
<a id="__codelineno-86-4" name="__codelineno-86-4"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">User</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">Entity</span><span class="w"> </span><span class="k">implements</span><span class="w"> </span><span class="nx">IAuthUser</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-86-5" name="__codelineno-86-5"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-86-6" name="__codelineno-86-6"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;number&#39;</span><span class="p">,</span>
<a id="__codelineno-86-7" name="__codelineno-86-7"></a><span class="w">    </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<a id="__codelineno-86-8" name="__codelineno-86-8"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-86-9" name="__codelineno-86-9"></a><span class="w">  </span><span class="nx">id?</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">;</span>
<a id="__codelineno-86-10" name="__codelineno-86-10"></a>
<a id="__codelineno-86-11" name="__codelineno-86-11"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-86-12" name="__codelineno-86-12"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-86-13" name="__codelineno-86-13"></a><span class="w">    </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<a id="__codelineno-86-14" name="__codelineno-86-14"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;first_name&#39;</span><span class="p">,</span>
<a id="__codelineno-86-15" name="__codelineno-86-15"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-86-16" name="__codelineno-86-16"></a><span class="w">  </span><span class="nx">firstName</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-86-17" name="__codelineno-86-17"></a>
<a id="__codelineno-86-18" name="__codelineno-86-18"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-86-19" name="__codelineno-86-19"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-86-20" name="__codelineno-86-20"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;last_name&#39;</span><span class="p">,</span>
<a id="__codelineno-86-21" name="__codelineno-86-21"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-86-22" name="__codelineno-86-22"></a><span class="w">  </span><span class="nx">lastName</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-86-23" name="__codelineno-86-23"></a>
<a id="__codelineno-86-24" name="__codelineno-86-24"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-86-25" name="__codelineno-86-25"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-86-26" name="__codelineno-86-26"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;middle_name&#39;</span><span class="p">,</span>
<a id="__codelineno-86-27" name="__codelineno-86-27"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-86-28" name="__codelineno-86-28"></a><span class="w">  </span><span class="nx">middleName?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-86-29" name="__codelineno-86-29"></a>
<a id="__codelineno-86-30" name="__codelineno-86-30"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-86-31" name="__codelineno-86-31"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-86-32" name="__codelineno-86-32"></a><span class="w">    </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<a id="__codelineno-86-33" name="__codelineno-86-33"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-86-34" name="__codelineno-86-34"></a><span class="w">  </span><span class="nx">username</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-86-35" name="__codelineno-86-35"></a>
<a id="__codelineno-86-36" name="__codelineno-86-36"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-86-37" name="__codelineno-86-37"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-86-38" name="__codelineno-86-38"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-86-39" name="__codelineno-86-39"></a><span class="w">  </span><span class="nx">email?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-86-40" name="__codelineno-86-40"></a>
<a id="__codelineno-86-41" name="__codelineno-86-41"></a><span class="w">  </span><span class="c1">// Auth provider - &#39;keycloak&#39;</span>
<a id="__codelineno-86-42" name="__codelineno-86-42"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-86-43" name="__codelineno-86-43"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-86-44" name="__codelineno-86-44"></a><span class="w">    </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<a id="__codelineno-86-45" name="__codelineno-86-45"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;auth_provider&#39;</span><span class="p">,</span>
<a id="__codelineno-86-46" name="__codelineno-86-46"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-86-47" name="__codelineno-86-47"></a><span class="w">  </span><span class="nx">authProvider</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-86-48" name="__codelineno-86-48"></a>
<a id="__codelineno-86-49" name="__codelineno-86-49"></a><span class="w">  </span><span class="c1">// Id from external provider</span>
<a id="__codelineno-86-50" name="__codelineno-86-50"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-86-51" name="__codelineno-86-51"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-86-52" name="__codelineno-86-52"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;auth_id&#39;</span><span class="p">,</span>
<a id="__codelineno-86-53" name="__codelineno-86-53"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-86-54" name="__codelineno-86-54"></a><span class="w">  </span><span class="nx">authId?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-86-55" name="__codelineno-86-55"></a>
<a id="__codelineno-86-56" name="__codelineno-86-56"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-86-57" name="__codelineno-86-57"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-86-58" name="__codelineno-86-58"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;auth_token&#39;</span><span class="p">,</span>
<a id="__codelineno-86-59" name="__codelineno-86-59"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-86-60" name="__codelineno-86-60"></a><span class="w">  </span><span class="nx">authToken?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-86-61" name="__codelineno-86-61"></a>
<a id="__codelineno-86-62" name="__codelineno-86-62"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-86-63" name="__codelineno-86-63"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-86-64" name="__codelineno-86-64"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-86-65" name="__codelineno-86-65"></a><span class="w">  </span><span class="nx">password?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-86-66" name="__codelineno-86-66"></a>
<a id="__codelineno-86-67" name="__codelineno-86-67"></a><span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">data?</span><span class="o">:</span><span class="w"> </span><span class="kt">Partial</span><span class="o">&lt;</span><span class="nx">User</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-86-68" name="__codelineno-86-68"></a><span class="w">    </span><span class="k">super</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<a id="__codelineno-86-69" name="__codelineno-86-69"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-86-70" name="__codelineno-86-70"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Now bind this model to USER_MODEL key in application.ts</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-87-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-87-1" name="__codelineno-87-1"></a><span class="k">this</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">AuthenticationBindings</span><span class="p">.</span><span class="nx">USER_MODEL</span><span class="p">).</span><span class="nx">to</span><span class="p">(</span><span class="nx">User</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>Create CRUD repository for the above model. Use loopback CLI.</p>
<div class="language-sh highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-88-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-88-1" name="__codelineno-88-1"></a>lb4<span class="w"> </span>repository
</code></pre></div></td></tr></table></div>
<p>Add the verifier function for the strategy. You need to create a provider for the same. You can add your application specific business logic for client auth here. Here is a simple example.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-89-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-89-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-89-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-89-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-89-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-89-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-89-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-89-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-89-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-89-10">10</a></span>
<span class="normal"><a href="#__codelineno-89-11">11</a></span>
<span class="normal"><a href="#__codelineno-89-12">12</a></span>
<span class="normal"><a href="#__codelineno-89-13">13</a></span>
<span class="normal"><a href="#__codelineno-89-14">14</a></span>
<span class="normal"><a href="#__codelineno-89-15">15</a></span>
<span class="normal"><a href="#__codelineno-89-16">16</a></span>
<span class="normal"><a href="#__codelineno-89-17">17</a></span>
<span class="normal"><a href="#__codelineno-89-18">18</a></span>
<span class="normal"><a href="#__codelineno-89-19">19</a></span>
<span class="normal"><a href="#__codelineno-89-20">20</a></span>
<span class="normal"><a href="#__codelineno-89-21">21</a></span>
<span class="normal"><a href="#__codelineno-89-22">22</a></span>
<span class="normal"><a href="#__codelineno-89-23">23</a></span>
<span class="normal"><a href="#__codelineno-89-24">24</a></span>
<span class="normal"><a href="#__codelineno-89-25">25</a></span>
<span class="normal"><a href="#__codelineno-89-26">26</a></span>
<span class="normal"><a href="#__codelineno-89-27">27</a></span>
<span class="normal"><a href="#__codelineno-89-28">28</a></span>
<span class="normal"><a href="#__codelineno-89-29">29</a></span>
<span class="normal"><a href="#__codelineno-89-30">30</a></span>
<span class="normal"><a href="#__codelineno-89-31">31</a></span>
<span class="normal"><a href="#__codelineno-89-32">32</a></span>
<span class="normal"><a href="#__codelineno-89-33">33</a></span>
<span class="normal"><a href="#__codelineno-89-34">34</a></span>
<span class="normal"><a href="#__codelineno-89-35">35</a></span>
<span class="normal"><a href="#__codelineno-89-36">36</a></span>
<span class="normal"><a href="#__codelineno-89-37">37</a></span>
<span class="normal"><a href="#__codelineno-89-38">38</a></span>
<span class="normal"><a href="#__codelineno-89-39">39</a></span>
<span class="normal"><a href="#__codelineno-89-40">40</a></span>
<span class="normal"><a href="#__codelineno-89-41">41</a></span>
<span class="normal"><a href="#__codelineno-89-42">42</a></span>
<span class="normal"><a href="#__codelineno-89-43">43</a></span>
<span class="normal"><a href="#__codelineno-89-44">44</a></span>
<span class="normal"><a href="#__codelineno-89-45">45</a></span>
<span class="normal"><a href="#__codelineno-89-46">46</a></span>
<span class="normal"><a href="#__codelineno-89-47">47</a></span>
<span class="normal"><a href="#__codelineno-89-48">48</a></span>
<span class="normal"><a href="#__codelineno-89-49">49</a></span>
<span class="normal"><a href="#__codelineno-89-50">50</a></span>
<span class="normal"><a href="#__codelineno-89-51">51</a></span>
<span class="normal"><a href="#__codelineno-89-52">52</a></span>
<span class="normal"><a href="#__codelineno-89-53">53</a></span>
<span class="normal"><a href="#__codelineno-89-54">54</a></span>
<span class="normal"><a href="#__codelineno-89-55">55</a></span>
<span class="normal"><a href="#__codelineno-89-56">56</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-89-1" name="__codelineno-89-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">Provider</span><span class="p">,</span><span class="w"> </span><span class="nx">inject</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@loopback/context&#39;</span><span class="p">;</span>
<a id="__codelineno-89-2" name="__codelineno-89-2"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">repository</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@loopback/repository&#39;</span><span class="p">;</span>
<a id="__codelineno-89-3" name="__codelineno-89-3"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">HttpErrors</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@loopback/rest&#39;</span><span class="p">;</span>
<a id="__codelineno-89-4" name="__codelineno-89-4"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-89-5" name="__codelineno-89-5"></a><span class="w">  </span><span class="nx">AuthErrorKeys</span><span class="p">,</span>
<a id="__codelineno-89-6" name="__codelineno-89-6"></a><span class="w">  </span><span class="nx">IAuthUser</span><span class="p">,</span>
<a id="__codelineno-89-7" name="__codelineno-89-7"></a><span class="w">  </span><span class="nx">VerifyFunction</span><span class="p">,</span>
<a id="__codelineno-89-8" name="__codelineno-89-8"></a><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;loopback4-authentication&#39;</span><span class="p">;</span>
<a id="__codelineno-89-9" name="__codelineno-89-9"></a>
<a id="__codelineno-89-10" name="__codelineno-89-10"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">UserCredentialsRepository</span><span class="p">,</span><span class="w"> </span><span class="nx">UserRepository</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../../../repositories&#39;</span><span class="p">;</span>
<a id="__codelineno-89-11" name="__codelineno-89-11"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">AuthUser</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../models/auth-user.model&#39;</span><span class="p">;</span>
<a id="__codelineno-89-12" name="__codelineno-89-12"></a>
<a id="__codelineno-89-13" name="__codelineno-89-13"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">KeycloakVerifyProvider</span>
<a id="__codelineno-89-14" name="__codelineno-89-14"></a><span class="w">  </span><span class="k">implements</span><span class="w"> </span><span class="nx">Provider</span><span class="o">&lt;</span><span class="nx">VerifyFunction</span><span class="p">.</span><span class="nx">KeycloakAuthFn</span><span class="o">&gt;</span>
<a id="__codelineno-89-15" name="__codelineno-89-15"></a><span class="p">{</span>
<a id="__codelineno-89-16" name="__codelineno-89-16"></a><span class="w">  </span><span class="kr">constructor</span><span class="p">(</span>
<a id="__codelineno-89-17" name="__codelineno-89-17"></a><span class="w">    </span><span class="kd">@repository</span><span class="p">(</span><span class="nx">UserRepository</span><span class="p">)</span>
<a id="__codelineno-89-18" name="__codelineno-89-18"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nx">userRepository</span><span class="o">:</span><span class="w"> </span><span class="kt">UserRepository</span><span class="p">,</span>
<a id="__codelineno-89-19" name="__codelineno-89-19"></a><span class="w">    </span><span class="kd">@repository</span><span class="p">(</span><span class="nx">UserCredentialsRepository</span><span class="p">)</span>
<a id="__codelineno-89-20" name="__codelineno-89-20"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nx">userCredsRepository</span><span class="o">:</span><span class="w"> </span><span class="kt">UserCredentialsRepository</span><span class="p">,</span>
<a id="__codelineno-89-21" name="__codelineno-89-21"></a><span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-89-22" name="__codelineno-89-22"></a>
<a id="__codelineno-89-23" name="__codelineno-89-23"></a><span class="w">  </span><span class="nx">value</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">VerifyFunction</span><span class="p">.</span><span class="nx">KeycloakAuthFn</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-89-24" name="__codelineno-89-24"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">(</span><span class="nx">accessToken</span><span class="p">,</span><span class="w"> </span><span class="nx">refreshToken</span><span class="p">,</span><span class="w"> </span><span class="nx">profile</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-89-25" name="__codelineno-89-25"></a><span class="w">      </span><span class="kd">let</span><span class="w"> </span><span class="nx">user</span><span class="o">:</span><span class="w"> </span><span class="kt">IAuthUser</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">userRepository</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span>
<a id="__codelineno-89-26" name="__codelineno-89-26"></a><span class="w">        </span><span class="nx">where</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-89-27" name="__codelineno-89-27"></a><span class="w">          </span><span class="nx">email</span><span class="o">:</span><span class="w"> </span><span class="kt">profile.email</span><span class="p">,</span>
<a id="__codelineno-89-28" name="__codelineno-89-28"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-89-29" name="__codelineno-89-29"></a><span class="w">      </span><span class="p">});</span>
<a id="__codelineno-89-30" name="__codelineno-89-30"></a><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">user</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-89-31" name="__codelineno-89-31"></a><span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">HttpErrors</span><span class="p">.</span><span class="nx">Unauthorized</span><span class="p">(</span><span class="nx">AuthErrorKeys</span><span class="p">.</span><span class="nx">InvalidCredentials</span><span class="p">);</span>
<a id="__codelineno-89-32" name="__codelineno-89-32"></a><span class="w">      </span><span class="p">}</span>
<a id="__codelineno-89-33" name="__codelineno-89-33"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">creds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">userCredsRepository</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span>
<a id="__codelineno-89-34" name="__codelineno-89-34"></a><span class="w">        </span><span class="nx">where</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-89-35" name="__codelineno-89-35"></a><span class="w">          </span><span class="nx">userId</span><span class="o">:</span><span class="w"> </span><span class="kt">user.id</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span>
<a id="__codelineno-89-36" name="__codelineno-89-36"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-89-37" name="__codelineno-89-37"></a><span class="w">      </span><span class="p">});</span>
<a id="__codelineno-89-38" name="__codelineno-89-38"></a><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-89-39" name="__codelineno-89-39"></a><span class="w">        </span><span class="o">!</span><span class="nx">creds</span><span class="w"> </span><span class="o">||</span>
<a id="__codelineno-89-40" name="__codelineno-89-40"></a><span class="w">        </span><span class="nx">creds</span><span class="p">.</span><span class="nx">authProvider</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="s1">&#39;keycloak&#39;</span><span class="w"> </span><span class="o">||</span>
<a id="__codelineno-89-41" name="__codelineno-89-41"></a><span class="w">        </span><span class="nx">creds</span><span class="p">.</span><span class="nx">authId</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="nx">profile</span><span class="p">.</span><span class="nx">keycloakId</span>
<a id="__codelineno-89-42" name="__codelineno-89-42"></a><span class="w">      </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-89-43" name="__codelineno-89-43"></a><span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">HttpErrors</span><span class="p">.</span><span class="nx">Unauthorized</span><span class="p">(</span><span class="nx">AuthErrorKeys</span><span class="p">.</span><span class="nx">InvalidCredentials</span><span class="p">);</span>
<a id="__codelineno-89-44" name="__codelineno-89-44"></a><span class="w">      </span><span class="p">}</span>
<a id="__codelineno-89-45" name="__codelineno-89-45"></a>
<a id="__codelineno-89-46" name="__codelineno-89-46"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">authUser</span><span class="o">:</span><span class="w"> </span><span class="kt">AuthUser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">AuthUser</span><span class="p">({</span>
<a id="__codelineno-89-47" name="__codelineno-89-47"></a><span class="w">        </span><span class="p">...</span><span class="nx">user</span><span class="p">,</span>
<a id="__codelineno-89-48" name="__codelineno-89-48"></a><span class="w">        </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="kt">user.id</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span>
<a id="__codelineno-89-49" name="__codelineno-89-49"></a><span class="w">      </span><span class="p">});</span>
<a id="__codelineno-89-50" name="__codelineno-89-50"></a><span class="w">      </span><span class="nx">authUser</span><span class="p">.</span><span class="nx">permissions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
<a id="__codelineno-89-51" name="__codelineno-89-51"></a><span class="w">      </span><span class="nx">authUser</span><span class="p">.</span><span class="nx">externalAuthToken</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">accessToken</span><span class="p">;</span>
<a id="__codelineno-89-52" name="__codelineno-89-52"></a><span class="w">      </span><span class="nx">authUser</span><span class="p">.</span><span class="nx">externalRefreshToken</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">refreshToken</span><span class="p">;</span>
<a id="__codelineno-89-53" name="__codelineno-89-53"></a><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="nx">authUser</span><span class="p">;</span>
<a id="__codelineno-89-54" name="__codelineno-89-54"></a><span class="w">    </span><span class="p">};</span>
<a id="__codelineno-89-55" name="__codelineno-89-55"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-89-56" name="__codelineno-89-56"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Please note the Verify function type <em>VerifyFunction.KeycloakAuthFn</em></p>
<p>Now bind this provider to the application in application.ts.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-90-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-90-1" name="__codelineno-90-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">AuthenticationComponent</span><span class="p">,</span><span class="w"> </span><span class="nx">Strategies</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;loopback4-authentication&#39;</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-91-1">1</a></span>
<span class="normal"><a href="#__codelineno-91-2">2</a></span>
<span class="normal"><a href="#__codelineno-91-3">3</a></span>
<span class="normal"><a href="#__codelineno-91-4">4</a></span>
<span class="normal"><a href="#__codelineno-91-5">5</a></span>
<span class="normal"><a href="#__codelineno-91-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-91-1" name="__codelineno-91-1"></a><span class="c1">// Add authentication component</span>
<a id="__codelineno-91-2" name="__codelineno-91-2"></a><span class="k">this</span><span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="nx">AuthenticationComponent</span><span class="p">);</span>
<a id="__codelineno-91-3" name="__codelineno-91-3"></a><span class="c1">// Customize authentication verify handlers</span>
<a id="__codelineno-91-4" name="__codelineno-91-4"></a><span class="k">this</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">Strategies</span><span class="p">.</span><span class="nx">Passport</span><span class="p">.</span><span class="nx">KEYCLOAK_VERIFIER</span><span class="p">).</span><span class="nx">toProvider</span><span class="p">(</span>
<a id="__codelineno-91-5" name="__codelineno-91-5"></a><span class="w">  </span><span class="nx">KeycloakVerifyProvider</span><span class="p">,</span>
<a id="__codelineno-91-6" name="__codelineno-91-6"></a><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>Finally, add the authenticate function as a sequence action to sequence.ts.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-92-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-92-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-92-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-92-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-92-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-92-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-92-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-92-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-92-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-92-10">10</a></span>
<span class="normal"><a href="#__codelineno-92-11">11</a></span>
<span class="normal"><a href="#__codelineno-92-12">12</a></span>
<span class="normal"><a href="#__codelineno-92-13">13</a></span>
<span class="normal"><a href="#__codelineno-92-14">14</a></span>
<span class="normal"><a href="#__codelineno-92-15">15</a></span>
<span class="normal"><a href="#__codelineno-92-16">16</a></span>
<span class="normal"><a href="#__codelineno-92-17">17</a></span>
<span class="normal"><a href="#__codelineno-92-18">18</a></span>
<span class="normal"><a href="#__codelineno-92-19">19</a></span>
<span class="normal"><a href="#__codelineno-92-20">20</a></span>
<span class="normal"><a href="#__codelineno-92-21">21</a></span>
<span class="normal"><a href="#__codelineno-92-22">22</a></span>
<span class="normal"><a href="#__codelineno-92-23">23</a></span>
<span class="normal"><a href="#__codelineno-92-24">24</a></span>
<span class="normal"><a href="#__codelineno-92-25">25</a></span>
<span class="normal"><a href="#__codelineno-92-26">26</a></span>
<span class="normal"><a href="#__codelineno-92-27">27</a></span>
<span class="normal"><a href="#__codelineno-92-28">28</a></span>
<span class="normal"><a href="#__codelineno-92-29">29</a></span>
<span class="normal"><a href="#__codelineno-92-30">30</a></span>
<span class="normal"><a href="#__codelineno-92-31">31</a></span>
<span class="normal"><a href="#__codelineno-92-32">32</a></span>
<span class="normal"><a href="#__codelineno-92-33">33</a></span>
<span class="normal"><a href="#__codelineno-92-34">34</a></span>
<span class="normal"><a href="#__codelineno-92-35">35</a></span>
<span class="normal"><a href="#__codelineno-92-36">36</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-92-1" name="__codelineno-92-1"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">MySequence</span><span class="w"> </span><span class="k">implements</span><span class="w"> </span><span class="nx">SequenceHandler</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-92-2" name="__codelineno-92-2"></a><span class="w">  </span><span class="cm">/**</span>
<a id="__codelineno-92-3" name="__codelineno-92-3"></a><span class="cm">   * Optional invoker for registered middleware in a chain.</span>
<a id="__codelineno-92-4" name="__codelineno-92-4"></a><span class="cm">   * To be injected via SequenceActions.INVOKE_MIDDLEWARE.</span>
<a id="__codelineno-92-5" name="__codelineno-92-5"></a><span class="cm">   */</span>
<a id="__codelineno-92-6" name="__codelineno-92-6"></a><span class="w">  </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">INVOKE_MIDDLEWARE</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="nx">optional</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">})</span>
<a id="__codelineno-92-7" name="__codelineno-92-7"></a><span class="w">  </span><span class="k">protected</span><span class="w"> </span><span class="nx">invokeMiddleware</span><span class="o">:</span><span class="w"> </span><span class="kt">InvokeMiddleware</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<a id="__codelineno-92-8" name="__codelineno-92-8"></a>
<a id="__codelineno-92-9" name="__codelineno-92-9"></a><span class="w">  </span><span class="kr">constructor</span><span class="p">(</span>
<a id="__codelineno-92-10" name="__codelineno-92-10"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">FIND_ROUTE</span><span class="p">)</span><span class="w"> </span><span class="k">protected</span><span class="w"> </span><span class="nx">findRoute</span><span class="o">:</span><span class="w"> </span><span class="kt">FindRoute</span><span class="p">,</span>
<a id="__codelineno-92-11" name="__codelineno-92-11"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">PARSE_PARAMS</span><span class="p">)</span><span class="w"> </span><span class="k">protected</span><span class="w"> </span><span class="nx">parseParams</span><span class="o">:</span><span class="w"> </span><span class="kt">ParseParams</span><span class="p">,</span>
<a id="__codelineno-92-12" name="__codelineno-92-12"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">INVOKE_METHOD</span><span class="p">)</span><span class="w"> </span><span class="k">protected</span><span class="w"> </span><span class="nx">invoke</span><span class="o">:</span><span class="w"> </span><span class="kt">InvokeMethod</span><span class="p">,</span>
<a id="__codelineno-92-13" name="__codelineno-92-13"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">SEND</span><span class="p">)</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="nx">send</span><span class="o">:</span><span class="w"> </span><span class="kt">Send</span><span class="p">,</span>
<a id="__codelineno-92-14" name="__codelineno-92-14"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">REJECT</span><span class="p">)</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="nx">reject</span><span class="o">:</span><span class="w"> </span><span class="kt">Reject</span><span class="p">,</span>
<a id="__codelineno-92-15" name="__codelineno-92-15"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">AuthenticationBindings</span><span class="p">.</span><span class="nx">USER_AUTH_ACTION</span><span class="p">)</span>
<a id="__codelineno-92-16" name="__codelineno-92-16"></a><span class="w">    </span><span class="k">protected</span><span class="w"> </span><span class="nx">authenticateRequest</span><span class="o">:</span><span class="w"> </span><span class="kt">AuthenticateFn</span><span class="o">&lt;</span><span class="nx">AuthUser</span><span class="o">&gt;</span><span class="p">,</span>
<a id="__codelineno-92-17" name="__codelineno-92-17"></a><span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-92-18" name="__codelineno-92-18"></a>
<a id="__codelineno-92-19" name="__codelineno-92-19"></a><span class="w">  </span><span class="k">async</span><span class="w"> </span><span class="nx">handle</span><span class="p">(</span><span class="nx">context</span><span class="o">:</span><span class="w"> </span><span class="kt">RequestContext</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-92-20" name="__codelineno-92-20"></a><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-92-21" name="__codelineno-92-21"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="nx">request</span><span class="p">,</span><span class="w"> </span><span class="nx">response</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">context</span><span class="p">;</span>
<a id="__codelineno-92-22" name="__codelineno-92-22"></a>
<a id="__codelineno-92-23" name="__codelineno-92-23"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">route</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">findRoute</span><span class="p">(</span><span class="nx">request</span><span class="p">);</span>
<a id="__codelineno-92-24" name="__codelineno-92-24"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">parseParams</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span><span class="w"> </span><span class="nx">route</span><span class="p">);</span>
<a id="__codelineno-92-25" name="__codelineno-92-25"></a><span class="w">      </span><span class="nx">request</span><span class="p">.</span><span class="nx">body</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">args</span><span class="p">[</span><span class="nx">args</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">];</span>
<a id="__codelineno-92-26" name="__codelineno-92-26"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">authUser</span><span class="o">:</span><span class="w"> </span><span class="kt">AuthUser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">authenticateRequest</span><span class="p">(</span>
<a id="__codelineno-92-27" name="__codelineno-92-27"></a><span class="w">        </span><span class="nx">request</span><span class="p">,</span>
<a id="__codelineno-92-28" name="__codelineno-92-28"></a><span class="w">        </span><span class="nx">response</span><span class="p">,</span>
<a id="__codelineno-92-29" name="__codelineno-92-29"></a><span class="w">      </span><span class="p">);</span>
<a id="__codelineno-92-30" name="__codelineno-92-30"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">invoke</span><span class="p">(</span><span class="nx">route</span><span class="p">,</span><span class="w"> </span><span class="nx">args</span><span class="p">);</span>
<a id="__codelineno-92-31" name="__codelineno-92-31"></a><span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">response</span><span class="p">,</span><span class="w"> </span><span class="nx">result</span><span class="p">);</span>
<a id="__codelineno-92-32" name="__codelineno-92-32"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-92-33" name="__codelineno-92-33"></a><span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">reject</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">);</span>
<a id="__codelineno-92-34" name="__codelineno-92-34"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-92-35" name="__codelineno-92-35"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-92-36" name="__codelineno-92-36"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>After this, you can use decorator to apply auth to controller functions wherever needed. See below.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-93-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-93-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-93-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-93-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-93-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-93-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-93-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-93-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-93-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-93-10">10</a></span>
<span class="normal"><a href="#__codelineno-93-11">11</a></span>
<span class="normal"><a href="#__codelineno-93-12">12</a></span>
<span class="normal"><a href="#__codelineno-93-13">13</a></span>
<span class="normal"><a href="#__codelineno-93-14">14</a></span>
<span class="normal"><a href="#__codelineno-93-15">15</a></span>
<span class="normal"><a href="#__codelineno-93-16">16</a></span>
<span class="normal"><a href="#__codelineno-93-17">17</a></span>
<span class="normal"><a href="#__codelineno-93-18">18</a></span>
<span class="normal"><a href="#__codelineno-93-19">19</a></span>
<span class="normal"><a href="#__codelineno-93-20">20</a></span>
<span class="normal"><a href="#__codelineno-93-21">21</a></span>
<span class="normal"><a href="#__codelineno-93-22">22</a></span>
<span class="normal"><a href="#__codelineno-93-23">23</a></span>
<span class="normal"><a href="#__codelineno-93-24">24</a></span>
<span class="normal"><a href="#__codelineno-93-25">25</a></span>
<span class="normal"><a href="#__codelineno-93-26">26</a></span>
<span class="normal"><a href="#__codelineno-93-27">27</a></span>
<span class="normal"><a href="#__codelineno-93-28">28</a></span>
<span class="normal"><a href="#__codelineno-93-29">29</a></span>
<span class="normal"><a href="#__codelineno-93-30">30</a></span>
<span class="normal"><a href="#__codelineno-93-31">31</a></span>
<span class="normal"><a href="#__codelineno-93-32">32</a></span>
<span class="normal"><a href="#__codelineno-93-33">33</a></span>
<span class="normal"><a href="#__codelineno-93-34">34</a></span>
<span class="normal"><a href="#__codelineno-93-35">35</a></span>
<span class="normal"><a href="#__codelineno-93-36">36</a></span>
<span class="normal"><a href="#__codelineno-93-37">37</a></span>
<span class="normal"><a href="#__codelineno-93-38">38</a></span>
<span class="normal"><a href="#__codelineno-93-39">39</a></span>
<span class="normal"><a href="#__codelineno-93-40">40</a></span>
<span class="normal"><a href="#__codelineno-93-41">41</a></span>
<span class="normal"><a href="#__codelineno-93-42">42</a></span>
<span class="normal"><a href="#__codelineno-93-43">43</a></span>
<span class="normal"><a href="#__codelineno-93-44">44</a></span>
<span class="normal"><a href="#__codelineno-93-45">45</a></span>
<span class="normal"><a href="#__codelineno-93-46">46</a></span>
<span class="normal"><a href="#__codelineno-93-47">47</a></span>
<span class="normal"><a href="#__codelineno-93-48">48</a></span>
<span class="normal"><a href="#__codelineno-93-49">49</a></span>
<span class="normal"><a href="#__codelineno-93-50">50</a></span>
<span class="normal"><a href="#__codelineno-93-51">51</a></span>
<span class="normal"><a href="#__codelineno-93-52">52</a></span>
<span class="normal"><a href="#__codelineno-93-53">53</a></span>
<span class="normal"><a href="#__codelineno-93-54">54</a></span>
<span class="normal"><a href="#__codelineno-93-55">55</a></span>
<span class="normal"><a href="#__codelineno-93-56">56</a></span>
<span class="normal"><a href="#__codelineno-93-57">57</a></span>
<span class="normal"><a href="#__codelineno-93-58">58</a></span>
<span class="normal"><a href="#__codelineno-93-59">59</a></span>
<span class="normal"><a href="#__codelineno-93-60">60</a></span>
<span class="normal"><a href="#__codelineno-93-61">61</a></span>
<span class="normal"><a href="#__codelineno-93-62">62</a></span>
<span class="normal"><a href="#__codelineno-93-63">63</a></span>
<span class="normal"><a href="#__codelineno-93-64">64</a></span>
<span class="normal"><a href="#__codelineno-93-65">65</a></span>
<span class="normal"><a href="#__codelineno-93-66">66</a></span>
<span class="normal"><a href="#__codelineno-93-67">67</a></span>
<span class="normal"><a href="#__codelineno-93-68">68</a></span>
<span class="normal"><a href="#__codelineno-93-69">69</a></span>
<span class="normal"><a href="#__codelineno-93-70">70</a></span>
<span class="normal"><a href="#__codelineno-93-71">71</a></span>
<span class="normal"><a href="#__codelineno-93-72">72</a></span>
<span class="normal"><a href="#__codelineno-93-73">73</a></span>
<span class="normal"><a href="#__codelineno-93-74">74</a></span>
<span class="normal"><a href="#__codelineno-93-75">75</a></span>
<span class="normal"><a href="#__codelineno-93-76">76</a></span>
<span class="normal"><a href="#__codelineno-93-77">77</a></span>
<span class="normal"><a href="#__codelineno-93-78">78</a></span>
<span class="normal"><a href="#__codelineno-93-79">79</a></span>
<span class="normal"><a href="#__codelineno-93-80">80</a></span>
<span class="normal"><a href="#__codelineno-93-81">81</a></span>
<span class="normal"><a href="#__codelineno-93-82">82</a></span>
<span class="normal"><a href="#__codelineno-93-83">83</a></span>
<span class="normal"><a href="#__codelineno-93-84">84</a></span>
<span class="normal"><a href="#__codelineno-93-85">85</a></span>
<span class="normal"><a href="#__codelineno-93-86">86</a></span>
<span class="normal"><a href="#__codelineno-93-87">87</a></span>
<span class="normal"><a href="#__codelineno-93-88">88</a></span>
<span class="normal"><a href="#__codelineno-93-89">89</a></span>
<span class="normal"><a href="#__codelineno-93-90">90</a></span>
<span class="normal"><a href="#__codelineno-93-91">91</a></span>
<span class="normal"><a href="#__codelineno-93-92">92</a></span>
<span class="normal"><a href="#__codelineno-93-93">93</a></span>
<span class="normal"><a href="#__codelineno-93-94">94</a></span>
<span class="normal"><a href="#__codelineno-93-95">95</a></span>
<span class="normal"><a href="#__codelineno-93-96">96</a></span>
<span class="normal"><a href="#__codelineno-93-97">97</a></span>
<span class="normal"><a href="#__codelineno-93-98">98</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-93-1" name="__codelineno-93-1"></a><span class="kd">@authenticateClient</span><span class="p">(</span><span class="nx">STRATEGY</span><span class="p">.</span><span class="nx">CLIENT_PASSWORD</span><span class="p">)</span>
<a id="__codelineno-93-2" name="__codelineno-93-2"></a><span class="w">  </span><span class="kd">@authenticate</span><span class="p">(</span>
<a id="__codelineno-93-3" name="__codelineno-93-3"></a><span class="w">    </span><span class="nx">STRATEGY</span><span class="p">.</span><span class="nx">KEYCLOAK</span><span class="p">,</span>
<a id="__codelineno-93-4" name="__codelineno-93-4"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-93-5" name="__codelineno-93-5"></a><span class="w">      </span><span class="nx">host</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.KEYCLOAK_HOST</span><span class="p">,</span>
<a id="__codelineno-93-6" name="__codelineno-93-6"></a><span class="w">      </span><span class="nx">realm</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.KEYCLOAK_REALM</span><span class="p">,</span><span class="w"> </span><span class="c1">//&#39;Tenant1&#39;,</span>
<a id="__codelineno-93-7" name="__codelineno-93-7"></a><span class="w">      </span><span class="nx">clientID</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.KEYCLOAK_CLIENT_ID</span><span class="p">,</span><span class="w"> </span><span class="c1">//&#39;onboarding&#39;,</span>
<a id="__codelineno-93-8" name="__codelineno-93-8"></a><span class="w">      </span><span class="nx">clientSecret</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.KEYCLOAK_CLIENT_SECRET</span><span class="p">,</span><span class="w"> </span><span class="c1">//&#39;e607fd75-adc8-4af7-9f03-c9e79a4b8b72&#39;,</span>
<a id="__codelineno-93-9" name="__codelineno-93-9"></a><span class="w">      </span><span class="nx">callbackURL</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.KEYCLOAK_CALLBACK_URL</span><span class="p">,</span><span class="w"> </span><span class="c1">//&#39;http://localhost:3001/auth/keycloak-auth-redirect&#39;,</span>
<a id="__codelineno-93-10" name="__codelineno-93-10"></a><span class="w">      </span><span class="nx">authorizationURL</span><span class="o">:</span><span class="w"> </span><span class="sb">`</span><span class="si">${</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">KEYCLOAK_HOST</span><span class="si">}</span><span class="sb">/auth/realms/</span><span class="si">${</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">KEYCLOAK_REALM</span><span class="si">}</span><span class="sb">/protocol/openid-connect/auth`</span><span class="p">,</span>
<a id="__codelineno-93-11" name="__codelineno-93-11"></a><span class="w">      </span><span class="nx">tokenURL</span><span class="o">:</span><span class="w"> </span><span class="sb">`</span><span class="si">${</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">KEYCLOAK_HOST</span><span class="si">}</span><span class="sb">/auth/realms/</span><span class="si">${</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">KEYCLOAK_REALM</span><span class="si">}</span><span class="sb">/protocol/openid-connect/token`</span><span class="p">,</span>
<a id="__codelineno-93-12" name="__codelineno-93-12"></a><span class="w">      </span><span class="nx">userInfoURL</span><span class="o">:</span><span class="w"> </span><span class="sb">`</span><span class="si">${</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">KEYCLOAK_HOST</span><span class="si">}</span><span class="sb">/auth/realms/</span><span class="si">${</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">KEYCLOAK_REALM</span><span class="si">}</span><span class="sb">/protocol/openid-connect/userinfo`</span><span class="p">,</span>
<a id="__codelineno-93-13" name="__codelineno-93-13"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-93-14" name="__codelineno-93-14"></a><span class="w">    </span><span class="nx">keycloakQueryGen</span><span class="p">,</span>
<a id="__codelineno-93-15" name="__codelineno-93-15"></a><span class="w">  </span><span class="p">)</span>
<a id="__codelineno-93-16" name="__codelineno-93-16"></a><span class="w">  </span><span class="kd">@authorize</span><span class="p">({</span><span class="nx">permissions</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;*&#39;</span><span class="p">]})</span>
<a id="__codelineno-93-17" name="__codelineno-93-17"></a><span class="w">  </span><span class="kd">@get</span><span class="p">(</span><span class="s1">&#39;/auth/keycloak&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-93-18" name="__codelineno-93-18"></a><span class="w">    </span><span class="nx">responses</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-93-19" name="__codelineno-93-19"></a><span class="w">      </span><span class="p">[</span><span class="nx">STATUS_CODE</span><span class="p">.</span><span class="nx">OK</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-93-20" name="__codelineno-93-20"></a><span class="w">        </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Keycloak Token Response&#39;</span><span class="p">,</span>
<a id="__codelineno-93-21" name="__codelineno-93-21"></a><span class="w">        </span><span class="nx">content</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-93-22" name="__codelineno-93-22"></a><span class="w">          </span><span class="p">[</span><span class="nx">CONTENT_TYPE</span><span class="p">.</span><span class="nb">JSON</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-93-23" name="__codelineno-93-23"></a><span class="w">            </span><span class="nx">schema</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="s1">&#39;x-ts-type&#39;</span><span class="o">:</span><span class="w"> </span><span class="nx">TokenResponse</span><span class="p">},</span>
<a id="__codelineno-93-24" name="__codelineno-93-24"></a><span class="w">          </span><span class="p">},</span>
<a id="__codelineno-93-25" name="__codelineno-93-25"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-93-26" name="__codelineno-93-26"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-93-27" name="__codelineno-93-27"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-93-28" name="__codelineno-93-28"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-93-29" name="__codelineno-93-29"></a><span class="w">  </span><span class="k">async</span><span class="w"> </span><span class="nx">loginViaKeycloak</span><span class="p">(</span>
<a id="__codelineno-93-30" name="__codelineno-93-30"></a><span class="w">    </span><span class="kd">@param</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="kt">string</span><span class="p">(</span><span class="s1">&#39;client_id&#39;</span><span class="p">)</span>
<a id="__codelineno-93-31" name="__codelineno-93-31"></a><span class="w">    </span><span class="nx">clientId?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span>
<a id="__codelineno-93-32" name="__codelineno-93-32"></a><span class="w">    </span><span class="kd">@param</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="kt">string</span><span class="p">(</span><span class="s1">&#39;client_secret&#39;</span><span class="p">)</span>
<a id="__codelineno-93-33" name="__codelineno-93-33"></a><span class="w">    </span><span class="nx">clientSecret?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span>
<a id="__codelineno-93-34" name="__codelineno-93-34"></a><span class="w">  </span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nb">Promise</span><span class="o">&lt;</span><span class="ow">void</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-93-35" name="__codelineno-93-35"></a>
<a id="__codelineno-93-36" name="__codelineno-93-36"></a><span class="w">  </span><span class="kd">@authenticate</span><span class="p">(</span>
<a id="__codelineno-93-37" name="__codelineno-93-37"></a><span class="w">    </span><span class="nx">STRATEGY</span><span class="p">.</span><span class="nx">KEYCLOAK</span><span class="p">,</span>
<a id="__codelineno-93-38" name="__codelineno-93-38"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-93-39" name="__codelineno-93-39"></a><span class="w">      </span><span class="nx">host</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.KEYCLOAK_HOST</span><span class="p">,</span>
<a id="__codelineno-93-40" name="__codelineno-93-40"></a><span class="w">      </span><span class="nx">realm</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.KEYCLOAK_REALM</span><span class="p">,</span>
<a id="__codelineno-93-41" name="__codelineno-93-41"></a><span class="w">      </span><span class="nx">clientID</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.KEYCLOAK_CLIENT_ID</span><span class="p">,</span>
<a id="__codelineno-93-42" name="__codelineno-93-42"></a><span class="w">      </span><span class="nx">clientSecret</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.KEYCLOAK_CLIENT_SECRET</span><span class="p">,</span>
<a id="__codelineno-93-43" name="__codelineno-93-43"></a><span class="w">      </span><span class="nx">callbackURL</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.KEYCLOAK_CALLBACK_URL</span><span class="p">,</span>
<a id="__codelineno-93-44" name="__codelineno-93-44"></a><span class="w">      </span><span class="nx">authorizationURL</span><span class="o">:</span><span class="w"> </span><span class="sb">`</span><span class="si">${</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">KEYCLOAK_HOST</span><span class="si">}</span><span class="sb">/auth/realms/</span><span class="si">${</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">KEYCLOAK_REALM</span><span class="si">}</span><span class="sb">/protocol/openid-connect/auth`</span><span class="p">,</span>
<a id="__codelineno-93-45" name="__codelineno-93-45"></a><span class="w">      </span><span class="nx">tokenURL</span><span class="o">:</span><span class="w"> </span><span class="sb">`</span><span class="si">${</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">KEYCLOAK_HOST</span><span class="si">}</span><span class="sb">/auth/realms/</span><span class="si">${</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">KEYCLOAK_REALM</span><span class="si">}</span><span class="sb">/protocol/openid-connect/token`</span><span class="p">,</span>
<a id="__codelineno-93-46" name="__codelineno-93-46"></a><span class="w">      </span><span class="nx">userInfoURL</span><span class="o">:</span><span class="w"> </span><span class="sb">`</span><span class="si">${</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">KEYCLOAK_HOST</span><span class="si">}</span><span class="sb">/auth/realms/</span><span class="si">${</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">KEYCLOAK_REALM</span><span class="si">}</span><span class="sb">/protocol/openid-connect/userinfo`</span><span class="p">,</span>
<a id="__codelineno-93-47" name="__codelineno-93-47"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-93-48" name="__codelineno-93-48"></a><span class="w">    </span><span class="nx">keycloakQueryGen</span><span class="p">,</span>
<a id="__codelineno-93-49" name="__codelineno-93-49"></a><span class="w">  </span><span class="p">)</span>
<a id="__codelineno-93-50" name="__codelineno-93-50"></a><span class="w">  </span><span class="kd">@authorize</span><span class="p">({</span><span class="nx">permissions</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;*&#39;</span><span class="p">]})</span>
<a id="__codelineno-93-51" name="__codelineno-93-51"></a><span class="w">  </span><span class="kd">@get</span><span class="p">(</span><span class="s1">&#39;/auth/keycloak-auth-redirect&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-93-52" name="__codelineno-93-52"></a><span class="w">    </span><span class="nx">responses</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-93-53" name="__codelineno-93-53"></a><span class="w">      </span><span class="p">[</span><span class="nx">STATUS_CODE</span><span class="p">.</span><span class="nx">OK</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-93-54" name="__codelineno-93-54"></a><span class="w">        </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Keycloak Redirect Token Response&#39;</span><span class="p">,</span>
<a id="__codelineno-93-55" name="__codelineno-93-55"></a><span class="w">        </span><span class="nx">content</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-93-56" name="__codelineno-93-56"></a><span class="w">          </span><span class="p">[</span><span class="nx">CONTENT_TYPE</span><span class="p">.</span><span class="nb">JSON</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-93-57" name="__codelineno-93-57"></a><span class="w">            </span><span class="nx">schema</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="s1">&#39;x-ts-type&#39;</span><span class="o">:</span><span class="w"> </span><span class="nx">TokenResponse</span><span class="p">},</span>
<a id="__codelineno-93-58" name="__codelineno-93-58"></a><span class="w">          </span><span class="p">},</span>
<a id="__codelineno-93-59" name="__codelineno-93-59"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-93-60" name="__codelineno-93-60"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-93-61" name="__codelineno-93-61"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-93-62" name="__codelineno-93-62"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-93-63" name="__codelineno-93-63"></a><span class="w">  </span><span class="k">async</span><span class="w"> </span><span class="nx">keycloakCallback</span><span class="p">(</span>
<a id="__codelineno-93-64" name="__codelineno-93-64"></a><span class="w">    </span><span class="kd">@param</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="kt">string</span><span class="p">(</span><span class="s1">&#39;code&#39;</span><span class="p">)</span><span class="w"> </span><span class="nx">code</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span>
<a id="__codelineno-93-65" name="__codelineno-93-65"></a><span class="w">    </span><span class="kd">@param</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="kt">string</span><span class="p">(</span><span class="s1">&#39;state&#39;</span><span class="p">)</span><span class="w"> </span><span class="nx">state</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span>
<a id="__codelineno-93-66" name="__codelineno-93-66"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">RestBindings</span><span class="p">.</span><span class="nx">Http</span><span class="p">.</span><span class="nx">RESPONSE</span><span class="p">)</span><span class="w"> </span><span class="nx">response</span><span class="o">:</span><span class="w"> </span><span class="kt">Response</span><span class="p">,</span>
<a id="__codelineno-93-67" name="__codelineno-93-67"></a><span class="w">  </span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nb">Promise</span><span class="o">&lt;</span><span class="ow">void</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-93-68" name="__codelineno-93-68"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">clientId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">URLSearchParams</span><span class="p">(</span><span class="nx">state</span><span class="p">).</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;client_id&#39;</span><span class="p">);</span>
<a id="__codelineno-93-69" name="__codelineno-93-69"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">clientId</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">user</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-93-70" name="__codelineno-93-70"></a><span class="w">      </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">HttpErrors</span><span class="p">.</span><span class="nx">Unauthorized</span><span class="p">(</span><span class="nx">AuthErrorKeys</span><span class="p">.</span><span class="nx">ClientInvalid</span><span class="p">);</span>
<a id="__codelineno-93-71" name="__codelineno-93-71"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-93-72" name="__codelineno-93-72"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">authClientRepository</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span>
<a id="__codelineno-93-73" name="__codelineno-93-73"></a><span class="w">      </span><span class="nx">where</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-93-74" name="__codelineno-93-74"></a><span class="w">        </span><span class="nx">clientId</span><span class="p">,</span>
<a id="__codelineno-93-75" name="__codelineno-93-75"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-93-76" name="__codelineno-93-76"></a><span class="w">    </span><span class="p">});</span>
<a id="__codelineno-93-77" name="__codelineno-93-77"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">client</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">!</span><span class="nx">client</span><span class="p">.</span><span class="nx">redirectUrl</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-93-78" name="__codelineno-93-78"></a><span class="w">      </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">HttpErrors</span><span class="p">.</span><span class="nx">Unauthorized</span><span class="p">(</span><span class="nx">AuthErrorKeys</span><span class="p">.</span><span class="nx">ClientInvalid</span><span class="p">);</span>
<a id="__codelineno-93-79" name="__codelineno-93-79"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-93-80" name="__codelineno-93-80"></a><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-93-81" name="__codelineno-93-81"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">codePayload</span><span class="o">:</span><span class="w"> </span><span class="kt">ClientAuthCode</span><span class="o">&lt;</span><span class="nx">User</span><span class="p">,</span><span class="w"> </span><span class="ow">typeof</span><span class="w"> </span><span class="nx">User</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">id</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-93-82" name="__codelineno-93-82"></a><span class="w">        </span><span class="nx">clientId</span><span class="p">,</span>
<a id="__codelineno-93-83" name="__codelineno-93-83"></a><span class="w">        </span><span class="nx">user</span><span class="o">:</span><span class="w"> </span><span class="kt">this.user</span><span class="p">,</span>
<a id="__codelineno-93-84" name="__codelineno-93-84"></a><span class="w">      </span><span class="p">};</span>
<a id="__codelineno-93-85" name="__codelineno-93-85"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">jwt</span><span class="p">.</span><span class="nx">sign</span><span class="p">(</span><span class="nx">codePayload</span><span class="p">,</span><span class="w"> </span><span class="nx">client</span><span class="p">.</span><span class="nx">secret</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-93-86" name="__codelineno-93-86"></a><span class="w">        </span><span class="nx">expiresIn</span><span class="o">:</span><span class="w"> </span><span class="kt">client.authCodeExpiration</span><span class="p">,</span>
<a id="__codelineno-93-87" name="__codelineno-93-87"></a><span class="w">        </span><span class="nx">audience</span><span class="o">:</span><span class="w"> </span><span class="kt">clientId</span><span class="p">,</span>
<a id="__codelineno-93-88" name="__codelineno-93-88"></a><span class="w">        </span><span class="nx">subject</span><span class="o">:</span><span class="w"> </span><span class="kt">this.user.username</span><span class="p">,</span>
<a id="__codelineno-93-89" name="__codelineno-93-89"></a><span class="w">        </span><span class="nx">issuer</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.JWT_ISSUER</span><span class="p">,</span>
<a id="__codelineno-93-90" name="__codelineno-93-90"></a><span class="w">      </span><span class="p">});</span>
<a id="__codelineno-93-91" name="__codelineno-93-91"></a><span class="w">      </span><span class="nx">response</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span>
<a id="__codelineno-93-92" name="__codelineno-93-92"></a><span class="w">        </span><span class="sb">`</span><span class="si">${</span><span class="nx">client</span><span class="p">.</span><span class="nx">redirectUrl</span><span class="si">}</span><span class="sb">?code=</span><span class="si">${</span><span class="nx">token</span><span class="si">}</span><span class="sb">&amp;user=</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">username</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span>
<a id="__codelineno-93-93" name="__codelineno-93-93"></a><span class="w">      </span><span class="p">);</span>
<a id="__codelineno-93-94" name="__codelineno-93-94"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-93-95" name="__codelineno-93-95"></a><span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">logger</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
<a id="__codelineno-93-96" name="__codelineno-93-96"></a><span class="w">      </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">HttpErrors</span><span class="p">.</span><span class="nx">Unauthorized</span><span class="p">(</span><span class="nx">AuthErrorKeys</span><span class="p">.</span><span class="nx">InvalidCredentials</span><span class="p">);</span>
<a id="__codelineno-93-97" name="__codelineno-93-97"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-93-98" name="__codelineno-93-98"></a><span class="w">  </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Please note above that we are creating two new APIs for keycloak auth. The first one is for UI clients to hit. We are authenticating client as well, then passing the details to the keycloak auth. Then, the actual authentication is done by keycloak authorization url, which redirects to the second API we created after success. The first API method body is empty as we do not need to handle its response. The keycloak auth provider in this package will do the redirection for you automatically.</p>
<p>For accessing the authenticated AuthUser model reference, you can inject the CURRENT_USER provider, provided by the extension, which is populated by the auth action sequence above.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-94-1">1</a></span>
<span class="normal"><a href="#__codelineno-94-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-94-1" name="__codelineno-94-1"></a><span class="w">  </span><span class="kd">@inject</span><span class="p">.</span><span class="nx">getter</span><span class="p">(</span><span class="nx">AuthenticationBindings</span><span class="p">.</span><span class="nx">CURRENT_USER</span><span class="p">)</span>
<a id="__codelineno-94-2" name="__codelineno-94-2"></a><span class="w">  </span><span class="k">private</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="nx">getCurrentUser</span><span class="o">:</span><span class="w"> </span><span class="kt">Getter</span><span class="o">&lt;</span><span class="nx">User</span><span class="o">&gt;</span><span class="p">,</span>
</code></pre></div></td></tr></table></div>
<h3 id="custom-verifier-for-individual-routes">Custom Verifier for Individual Routes<a class="headerlink" href="#custom-verifier-for-individual-routes" title="Permanent link">&para;</a></h3>
<p>For providing a custom verifier for a particular route, you can pass a binding key for a verifier provider as the fourth parameter of the authenticate decorator.
Note - The key VerifyBindings.BEARER_SIGNUP_VERIFY_PROVIDER can be any custom key, it just be bound to a verify function provider.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-95-1">1</a></span>
<span class="normal"><a href="#__codelineno-95-2">2</a></span>
<span class="normal"><a href="#__codelineno-95-3">3</a></span>
<span class="normal"><a href="#__codelineno-95-4">4</a></span>
<span class="normal"><a href="#__codelineno-95-5">5</a></span>
<span class="normal"><a href="#__codelineno-95-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-95-1" name="__codelineno-95-1"></a><span class="w">  </span><span class="kd">@authenticate</span><span class="p">(</span>
<a id="__codelineno-95-2" name="__codelineno-95-2"></a><span class="w">    </span><span class="nx">STRATEGY</span><span class="p">.</span><span class="nx">BEARER</span><span class="p">,</span>
<a id="__codelineno-95-3" name="__codelineno-95-3"></a><span class="w">    </span><span class="kc">undefined</span><span class="p">,</span><span class="w"> </span><span class="c1">//options</span>
<a id="__codelineno-95-4" name="__codelineno-95-4"></a><span class="w">    </span><span class="kc">undefined</span><span class="p">,</span><span class="w"> </span><span class="c1">//authOptions</span>
<a id="__codelineno-95-5" name="__codelineno-95-5"></a><span class="w">    </span><span class="nx">VerifyBindings</span><span class="p">.</span><span class="nx">BEARER_SIGNUP_VERIFY_PROVIDER</span><span class="p">,</span>
<a id="__codelineno-95-6" name="__codelineno-95-6"></a><span class="w">  </span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>And binding this key to a verifier in the application.ts</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-96-1">1</a></span>
<span class="normal"><a href="#__codelineno-96-2">2</a></span>
<span class="normal"><a href="#__codelineno-96-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-96-1" name="__codelineno-96-1"></a><span class="k">this</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">VerifyBindings</span><span class="p">.</span><span class="nx">BEARER_SIGNUP_VERIFY_PROVIDER</span><span class="p">).</span><span class="nx">toProvider</span><span class="p">(</span>
<a id="__codelineno-96-2" name="__codelineno-96-2"></a><span class="w">  </span><span class="nx">LocalPreSignupProvider</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">Constructor</span><span class="o">&lt;</span><span class="nx">Provider</span><span class="o">&lt;</span><span class="nx">PreSignupFn</span><span class="o">&gt;&gt;</span><span class="p">,</span>
<a id="__codelineno-96-3" name="__codelineno-96-3"></a><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<h3 id="saml">SAML<a class="headerlink" href="#saml" title="Permanent link">&para;</a></h3>
<p>In order to use it, run <code>npm install @node-saml/passport-saml</code>.
SAML (Security Assertion Markup Language) is an XML-based standard for exchanging authentication and authorization data between parties, in particular, between an identity provider (IdP) and a service provider (SP).</p>
<p>First, create a AuthUser model implementing the IAuthUser interface. You can implement the interface in the user model itself. See sample below.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-97-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-97-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-97-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-97-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-97-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-97-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-97-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-97-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-97-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-97-10">10</a></span>
<span class="normal"><a href="#__codelineno-97-11">11</a></span>
<span class="normal"><a href="#__codelineno-97-12">12</a></span>
<span class="normal"><a href="#__codelineno-97-13">13</a></span>
<span class="normal"><a href="#__codelineno-97-14">14</a></span>
<span class="normal"><a href="#__codelineno-97-15">15</a></span>
<span class="normal"><a href="#__codelineno-97-16">16</a></span>
<span class="normal"><a href="#__codelineno-97-17">17</a></span>
<span class="normal"><a href="#__codelineno-97-18">18</a></span>
<span class="normal"><a href="#__codelineno-97-19">19</a></span>
<span class="normal"><a href="#__codelineno-97-20">20</a></span>
<span class="normal"><a href="#__codelineno-97-21">21</a></span>
<span class="normal"><a href="#__codelineno-97-22">22</a></span>
<span class="normal"><a href="#__codelineno-97-23">23</a></span>
<span class="normal"><a href="#__codelineno-97-24">24</a></span>
<span class="normal"><a href="#__codelineno-97-25">25</a></span>
<span class="normal"><a href="#__codelineno-97-26">26</a></span>
<span class="normal"><a href="#__codelineno-97-27">27</a></span>
<span class="normal"><a href="#__codelineno-97-28">28</a></span>
<span class="normal"><a href="#__codelineno-97-29">29</a></span>
<span class="normal"><a href="#__codelineno-97-30">30</a></span>
<span class="normal"><a href="#__codelineno-97-31">31</a></span>
<span class="normal"><a href="#__codelineno-97-32">32</a></span>
<span class="normal"><a href="#__codelineno-97-33">33</a></span>
<span class="normal"><a href="#__codelineno-97-34">34</a></span>
<span class="normal"><a href="#__codelineno-97-35">35</a></span>
<span class="normal"><a href="#__codelineno-97-36">36</a></span>
<span class="normal"><a href="#__codelineno-97-37">37</a></span>
<span class="normal"><a href="#__codelineno-97-38">38</a></span>
<span class="normal"><a href="#__codelineno-97-39">39</a></span>
<span class="normal"><a href="#__codelineno-97-40">40</a></span>
<span class="normal"><a href="#__codelineno-97-41">41</a></span>
<span class="normal"><a href="#__codelineno-97-42">42</a></span>
<span class="normal"><a href="#__codelineno-97-43">43</a></span>
<span class="normal"><a href="#__codelineno-97-44">44</a></span>
<span class="normal"><a href="#__codelineno-97-45">45</a></span>
<span class="normal"><a href="#__codelineno-97-46">46</a></span>
<span class="normal"><a href="#__codelineno-97-47">47</a></span>
<span class="normal"><a href="#__codelineno-97-48">48</a></span>
<span class="normal"><a href="#__codelineno-97-49">49</a></span>
<span class="normal"><a href="#__codelineno-97-50">50</a></span>
<span class="normal"><a href="#__codelineno-97-51">51</a></span>
<span class="normal"><a href="#__codelineno-97-52">52</a></span>
<span class="normal"><a href="#__codelineno-97-53">53</a></span>
<span class="normal"><a href="#__codelineno-97-54">54</a></span>
<span class="normal"><a href="#__codelineno-97-55">55</a></span>
<span class="normal"><a href="#__codelineno-97-56">56</a></span>
<span class="normal"><a href="#__codelineno-97-57">57</a></span>
<span class="normal"><a href="#__codelineno-97-58">58</a></span>
<span class="normal"><a href="#__codelineno-97-59">59</a></span>
<span class="normal"><a href="#__codelineno-97-60">60</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-97-1" name="__codelineno-97-1"></a><span class="kd">@model</span><span class="p">({</span>
<a id="__codelineno-97-2" name="__codelineno-97-2"></a><span class="w">  </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;users&#39;</span><span class="p">,</span>
<a id="__codelineno-97-3" name="__codelineno-97-3"></a><span class="p">})</span>
<a id="__codelineno-97-4" name="__codelineno-97-4"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">User</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">Entity</span><span class="w"> </span><span class="k">implements</span><span class="w"> </span><span class="nx">IAuthUser</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-97-5" name="__codelineno-97-5"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-97-6" name="__codelineno-97-6"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;number&#39;</span><span class="p">,</span>
<a id="__codelineno-97-7" name="__codelineno-97-7"></a><span class="w">    </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<a id="__codelineno-97-8" name="__codelineno-97-8"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-97-9" name="__codelineno-97-9"></a><span class="w">  </span><span class="nx">id?</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">;</span>
<a id="__codelineno-97-10" name="__codelineno-97-10"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-97-11" name="__codelineno-97-11"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-97-12" name="__codelineno-97-12"></a><span class="w">    </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<a id="__codelineno-97-13" name="__codelineno-97-13"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;first_name&#39;</span><span class="p">,</span>
<a id="__codelineno-97-14" name="__codelineno-97-14"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-97-15" name="__codelineno-97-15"></a><span class="w">  </span><span class="nx">firstName</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-97-16" name="__codelineno-97-16"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-97-17" name="__codelineno-97-17"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-97-18" name="__codelineno-97-18"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;last_name&#39;</span><span class="p">,</span>
<a id="__codelineno-97-19" name="__codelineno-97-19"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-97-20" name="__codelineno-97-20"></a><span class="w">  </span><span class="nx">lastName</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-97-21" name="__codelineno-97-21"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-97-22" name="__codelineno-97-22"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-97-23" name="__codelineno-97-23"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;middle_name&#39;</span><span class="p">,</span>
<a id="__codelineno-97-24" name="__codelineno-97-24"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-97-25" name="__codelineno-97-25"></a><span class="w">  </span><span class="nx">middleName?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-97-26" name="__codelineno-97-26"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-97-27" name="__codelineno-97-27"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-97-28" name="__codelineno-97-28"></a><span class="w">    </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<a id="__codelineno-97-29" name="__codelineno-97-29"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-97-30" name="__codelineno-97-30"></a><span class="w">  </span><span class="nx">username</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-97-31" name="__codelineno-97-31"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-97-32" name="__codelineno-97-32"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-97-33" name="__codelineno-97-33"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-97-34" name="__codelineno-97-34"></a><span class="w">  </span><span class="nx">email?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-97-35" name="__codelineno-97-35"></a><span class="w">  </span><span class="c1">// Auth provider - &#39;SAML&#39;</span>
<a id="__codelineno-97-36" name="__codelineno-97-36"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-97-37" name="__codelineno-97-37"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-97-38" name="__codelineno-97-38"></a><span class="w">    </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<a id="__codelineno-97-39" name="__codelineno-97-39"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;auth_provider&#39;</span><span class="p">,</span>
<a id="__codelineno-97-40" name="__codelineno-97-40"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-97-41" name="__codelineno-97-41"></a><span class="w">  </span><span class="nx">authProvider</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-97-42" name="__codelineno-97-42"></a><span class="w">  </span><span class="c1">// Id from external provider</span>
<a id="__codelineno-97-43" name="__codelineno-97-43"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-97-44" name="__codelineno-97-44"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-97-45" name="__codelineno-97-45"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;auth_id&#39;</span><span class="p">,</span>
<a id="__codelineno-97-46" name="__codelineno-97-46"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-97-47" name="__codelineno-97-47"></a><span class="w">  </span><span class="nx">authId?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-97-48" name="__codelineno-97-48"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-97-49" name="__codelineno-97-49"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-97-50" name="__codelineno-97-50"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;auth_token&#39;</span><span class="p">,</span>
<a id="__codelineno-97-51" name="__codelineno-97-51"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-97-52" name="__codelineno-97-52"></a><span class="w">  </span><span class="nx">authToken?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-97-53" name="__codelineno-97-53"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-97-54" name="__codelineno-97-54"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-97-55" name="__codelineno-97-55"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-97-56" name="__codelineno-97-56"></a><span class="w">  </span><span class="nx">password?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-97-57" name="__codelineno-97-57"></a><span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">data?</span><span class="o">:</span><span class="w"> </span><span class="kt">Partial</span><span class="o">&lt;</span><span class="nx">User</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-97-58" name="__codelineno-97-58"></a><span class="w">    </span><span class="k">super</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<a id="__codelineno-97-59" name="__codelineno-97-59"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-97-60" name="__codelineno-97-60"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Now bind this model to USER_MODEL key in application.ts</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-98-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-98-1" name="__codelineno-98-1"></a><span class="k">this</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">AuthenticationBindings</span><span class="p">.</span><span class="nx">USER_MODEL</span><span class="p">).</span><span class="nx">to</span><span class="p">(</span><span class="nx">User</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>Create CRUD repository for the above model. Use loopback CLI.</p>
<div class="language-sh highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-99-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-99-1" name="__codelineno-99-1"></a>lb4<span class="w"> </span>repository
</code></pre></div></td></tr></table></div>
<p>Add the verifier function for the strategy. You need to create a provider for the same. You can add your application specific business logic for client auth here. Here is a simple example.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-100-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-100-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-100-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-100-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-100-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-100-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-100-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-100-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-100-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-100-10">10</a></span>
<span class="normal"><a href="#__codelineno-100-11">11</a></span>
<span class="normal"><a href="#__codelineno-100-12">12</a></span>
<span class="normal"><a href="#__codelineno-100-13">13</a></span>
<span class="normal"><a href="#__codelineno-100-14">14</a></span>
<span class="normal"><a href="#__codelineno-100-15">15</a></span>
<span class="normal"><a href="#__codelineno-100-16">16</a></span>
<span class="normal"><a href="#__codelineno-100-17">17</a></span>
<span class="normal"><a href="#__codelineno-100-18">18</a></span>
<span class="normal"><a href="#__codelineno-100-19">19</a></span>
<span class="normal"><a href="#__codelineno-100-20">20</a></span>
<span class="normal"><a href="#__codelineno-100-21">21</a></span>
<span class="normal"><a href="#__codelineno-100-22">22</a></span>
<span class="normal"><a href="#__codelineno-100-23">23</a></span>
<span class="normal"><a href="#__codelineno-100-24">24</a></span>
<span class="normal"><a href="#__codelineno-100-25">25</a></span>
<span class="normal"><a href="#__codelineno-100-26">26</a></span>
<span class="normal"><a href="#__codelineno-100-27">27</a></span>
<span class="normal"><a href="#__codelineno-100-28">28</a></span>
<span class="normal"><a href="#__codelineno-100-29">29</a></span>
<span class="normal"><a href="#__codelineno-100-30">30</a></span>
<span class="normal"><a href="#__codelineno-100-31">31</a></span>
<span class="normal"><a href="#__codelineno-100-32">32</a></span>
<span class="normal"><a href="#__codelineno-100-33">33</a></span>
<span class="normal"><a href="#__codelineno-100-34">34</a></span>
<span class="normal"><a href="#__codelineno-100-35">35</a></span>
<span class="normal"><a href="#__codelineno-100-36">36</a></span>
<span class="normal"><a href="#__codelineno-100-37">37</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-100-1" name="__codelineno-100-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">Provider</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@loopback/context&#39;</span><span class="p">;</span>
<a id="__codelineno-100-2" name="__codelineno-100-2"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">repository</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@loopback/repository&#39;</span><span class="p">;</span>
<a id="__codelineno-100-3" name="__codelineno-100-3"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">HttpErrors</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@loopback/rest&#39;</span><span class="p">;</span>
<a id="__codelineno-100-4" name="__codelineno-100-4"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">AuthErrorKeys</span><span class="p">,</span><span class="w"> </span><span class="nx">VerifyFunction</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;loopback4-authentication&#39;</span><span class="p">;</span>
<a id="__codelineno-100-5" name="__codelineno-100-5"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">Tenant</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../../../models&#39;</span><span class="p">;</span>
<a id="__codelineno-100-6" name="__codelineno-100-6"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">UserCredentialsRepository</span><span class="p">,</span><span class="w"> </span><span class="nx">UserRepository</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../../../repositories&#39;</span><span class="p">;</span>
<a id="__codelineno-100-7" name="__codelineno-100-7"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">AuthUser</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../models/auth-user.model&#39;</span><span class="p">;</span>
<a id="__codelineno-100-8" name="__codelineno-100-8"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">SamlVerifyProvider</span><span class="w"> </span><span class="k">implements</span><span class="w"> </span><span class="nx">Provider</span><span class="o">&lt;</span><span class="nx">VerifyFunction</span><span class="p">.</span><span class="nx">SamlFn</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-100-9" name="__codelineno-100-9"></a><span class="w">  </span><span class="kr">constructor</span><span class="p">(</span>
<a id="__codelineno-100-10" name="__codelineno-100-10"></a><span class="w">    </span><span class="kd">@repository</span><span class="p">(</span><span class="nx">UserRepository</span><span class="p">)</span>
<a id="__codelineno-100-11" name="__codelineno-100-11"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nx">userRepository</span><span class="o">:</span><span class="w"> </span><span class="kt">UserRepository</span><span class="p">,</span>
<a id="__codelineno-100-12" name="__codelineno-100-12"></a><span class="w">    </span><span class="kd">@repository</span><span class="p">(</span><span class="nx">UserCredentialsRepository</span><span class="p">)</span>
<a id="__codelineno-100-13" name="__codelineno-100-13"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nx">userCredsRepository</span><span class="o">:</span><span class="w"> </span><span class="kt">UserCredentialsRepository</span><span class="p">,</span>
<a id="__codelineno-100-14" name="__codelineno-100-14"></a><span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-100-15" name="__codelineno-100-15"></a><span class="w">  </span><span class="nx">value</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">VerifyFunction</span><span class="p">.</span><span class="nx">SamlFn</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-100-16" name="__codelineno-100-16"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="nx">profile</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-100-17" name="__codelineno-100-17"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">userRepository</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span>
<a id="__codelineno-100-18" name="__codelineno-100-18"></a><span class="w">        </span><span class="nx">where</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-100-19" name="__codelineno-100-19"></a><span class="w">          </span><span class="cm">/* eslint-disable-next-line @typescript-eslint/no-explicit-any */</span>
<a id="__codelineno-100-20" name="__codelineno-100-20"></a><span class="w">          </span><span class="nx">email</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">profile</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">any</span><span class="p">).</span><span class="nx">_json</span><span class="p">.</span><span class="nx">email</span><span class="p">,</span>
<a id="__codelineno-100-21" name="__codelineno-100-21"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-100-22" name="__codelineno-100-22"></a><span class="w">      </span><span class="p">});</span>
<a id="__codelineno-100-23" name="__codelineno-100-23"></a><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">user</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-100-24" name="__codelineno-100-24"></a><span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">HttpErrors</span><span class="p">.</span><span class="nx">Unauthorized</span><span class="p">(</span><span class="nx">AuthErrorKeys</span><span class="p">.</span><span class="nx">InvalidCredentials</span><span class="p">);</span>
<a id="__codelineno-100-25" name="__codelineno-100-25"></a><span class="w">      </span><span class="p">}</span>
<a id="__codelineno-100-26" name="__codelineno-100-26"></a><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">user</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">user</span><span class="p">.</span><span class="nx">authProvider</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="s1">&#39;saml&#39;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">user</span><span class="p">.</span><span class="nx">authId</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="nx">profile</span><span class="p">.</span><span class="nx">id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-100-27" name="__codelineno-100-27"></a><span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">HttpErrors</span><span class="p">.</span><span class="nx">Unauthorized</span><span class="p">(</span><span class="nx">AuthErrorKeys</span><span class="p">.</span><span class="nx">InvalidCredentials</span><span class="p">);</span>
<a id="__codelineno-100-28" name="__codelineno-100-28"></a><span class="w">      </span><span class="p">}</span>
<a id="__codelineno-100-29" name="__codelineno-100-29"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">authUser</span><span class="o">:</span><span class="w"> </span><span class="kt">AuthUser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">AuthUser</span><span class="p">({</span>
<a id="__codelineno-100-30" name="__codelineno-100-30"></a><span class="w">        </span><span class="p">...</span><span class="nx">user</span><span class="p">,</span>
<a id="__codelineno-100-31" name="__codelineno-100-31"></a><span class="w">        </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="kt">user.id</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span>
<a id="__codelineno-100-32" name="__codelineno-100-32"></a><span class="w">      </span><span class="p">});</span>
<a id="__codelineno-100-33" name="__codelineno-100-33"></a><span class="w">      </span><span class="nx">authUser</span><span class="p">.</span><span class="nx">permissions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
<a id="__codelineno-100-34" name="__codelineno-100-34"></a><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">postVerifyProvider</span><span class="p">(</span><span class="nx">profile</span><span class="p">,</span><span class="w"> </span><span class="nx">authUser</span><span class="p">);</span>
<a id="__codelineno-100-35" name="__codelineno-100-35"></a><span class="w">    </span><span class="p">};</span>
<a id="__codelineno-100-36" name="__codelineno-100-36"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-100-37" name="__codelineno-100-37"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Please note the Verify function type <em>VerifyFunction.LocalPasswordFn</em></p>
<p>Now bind this provider to the application in application.ts.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-101-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-101-1" name="__codelineno-101-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">AuthenticationComponent</span><span class="p">,</span><span class="w"> </span><span class="nx">Strategies</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;loopback4-authentication&#39;</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-102-1">1</a></span>
<span class="normal"><a href="#__codelineno-102-2">2</a></span>
<span class="normal"><a href="#__codelineno-102-3">3</a></span>
<span class="normal"><a href="#__codelineno-102-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-102-1" name="__codelineno-102-1"></a><span class="c1">// Add authentication component</span>
<a id="__codelineno-102-2" name="__codelineno-102-2"></a><span class="k">this</span><span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="nx">AuthenticationComponent</span><span class="p">);</span>
<a id="__codelineno-102-3" name="__codelineno-102-3"></a><span class="c1">// Customize authentication verify handlers</span>
<a id="__codelineno-102-4" name="__codelineno-102-4"></a><span class="k">this</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">Strategies</span><span class="p">.</span><span class="nx">Passport</span><span class="p">.</span><span class="nx">SAML_VERIFIER</span><span class="p">).</span><span class="nx">toProvider</span><span class="p">(</span><span class="nx">SamlVerifyProvider</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>Finally, add the authenticate function as a sequence action to sequence.ts.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-103-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-103-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-103-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-103-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-103-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-103-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-103-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-103-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-103-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-103-10">10</a></span>
<span class="normal"><a href="#__codelineno-103-11">11</a></span>
<span class="normal"><a href="#__codelineno-103-12">12</a></span>
<span class="normal"><a href="#__codelineno-103-13">13</a></span>
<span class="normal"><a href="#__codelineno-103-14">14</a></span>
<span class="normal"><a href="#__codelineno-103-15">15</a></span>
<span class="normal"><a href="#__codelineno-103-16">16</a></span>
<span class="normal"><a href="#__codelineno-103-17">17</a></span>
<span class="normal"><a href="#__codelineno-103-18">18</a></span>
<span class="normal"><a href="#__codelineno-103-19">19</a></span>
<span class="normal"><a href="#__codelineno-103-20">20</a></span>
<span class="normal"><a href="#__codelineno-103-21">21</a></span>
<span class="normal"><a href="#__codelineno-103-22">22</a></span>
<span class="normal"><a href="#__codelineno-103-23">23</a></span>
<span class="normal"><a href="#__codelineno-103-24">24</a></span>
<span class="normal"><a href="#__codelineno-103-25">25</a></span>
<span class="normal"><a href="#__codelineno-103-26">26</a></span>
<span class="normal"><a href="#__codelineno-103-27">27</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-103-1" name="__codelineno-103-1"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">MySequence</span><span class="w"> </span><span class="k">implements</span><span class="w"> </span><span class="nx">SequenceHandler</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-103-2" name="__codelineno-103-2"></a><span class="w">  </span><span class="kr">constructor</span><span class="p">(</span>
<a id="__codelineno-103-3" name="__codelineno-103-3"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">FIND_ROUTE</span><span class="p">)</span><span class="w"> </span><span class="k">protected</span><span class="w"> </span><span class="nx">findRoute</span><span class="o">:</span><span class="w"> </span><span class="kt">FindRoute</span><span class="p">,</span>
<a id="__codelineno-103-4" name="__codelineno-103-4"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">PARSE_PARAMS</span><span class="p">)</span><span class="w"> </span><span class="k">protected</span><span class="w"> </span><span class="nx">parseParams</span><span class="o">:</span><span class="w"> </span><span class="kt">ParseParams</span><span class="p">,</span>
<a id="__codelineno-103-5" name="__codelineno-103-5"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">INVOKE_METHOD</span><span class="p">)</span><span class="w"> </span><span class="k">protected</span><span class="w"> </span><span class="nx">invoke</span><span class="o">:</span><span class="w"> </span><span class="kt">InvokeMethod</span><span class="p">,</span>
<a id="__codelineno-103-6" name="__codelineno-103-6"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">SEND</span><span class="p">)</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="nx">send</span><span class="o">:</span><span class="w"> </span><span class="kt">Send</span><span class="p">,</span>
<a id="__codelineno-103-7" name="__codelineno-103-7"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">REJECT</span><span class="p">)</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="nx">reject</span><span class="o">:</span><span class="w"> </span><span class="kt">Reject</span><span class="p">,</span>
<a id="__codelineno-103-8" name="__codelineno-103-8"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">AuthenticationBindings</span><span class="p">.</span><span class="nx">USER_AUTH_ACTION</span><span class="p">)</span>
<a id="__codelineno-103-9" name="__codelineno-103-9"></a><span class="w">    </span><span class="k">protected</span><span class="w"> </span><span class="nx">authenticateRequest</span><span class="o">:</span><span class="w"> </span><span class="kt">AuthenticateFn</span><span class="o">&lt;</span><span class="nx">AuthUser</span><span class="o">&gt;</span><span class="p">,</span>
<a id="__codelineno-103-10" name="__codelineno-103-10"></a><span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-103-11" name="__codelineno-103-11"></a><span class="w">  </span><span class="k">async</span><span class="w"> </span><span class="nx">handle</span><span class="p">(</span><span class="nx">context</span><span class="o">:</span><span class="w"> </span><span class="kt">RequestContext</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-103-12" name="__codelineno-103-12"></a><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-103-13" name="__codelineno-103-13"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="nx">request</span><span class="p">,</span><span class="w"> </span><span class="nx">response</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">context</span><span class="p">;</span>
<a id="__codelineno-103-14" name="__codelineno-103-14"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">route</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">findRoute</span><span class="p">(</span><span class="nx">request</span><span class="p">);</span>
<a id="__codelineno-103-15" name="__codelineno-103-15"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">parseParams</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span><span class="w"> </span><span class="nx">route</span><span class="p">);</span>
<a id="__codelineno-103-16" name="__codelineno-103-16"></a><span class="w">      </span><span class="nx">request</span><span class="p">.</span><span class="nx">body</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">args</span><span class="p">[</span><span class="nx">args</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">];</span>
<a id="__codelineno-103-17" name="__codelineno-103-17"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">authUser</span><span class="o">:</span><span class="w"> </span><span class="kt">AuthUser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">authenticateRequest</span><span class="p">(</span>
<a id="__codelineno-103-18" name="__codelineno-103-18"></a><span class="w">        </span><span class="nx">request</span><span class="p">,</span>
<a id="__codelineno-103-19" name="__codelineno-103-19"></a><span class="w">        </span><span class="nx">response</span><span class="p">,</span>
<a id="__codelineno-103-20" name="__codelineno-103-20"></a><span class="w">      </span><span class="p">);</span>
<a id="__codelineno-103-21" name="__codelineno-103-21"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">invoke</span><span class="p">(</span><span class="nx">route</span><span class="p">,</span><span class="w"> </span><span class="nx">args</span><span class="p">);</span>
<a id="__codelineno-103-22" name="__codelineno-103-22"></a><span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">response</span><span class="p">,</span><span class="w"> </span><span class="nx">result</span><span class="p">);</span>
<a id="__codelineno-103-23" name="__codelineno-103-23"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-103-24" name="__codelineno-103-24"></a><span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">reject</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">);</span>
<a id="__codelineno-103-25" name="__codelineno-103-25"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-103-26" name="__codelineno-103-26"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-103-27" name="__codelineno-103-27"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>After this, you can use decorator to apply auth to controller functions wherever needed. See below.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-104-1">  1</a></span>
<span class="normal"><a href="#__codelineno-104-2">  2</a></span>
<span class="normal"><a href="#__codelineno-104-3">  3</a></span>
<span class="normal"><a href="#__codelineno-104-4">  4</a></span>
<span class="normal"><a href="#__codelineno-104-5">  5</a></span>
<span class="normal"><a href="#__codelineno-104-6">  6</a></span>
<span class="normal"><a href="#__codelineno-104-7">  7</a></span>
<span class="normal"><a href="#__codelineno-104-8">  8</a></span>
<span class="normal"><a href="#__codelineno-104-9">  9</a></span>
<span class="normal"><a href="#__codelineno-104-10"> 10</a></span>
<span class="normal"><a href="#__codelineno-104-11"> 11</a></span>
<span class="normal"><a href="#__codelineno-104-12"> 12</a></span>
<span class="normal"><a href="#__codelineno-104-13"> 13</a></span>
<span class="normal"><a href="#__codelineno-104-14"> 14</a></span>
<span class="normal"><a href="#__codelineno-104-15"> 15</a></span>
<span class="normal"><a href="#__codelineno-104-16"> 16</a></span>
<span class="normal"><a href="#__codelineno-104-17"> 17</a></span>
<span class="normal"><a href="#__codelineno-104-18"> 18</a></span>
<span class="normal"><a href="#__codelineno-104-19"> 19</a></span>
<span class="normal"><a href="#__codelineno-104-20"> 20</a></span>
<span class="normal"><a href="#__codelineno-104-21"> 21</a></span>
<span class="normal"><a href="#__codelineno-104-22"> 22</a></span>
<span class="normal"><a href="#__codelineno-104-23"> 23</a></span>
<span class="normal"><a href="#__codelineno-104-24"> 24</a></span>
<span class="normal"><a href="#__codelineno-104-25"> 25</a></span>
<span class="normal"><a href="#__codelineno-104-26"> 26</a></span>
<span class="normal"><a href="#__codelineno-104-27"> 27</a></span>
<span class="normal"><a href="#__codelineno-104-28"> 28</a></span>
<span class="normal"><a href="#__codelineno-104-29"> 29</a></span>
<span class="normal"><a href="#__codelineno-104-30"> 30</a></span>
<span class="normal"><a href="#__codelineno-104-31"> 31</a></span>
<span class="normal"><a href="#__codelineno-104-32"> 32</a></span>
<span class="normal"><a href="#__codelineno-104-33"> 33</a></span>
<span class="normal"><a href="#__codelineno-104-34"> 34</a></span>
<span class="normal"><a href="#__codelineno-104-35"> 35</a></span>
<span class="normal"><a href="#__codelineno-104-36"> 36</a></span>
<span class="normal"><a href="#__codelineno-104-37"> 37</a></span>
<span class="normal"><a href="#__codelineno-104-38"> 38</a></span>
<span class="normal"><a href="#__codelineno-104-39"> 39</a></span>
<span class="normal"><a href="#__codelineno-104-40"> 40</a></span>
<span class="normal"><a href="#__codelineno-104-41"> 41</a></span>
<span class="normal"><a href="#__codelineno-104-42"> 42</a></span>
<span class="normal"><a href="#__codelineno-104-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-104-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-104-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-104-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-104-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-104-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-104-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-104-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-104-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-104-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-104-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-104-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-104-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-104-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-104-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-104-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-104-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-104-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-104-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-104-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-104-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-104-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-104-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-104-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-104-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-104-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-104-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-104-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-104-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-104-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-104-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-104-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-104-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-104-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-104-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-104-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-104-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-104-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-104-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-104-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-104-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-104-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-104-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-104-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-104-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-104-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-104-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-104-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-104-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-104-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-104-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-104-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-104-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-104-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-104-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-104-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-104-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-104-100">100</a></span>
<span class="normal"><a href="#__codelineno-104-101">101</a></span>
<span class="normal"><a href="#__codelineno-104-102">102</a></span>
<span class="normal"><a href="#__codelineno-104-103">103</a></span>
<span class="normal"><a href="#__codelineno-104-104">104</a></span>
<span class="normal"><a href="#__codelineno-104-105">105</a></span>
<span class="normal"><a href="#__codelineno-104-106">106</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-104-1" name="__codelineno-104-1"></a><span class="w">  </span><span class="kd">@authenticateClient</span><span class="p">(</span><span class="nx">STRATEGY</span><span class="p">.</span><span class="nx">CLIENT_PASSWORD</span><span class="p">)</span>
<a id="__codelineno-104-2" name="__codelineno-104-2"></a><span class="w">  </span><span class="kd">@authenticate</span><span class="p">(</span>
<a id="__codelineno-104-3" name="__codelineno-104-3"></a><span class="w">    </span><span class="nx">STRATEGY</span><span class="p">.</span><span class="nx">SAML</span><span class="p">,</span>
<a id="__codelineno-104-4" name="__codelineno-104-4"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-104-5" name="__codelineno-104-5"></a><span class="w">    </span><span class="nx">accessType</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;offline&#39;</span><span class="p">,</span>
<a id="__codelineno-104-6" name="__codelineno-104-6"></a><span class="w">    </span><span class="nx">scope</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;profile&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;email&#39;</span><span class="p">],</span>
<a id="__codelineno-104-7" name="__codelineno-104-7"></a><span class="w">    </span><span class="nx">callbackURL</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.SAML_CALLBACK_URL</span><span class="p">,</span>
<a id="__codelineno-104-8" name="__codelineno-104-8"></a><span class="w">    </span><span class="nx">issuer</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.SAML_ISSUER</span><span class="p">,</span>
<a id="__codelineno-104-9" name="__codelineno-104-9"></a><span class="w">    </span><span class="nx">cert</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.SAML_CERT</span><span class="p">,</span>
<a id="__codelineno-104-10" name="__codelineno-104-10"></a><span class="w">    </span><span class="nx">entryPoint</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.SAML_ENTRY_POINT</span><span class="p">,</span>
<a id="__codelineno-104-11" name="__codelineno-104-11"></a><span class="w">    </span><span class="nx">audience</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.SAML_AUDIENCE</span><span class="p">,</span>
<a id="__codelineno-104-12" name="__codelineno-104-12"></a><span class="w">    </span><span class="nx">logoutUrl</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.SAML_LOGOUT_URL</span><span class="p">,</span>
<a id="__codelineno-104-13" name="__codelineno-104-13"></a><span class="w">    </span><span class="nx">passReqToCallback</span><span class="o">:</span><span class="w"> </span><span class="o">!!+</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">SAML_AUTH_PASS_REQ_CALLBACK</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="mf">0</span><span class="p">),</span>
<a id="__codelineno-104-14" name="__codelineno-104-14"></a><span class="w">    </span><span class="nx">validateInResponseTo</span><span class="o">:</span><span class="w"> </span><span class="o">!!+</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">VALIDATE_RESPONSE</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="mf">1</span><span class="p">),</span>
<a id="__codelineno-104-15" name="__codelineno-104-15"></a><span class="w">    </span><span class="nx">idpIssuer</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.IDP_ISSUER</span><span class="p">,</span>
<a id="__codelineno-104-16" name="__codelineno-104-16"></a><span class="w">    </span><span class="nx">logoutCallbackUrl</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.SAML_LOGOUT_CALLBACK_URL</span><span class="p">,</span>
<a id="__codelineno-104-17" name="__codelineno-104-17"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-104-18" name="__codelineno-104-18"></a><span class="w">  </span><span class="p">)</span>
<a id="__codelineno-104-19" name="__codelineno-104-19"></a><span class="w">  </span><span class="kd">@authorize</span><span class="p">({</span><span class="nx">permissions</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;*&#39;</span><span class="p">]})</span>
<a id="__codelineno-104-20" name="__codelineno-104-20"></a><span class="w">  </span><span class="kd">@post</span><span class="p">(</span><span class="s1">&#39;/auth/saml&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-104-21" name="__codelineno-104-21"></a><span class="w">    </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;POST Call for saml based login&#39;</span><span class="p">,</span>
<a id="__codelineno-104-22" name="__codelineno-104-22"></a><span class="w">    </span><span class="nx">responses</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-104-23" name="__codelineno-104-23"></a><span class="w">      </span><span class="p">[</span><span class="nx">STATUS_CODE</span><span class="p">.</span><span class="nx">OK</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-104-24" name="__codelineno-104-24"></a><span class="w">        </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Saml Token Response&#39;</span><span class="p">,</span>
<a id="__codelineno-104-25" name="__codelineno-104-25"></a><span class="w">        </span><span class="nx">content</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-104-26" name="__codelineno-104-26"></a><span class="w">          </span><span class="p">[</span><span class="nx">CONTENT_TYPE</span><span class="p">.</span><span class="nb">JSON</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-104-27" name="__codelineno-104-27"></a><span class="w">            </span><span class="nx">schema</span><span class="o">:</span><span class="w"> </span><span class="p">{[</span><span class="nx">X_TS_TYPE</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="nx">TokenResponse</span><span class="p">},</span>
<a id="__codelineno-104-28" name="__codelineno-104-28"></a><span class="w">          </span><span class="p">},</span>
<a id="__codelineno-104-29" name="__codelineno-104-29"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-104-30" name="__codelineno-104-30"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-104-31" name="__codelineno-104-31"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-104-32" name="__codelineno-104-32"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-104-33" name="__codelineno-104-33"></a><span class="w">  </span><span class="k">async</span><span class="w"> </span><span class="nx">postLoginViaSaml</span><span class="p">(</span>
<a id="__codelineno-104-34" name="__codelineno-104-34"></a><span class="w">    </span><span class="kd">@requestBody</span><span class="p">({</span>
<a id="__codelineno-104-35" name="__codelineno-104-35"></a><span class="w">      </span><span class="nx">content</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-104-36" name="__codelineno-104-36"></a><span class="w">        </span><span class="p">[</span><span class="nx">CONTENT_TYPE</span><span class="p">.</span><span class="nx">FORM_URLENCODED</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-104-37" name="__codelineno-104-37"></a><span class="w">          </span><span class="nx">schema</span><span class="o">:</span><span class="w"> </span><span class="kt">getModelSchemaRef</span><span class="p">(</span><span class="nx">ClientAuthRequest</span><span class="p">),</span>
<a id="__codelineno-104-38" name="__codelineno-104-38"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-104-39" name="__codelineno-104-39"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-104-40" name="__codelineno-104-40"></a><span class="w">    </span><span class="p">})</span>
<a id="__codelineno-104-41" name="__codelineno-104-41"></a><span class="w">    </span><span class="nx">clientCreds?</span><span class="o">:</span><span class="w"> </span><span class="kt">ClientAuthRequest</span><span class="p">,</span><span class="w"> </span><span class="c1">//NOSONAR</span>
<a id="__codelineno-104-42" name="__codelineno-104-42"></a><span class="w">  </span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nb">Promise</span><span class="o">&lt;</span><span class="ow">void</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-104-43" name="__codelineno-104-43"></a><span class="w">    </span><span class="c1">//do nothing</span>
<a id="__codelineno-104-44" name="__codelineno-104-44"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-104-45" name="__codelineno-104-45"></a><span class="w">  </span><span class="kd">@authenticate</span><span class="p">(</span>
<a id="__codelineno-104-46" name="__codelineno-104-46"></a><span class="w">    </span><span class="nx">STRATEGY</span><span class="p">.</span><span class="nx">SAML</span><span class="p">,</span>
<a id="__codelineno-104-47" name="__codelineno-104-47"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-104-48" name="__codelineno-104-48"></a><span class="w">    </span><span class="nx">accessType</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;offline&#39;</span><span class="p">,</span>
<a id="__codelineno-104-49" name="__codelineno-104-49"></a><span class="w">    </span><span class="nx">scope</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;profile&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;email&#39;</span><span class="p">],</span>
<a id="__codelineno-104-50" name="__codelineno-104-50"></a><span class="w">    </span><span class="nx">callbackURL</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.SAML_CALLBACK_URL</span><span class="p">,</span>
<a id="__codelineno-104-51" name="__codelineno-104-51"></a><span class="w">    </span><span class="nx">issuer</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.SAML_ISSUER</span><span class="p">,</span>
<a id="__codelineno-104-52" name="__codelineno-104-52"></a><span class="w">    </span><span class="nx">cert</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.SAML_CERT</span><span class="p">,</span>
<a id="__codelineno-104-53" name="__codelineno-104-53"></a><span class="w">    </span><span class="nx">entryPoint</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.SAML_ENTRY_POINT</span><span class="p">,</span>
<a id="__codelineno-104-54" name="__codelineno-104-54"></a><span class="w">    </span><span class="nx">audience</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.SAML_AUDIENCE</span><span class="p">,</span>
<a id="__codelineno-104-55" name="__codelineno-104-55"></a><span class="w">    </span><span class="nx">logoutUrl</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.SAML_LOGOUT_URL</span><span class="p">,</span>
<a id="__codelineno-104-56" name="__codelineno-104-56"></a><span class="w">    </span><span class="nx">passReqToCallback</span><span class="o">:</span><span class="w"> </span><span class="o">!!+</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">SAML_AUTH_PASS_REQ_CALLBACK</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="mf">0</span><span class="p">),</span>
<a id="__codelineno-104-57" name="__codelineno-104-57"></a><span class="w">    </span><span class="nx">validateInResponseTo</span><span class="o">:</span><span class="w"> </span><span class="o">!!+</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">VALIDATE_RESPONSE</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="mf">1</span><span class="p">),</span>
<a id="__codelineno-104-58" name="__codelineno-104-58"></a><span class="w">    </span><span class="nx">idpIssuer</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.IDP_ISSUER</span><span class="p">,</span>
<a id="__codelineno-104-59" name="__codelineno-104-59"></a><span class="w">    </span><span class="nx">logoutCallbackUrl</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.SAML_LOGOUT_CALLBACK_URL</span><span class="p">,</span>
<a id="__codelineno-104-60" name="__codelineno-104-60"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-104-61" name="__codelineno-104-61"></a><span class="w">  </span><span class="p">)</span>
<a id="__codelineno-104-62" name="__codelineno-104-62"></a><span class="w">  </span><span class="kd">@authorize</span><span class="p">({</span><span class="nx">permissions</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;*&#39;</span><span class="p">]})</span>
<a id="__codelineno-104-63" name="__codelineno-104-63"></a><span class="w">  </span><span class="kd">@post</span><span class="p">(</span><span class="sb">`/auth/saml-redirect`</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-104-64" name="__codelineno-104-64"></a><span class="w">    </span><span class="nx">responses</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-104-65" name="__codelineno-104-65"></a><span class="w">      </span><span class="p">[</span><span class="nx">STATUS_CODE</span><span class="p">.</span><span class="nx">OK</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-104-66" name="__codelineno-104-66"></a><span class="w">        </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Okta SAML callback&#39;</span><span class="p">,</span>
<a id="__codelineno-104-67" name="__codelineno-104-67"></a><span class="w">        </span><span class="nx">content</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-104-68" name="__codelineno-104-68"></a><span class="w">          </span><span class="p">[</span><span class="nx">CONTENT_TYPE</span><span class="p">.</span><span class="nb">JSON</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-104-69" name="__codelineno-104-69"></a><span class="w">            </span><span class="nx">schema</span><span class="o">:</span><span class="w"> </span><span class="p">{[</span><span class="nx">X_TS_TYPE</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="nx">TokenResponse</span><span class="p">},</span>
<a id="__codelineno-104-70" name="__codelineno-104-70"></a><span class="w">          </span><span class="p">},</span>
<a id="__codelineno-104-71" name="__codelineno-104-71"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-104-72" name="__codelineno-104-72"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-104-73" name="__codelineno-104-73"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-104-74" name="__codelineno-104-74"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-104-75" name="__codelineno-104-75"></a><span class="w">  </span><span class="k">async</span><span class="w"> </span><span class="nx">oktaSamlCallback</span><span class="p">(</span>
<a id="__codelineno-104-76" name="__codelineno-104-76"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">AuthenticationBindings</span><span class="p">.</span><span class="nx">CURRENT_USER</span><span class="p">)</span>
<a id="__codelineno-104-77" name="__codelineno-104-77"></a><span class="w">    </span><span class="nx">user</span><span class="o">:</span><span class="w"> </span><span class="kt">AuthUser</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kc">undefined</span><span class="p">,</span>
<a id="__codelineno-104-78" name="__codelineno-104-78"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">RestBindings</span><span class="p">.</span><span class="nx">Http</span><span class="p">.</span><span class="nx">REQUEST</span><span class="p">)</span><span class="w"> </span><span class="nx">request</span><span class="o">:</span><span class="w"> </span><span class="kt">Request</span><span class="p">,</span>
<a id="__codelineno-104-79" name="__codelineno-104-79"></a><span class="w">    </span><span class="kd">@param</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="kt">string</span><span class="p">(</span><span class="s1">&#39;client&#39;</span><span class="p">)</span><span class="w"> </span><span class="nx">clientId</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span>
<a id="__codelineno-104-80" name="__codelineno-104-80"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">RestBindings</span><span class="p">.</span><span class="nx">Http</span><span class="p">.</span><span class="nx">RESPONSE</span><span class="p">)</span><span class="w"> </span><span class="nx">response</span><span class="o">:</span><span class="w"> </span><span class="kt">Response</span><span class="p">,</span>
<a id="__codelineno-104-81" name="__codelineno-104-81"></a><span class="w">    </span><span class="kd">@requestBody</span><span class="p">({</span>
<a id="__codelineno-104-82" name="__codelineno-104-82"></a><span class="w">      </span><span class="nx">content</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-104-83" name="__codelineno-104-83"></a><span class="w">        </span><span class="p">[</span><span class="nx">CONTENT_TYPE</span><span class="p">.</span><span class="nx">FORM_URLENCODED</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="p">{},</span>
<a id="__codelineno-104-84" name="__codelineno-104-84"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-104-85" name="__codelineno-104-85"></a><span class="w">    </span><span class="p">})</span>
<a id="__codelineno-104-86" name="__codelineno-104-86"></a><span class="w">    </span><span class="nx">oktaData</span><span class="o">:</span><span class="w"> </span><span class="kt">AnyObject</span><span class="p">,</span>
<a id="__codelineno-104-87" name="__codelineno-104-87"></a><span class="w">  </span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nb">Promise</span><span class="o">&lt;</span><span class="ow">void</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-104-88" name="__codelineno-104-88"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">clientId</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">!</span><span class="nx">user</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-104-89" name="__codelineno-104-89"></a><span class="w">      </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">HttpErrors</span><span class="p">.</span><span class="nx">Unauthorized</span><span class="p">(</span><span class="nx">AuthErrorKeys</span><span class="p">.</span><span class="nx">ClientInvalid</span><span class="p">);</span>
<a id="__codelineno-104-90" name="__codelineno-104-90"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-104-91" name="__codelineno-104-91"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">authClientRepository</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span>
<a id="__codelineno-104-92" name="__codelineno-104-92"></a><span class="w">      </span><span class="nx">where</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-104-93" name="__codelineno-104-93"></a><span class="w">        </span><span class="nx">clientId</span><span class="p">,</span>
<a id="__codelineno-104-94" name="__codelineno-104-94"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-104-95" name="__codelineno-104-95"></a><span class="w">    </span><span class="p">});</span>
<a id="__codelineno-104-96" name="__codelineno-104-96"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">client</span><span class="o">?</span><span class="p">.</span><span class="nx">redirectUrl</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-104-97" name="__codelineno-104-97"></a><span class="w">      </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">HttpErrors</span><span class="p">.</span><span class="nx">Unauthorized</span><span class="p">(</span><span class="nx">AuthErrorKeys</span><span class="p">.</span><span class="nx">ClientInvalid</span><span class="p">);</span>
<a id="__codelineno-104-98" name="__codelineno-104-98"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-104-99" name="__codelineno-104-99"></a><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-104-100" name="__codelineno-104-100"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">getAuthCode</span><span class="p">(</span><span class="nx">client</span><span class="p">,</span><span class="w"> </span><span class="nx">user</span><span class="p">);</span>
<a id="__codelineno-104-101" name="__codelineno-104-101"></a><span class="w">      </span><span class="nx">response</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">client</span><span class="p">.</span><span class="nx">redirectUrl</span><span class="si">}</span><span class="sb">?code=</span><span class="si">${</span><span class="nx">token</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<a id="__codelineno-104-102" name="__codelineno-104-102"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-104-103" name="__codelineno-104-103"></a><span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">logger</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
<a id="__codelineno-104-104" name="__codelineno-104-104"></a><span class="w">      </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">HttpErrors</span><span class="p">.</span><span class="nx">Unauthorized</span><span class="p">(</span><span class="nx">AuthErrorKeys</span><span class="p">.</span><span class="nx">InvalidCredentials</span><span class="p">);</span>
<a id="__codelineno-104-105" name="__codelineno-104-105"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-104-106" name="__codelineno-104-106"></a><span class="w">  </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Please note above that we are creating two new APIs for SAML. The first one is for UI clients to hit. We are authenticating client as well, then passing the details to the SAML. Then, the actual authentication is done by SAML authorization url, which redirects to the second API we created after success. The first API method body is empty as we do not need to handle its response. The SAML provider in this package will do the redirection for you automatically.</p>
<p>Note: For <code>auth/saml-redirect</code> one needs to configure the SSO path by incorporating the client ID as a query parameter in existing application set up within your Okta environment for which you intend to enable SSO as follows:</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-105-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-105-1" name="__codelineno-105-1"></a>http://localhost:3000/auth/saml-redirect?client=YOUR_CLIENT_ID
</code></pre></div></td></tr></table></div>
<p>For accessing the authenticated AuthUser model reference, you can inject the CURRENT_USER provider, provided by the extension, which is populated by the auth action sequence above.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-106-1">1</a></span>
<span class="normal"><a href="#__codelineno-106-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-106-1" name="__codelineno-106-1"></a><span class="w">  </span><span class="kd">@inject</span><span class="p">.</span><span class="nx">getter</span><span class="p">(</span><span class="nx">AuthenticationBindings</span><span class="p">.</span><span class="nx">CURRENT_USER</span><span class="p">)</span>
<a id="__codelineno-106-2" name="__codelineno-106-2"></a><span class="w">  </span><span class="k">private</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="nx">getCurrentUser</span><span class="o">:</span><span class="w"> </span><span class="kt">Getter</span><span class="o">&lt;</span><span class="nx">User</span><span class="o">&gt;</span><span class="p">,</span>
</code></pre></div></td></tr></table></div>
<p>The <code>logoutVerify</code> function is used in the node-saml library as a part of the Passport SAML authentication process. This function is used to verify the authenticity of a SAML logout request.
The logout process in SAML is used to end the user's session on the service provider, and the logoutVerify function is used to verify that the logout request is coming from a trusted IdP.
The implementation of the logoutVerify function may vary depending on the specific requirements and the security constraints of the application. It is typically used to verify the signature on the logout request, to ensure that the request has not been tampered with, and to extract the user's identity information from the request.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-107-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-107-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-107-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-107-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-107-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-107-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-107-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-107-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-107-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-107-10">10</a></span>
<span class="normal"><a href="#__codelineno-107-11">11</a></span>
<span class="normal"><a href="#__codelineno-107-12">12</a></span>
<span class="normal"><a href="#__codelineno-107-13">13</a></span>
<span class="normal"><a href="#__codelineno-107-14">14</a></span>
<span class="normal"><a href="#__codelineno-107-15">15</a></span>
<span class="normal"><a href="#__codelineno-107-16">16</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-107-1" name="__codelineno-107-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">logoutVerify</span><span class="p">(</span>
<a id="__codelineno-107-2" name="__codelineno-107-2"></a><span class="w">  </span><span class="nx">req</span><span class="o">:</span><span class="w"> </span><span class="kt">Request</span><span class="o">&lt;</span><span class="nx">AnyObject</span><span class="p">,</span><span class="w"> </span><span class="nx">AnyObject</span><span class="p">,</span><span class="w"> </span><span class="nx">AnyObject</span><span class="o">&gt;</span><span class="p">,</span>
<a id="__codelineno-107-3" name="__codelineno-107-3"></a><span class="w">  </span><span class="nx">profile</span><span class="o">:</span><span class="w"> </span><span class="kt">Profile</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<a id="__codelineno-107-4" name="__codelineno-107-4"></a><span class="w">  </span><span class="nx">done</span><span class="o">:</span><span class="w"> </span><span class="kt">VerifiedCallback</span><span class="p">,</span>
<a id="__codelineno-107-5" name="__codelineno-107-5"></a><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-107-6" name="__codelineno-107-6"></a><span class="w">  </span><span class="c1">// Check if a user is currently authenticated</span>
<a id="__codelineno-107-7" name="__codelineno-107-7"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">isAuthenticated</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-107-8" name="__codelineno-107-8"></a><span class="w">    </span><span class="c1">// Log the user out by removing their session data</span>
<a id="__codelineno-107-9" name="__codelineno-107-9"></a><span class="w">    </span><span class="nx">req</span><span class="p">.</span><span class="nx">logout</span><span class="p">(</span><span class="nx">done</span><span class="p">);</span>
<a id="__codelineno-107-10" name="__codelineno-107-10"></a><span class="w">    </span><span class="c1">// Call the &quot;done&quot; callback to indicate success</span>
<a id="__codelineno-107-11" name="__codelineno-107-11"></a><span class="w">    </span><span class="nx">done</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="nx">message</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;User successfully logged out&#39;</span><span class="p">});</span>
<a id="__codelineno-107-12" name="__codelineno-107-12"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-107-13" name="__codelineno-107-13"></a><span class="w">    </span><span class="c1">// Call the &quot;done&quot; callback with an error to indicate that the user is not logged in</span>
<a id="__codelineno-107-14" name="__codelineno-107-14"></a><span class="w">    </span><span class="nx">done</span><span class="p">(</span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="s1">&#39;User is not currently logged in&#39;</span><span class="p">));</span>
<a id="__codelineno-107-15" name="__codelineno-107-15"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-107-16" name="__codelineno-107-16"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>This function is called when a user logs out of the application.Once this function is implemented,it will be called when the user logs out of the application,allowing the application to perform any necessary tasks before ending the user's session.
@param req - The request object.
@param {Profile | null} profile - The user's profile, as returned by the provider.
@param {VerifiedCallback} done - A callback to be called when the verificationis complete.</p>
<h3 id="https-proxy-support-for-keycloak-and-google-auth">Https proxy support for keycloak and google auth<a class="headerlink" href="#https-proxy-support-for-keycloak-and-google-auth" title="Permanent link">&para;</a></h3>
<p>If a https proxy agent is needed for keycloak and google auth, just add an environment variable named <code>HTTPS_PROXY</code> or <code>https_proxy</code> with proxy url as value. It will add that proxy agent to the request.</p>
<h2 id="middleware-sequence-support">Middleware Sequence Support<a class="headerlink" href="#middleware-sequence-support" title="Permanent link">&para;</a></h2>
<p>As action based sequence will be deprecated soon, we have provided support for middleware based sequences. If you are using middleware sequence you can add authentication to your application by enabling client or user authentication middleware. This can be done by binding the AuthenticationBindings.CONFIG :</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-108-1">1</a></span>
<span class="normal"><a href="#__codelineno-108-2">2</a></span>
<span class="normal"><a href="#__codelineno-108-3">3</a></span>
<span class="normal"><a href="#__codelineno-108-4">4</a></span>
<span class="normal"><a href="#__codelineno-108-5">5</a></span>
<span class="normal"><a href="#__codelineno-108-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-108-1" name="__codelineno-108-1"></a><span class="k">this</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">AuthenticationBindings</span><span class="p">.</span><span class="nx">CONFIG</span><span class="p">).</span><span class="nx">to</span><span class="p">({</span>
<a id="__codelineno-108-2" name="__codelineno-108-2"></a><span class="w">  </span><span class="nx">useClientAuthenticationMiddleware</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<a id="__codelineno-108-3" name="__codelineno-108-3"></a><span class="w">  </span><span class="nx">useUserAuthenticationMiddleware</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<a id="__codelineno-108-4" name="__codelineno-108-4"></a><span class="p">});</span>
<a id="__codelineno-108-5" name="__codelineno-108-5"></a>
<a id="__codelineno-108-6" name="__codelineno-108-6"></a><span class="k">this</span><span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="nx">AuthenticationComponent</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>This binding needs to be done before adding the Authentication component to your application.
Apart from this all other steps for authentication for all strategies remain the same.</p>
<h3 id="custom-sequence-support">Custom Sequence Support<a class="headerlink" href="#custom-sequence-support" title="Permanent link">&para;</a></h3>
<p>You can also configure <code>ClientAuthenticationMiddlewareProvider</code> and <code>UserAuthenticationMiddlewareProvider</code> options, which can be invoked using a custom sequence. See the sample below.</p>
<p><code>custom-sequence.ts</code></p>
<div class="language-ts highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">custom-sequence.ts</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-109-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-109-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-109-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-109-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-109-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-109-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-109-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-109-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-109-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-109-10">10</a></span>
<span class="normal"><a href="#__codelineno-109-11">11</a></span>
<span class="normal"><a href="#__codelineno-109-12">12</a></span>
<span class="normal"><a href="#__codelineno-109-13">13</a></span>
<span class="normal"><a href="#__codelineno-109-14">14</a></span>
<span class="normal"><a href="#__codelineno-109-15">15</a></span>
<span class="normal"><a href="#__codelineno-109-16">16</a></span>
<span class="normal"><a href="#__codelineno-109-17">17</a></span>
<span class="normal"><a href="#__codelineno-109-18">18</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-109-1" name="__codelineno-109-1"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">CustomSequence</span><span class="w"> </span><span class="k">implements</span><span class="w"> </span><span class="nx">SequenceHandler</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-109-2" name="__codelineno-109-2"></a><span class="w">  </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">INVOKE_MIDDLEWARE</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="nx">optional</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">})</span>
<a id="__codelineno-109-3" name="__codelineno-109-3"></a><span class="w">  </span><span class="k">protected</span><span class="w"> </span><span class="nx">invokeMiddleware</span><span class="o">:</span><span class="w"> </span><span class="kt">InvokeMiddleware</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<a id="__codelineno-109-4" name="__codelineno-109-4"></a><span class="w">  </span><span class="p">...</span>
<a id="__codelineno-109-5" name="__codelineno-109-5"></a>
<a id="__codelineno-109-6" name="__codelineno-109-6"></a><span class="w">  </span><span class="k">async</span><span class="w"> </span><span class="nx">handle</span><span class="p">(</span><span class="nx">context</span><span class="o">:</span><span class="w"> </span><span class="kt">RequestContext</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-109-7" name="__codelineno-109-7"></a><span class="w">    </span><span class="p">...</span>
<a id="__codelineno-109-8" name="__codelineno-109-8"></a><span class="w">    </span><span class="p">...</span>
<a id="__codelineno-109-9" name="__codelineno-109-9"></a><span class="w">    </span><span class="c1">// call custom registered middlewares in the pre-invoke chain</span>
<a id="__codelineno-109-10" name="__codelineno-109-10"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">finished</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">invokeMiddleware</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-109-11" name="__codelineno-109-11"></a><span class="w">      </span><span class="nx">chain</span><span class="o">:</span><span class="w"> </span><span class="kt">CustomMiddlewareChain.PRE_INVOKE</span><span class="p">,</span>
<a id="__codelineno-109-12" name="__codelineno-109-12"></a><span class="w">    </span><span class="p">});</span>
<a id="__codelineno-109-13" name="__codelineno-109-13"></a><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">finished</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="p">;</span>
<a id="__codelineno-109-14" name="__codelineno-109-14"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">invoke</span><span class="p">(</span><span class="nx">route</span><span class="p">,</span><span class="w"> </span><span class="nx">args</span><span class="p">);</span>
<a id="__codelineno-109-15" name="__codelineno-109-15"></a><span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">response</span><span class="p">,</span><span class="w"> </span><span class="nx">result</span><span class="p">);</span>
<a id="__codelineno-109-16" name="__codelineno-109-16"></a><span class="w">   </span><span class="p">...</span>
<a id="__codelineno-109-17" name="__codelineno-109-17"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-109-18" name="__codelineno-109-18"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p><code>application.ts</code></p>
<div class="language-ts highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">application.ts</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-110-1">1</a></span>
<span class="normal"><a href="#__codelineno-110-2">2</a></span>
<span class="normal"><a href="#__codelineno-110-3">3</a></span>
<span class="normal"><a href="#__codelineno-110-4">4</a></span>
<span class="normal"><a href="#__codelineno-110-5">5</a></span>
<span class="normal"><a href="#__codelineno-110-6">6</a></span>
<span class="normal"><a href="#__codelineno-110-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-110-1" name="__codelineno-110-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">ClientAuthenticationMiddlewareProvider</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;loopback4-authentication&#39;</span><span class="p">;</span>
<a id="__codelineno-110-2" name="__codelineno-110-2"></a><span class="p">...</span>
<a id="__codelineno-110-3" name="__codelineno-110-3"></a><span class="p">...</span>
<a id="__codelineno-110-4" name="__codelineno-110-4"></a><span class="c1">// bind middleware with custom options</span>
<a id="__codelineno-110-5" name="__codelineno-110-5"></a><span class="k">this</span><span class="p">.</span><span class="nx">middleware</span><span class="p">(</span><span class="nx">ClientAuthenticationMiddlewareProvider</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-110-6" name="__codelineno-110-6"></a><span class="w">  </span><span class="nx">chain</span><span class="o">:</span><span class="w"> </span><span class="kt">CustomMiddlwareChain.PRE_INVOKE</span>
<a id="__codelineno-110-7" name="__codelineno-110-7"></a><span class="p">});</span>
</code></pre></div></td></tr></table></div>
<h3 id="passport-auth0">Passport Auth0<a class="headerlink" href="#passport-auth0" title="Permanent link">&para;</a></h3>
<p>In order to use it, run <code>npm install passport-auth0</code> and <code>npm install @types/passport-auth0</code>.
First, create a AuthUser model implementing the IAuthUser interface. You can implement the interface in the user model itself. See sample below.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-111-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-111-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-111-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-111-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-111-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-111-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-111-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-111-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-111-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-111-10">10</a></span>
<span class="normal"><a href="#__codelineno-111-11">11</a></span>
<span class="normal"><a href="#__codelineno-111-12">12</a></span>
<span class="normal"><a href="#__codelineno-111-13">13</a></span>
<span class="normal"><a href="#__codelineno-111-14">14</a></span>
<span class="normal"><a href="#__codelineno-111-15">15</a></span>
<span class="normal"><a href="#__codelineno-111-16">16</a></span>
<span class="normal"><a href="#__codelineno-111-17">17</a></span>
<span class="normal"><a href="#__codelineno-111-18">18</a></span>
<span class="normal"><a href="#__codelineno-111-19">19</a></span>
<span class="normal"><a href="#__codelineno-111-20">20</a></span>
<span class="normal"><a href="#__codelineno-111-21">21</a></span>
<span class="normal"><a href="#__codelineno-111-22">22</a></span>
<span class="normal"><a href="#__codelineno-111-23">23</a></span>
<span class="normal"><a href="#__codelineno-111-24">24</a></span>
<span class="normal"><a href="#__codelineno-111-25">25</a></span>
<span class="normal"><a href="#__codelineno-111-26">26</a></span>
<span class="normal"><a href="#__codelineno-111-27">27</a></span>
<span class="normal"><a href="#__codelineno-111-28">28</a></span>
<span class="normal"><a href="#__codelineno-111-29">29</a></span>
<span class="normal"><a href="#__codelineno-111-30">30</a></span>
<span class="normal"><a href="#__codelineno-111-31">31</a></span>
<span class="normal"><a href="#__codelineno-111-32">32</a></span>
<span class="normal"><a href="#__codelineno-111-33">33</a></span>
<span class="normal"><a href="#__codelineno-111-34">34</a></span>
<span class="normal"><a href="#__codelineno-111-35">35</a></span>
<span class="normal"><a href="#__codelineno-111-36">36</a></span>
<span class="normal"><a href="#__codelineno-111-37">37</a></span>
<span class="normal"><a href="#__codelineno-111-38">38</a></span>
<span class="normal"><a href="#__codelineno-111-39">39</a></span>
<span class="normal"><a href="#__codelineno-111-40">40</a></span>
<span class="normal"><a href="#__codelineno-111-41">41</a></span>
<span class="normal"><a href="#__codelineno-111-42">42</a></span>
<span class="normal"><a href="#__codelineno-111-43">43</a></span>
<span class="normal"><a href="#__codelineno-111-44">44</a></span>
<span class="normal"><a href="#__codelineno-111-45">45</a></span>
<span class="normal"><a href="#__codelineno-111-46">46</a></span>
<span class="normal"><a href="#__codelineno-111-47">47</a></span>
<span class="normal"><a href="#__codelineno-111-48">48</a></span>
<span class="normal"><a href="#__codelineno-111-49">49</a></span>
<span class="normal"><a href="#__codelineno-111-50">50</a></span>
<span class="normal"><a href="#__codelineno-111-51">51</a></span>
<span class="normal"><a href="#__codelineno-111-52">52</a></span>
<span class="normal"><a href="#__codelineno-111-53">53</a></span>
<span class="normal"><a href="#__codelineno-111-54">54</a></span>
<span class="normal"><a href="#__codelineno-111-55">55</a></span>
<span class="normal"><a href="#__codelineno-111-56">56</a></span>
<span class="normal"><a href="#__codelineno-111-57">57</a></span>
<span class="normal"><a href="#__codelineno-111-58">58</a></span>
<span class="normal"><a href="#__codelineno-111-59">59</a></span>
<span class="normal"><a href="#__codelineno-111-60">60</a></span>
<span class="normal"><a href="#__codelineno-111-61">61</a></span>
<span class="normal"><a href="#__codelineno-111-62">62</a></span>
<span class="normal"><a href="#__codelineno-111-63">63</a></span>
<span class="normal"><a href="#__codelineno-111-64">64</a></span>
<span class="normal"><a href="#__codelineno-111-65">65</a></span>
<span class="normal"><a href="#__codelineno-111-66">66</a></span>
<span class="normal"><a href="#__codelineno-111-67">67</a></span>
<span class="normal"><a href="#__codelineno-111-68">68</a></span>
<span class="normal"><a href="#__codelineno-111-69">69</a></span>
<span class="normal"><a href="#__codelineno-111-70">70</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-111-1" name="__codelineno-111-1"></a><span class="kd">@model</span><span class="p">({</span>
<a id="__codelineno-111-2" name="__codelineno-111-2"></a><span class="w">  </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;users&#39;</span><span class="p">,</span>
<a id="__codelineno-111-3" name="__codelineno-111-3"></a><span class="p">})</span>
<a id="__codelineno-111-4" name="__codelineno-111-4"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">User</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">Entity</span><span class="w"> </span><span class="k">implements</span><span class="w"> </span><span class="nx">IAuthUser</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-111-5" name="__codelineno-111-5"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-111-6" name="__codelineno-111-6"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;number&#39;</span><span class="p">,</span>
<a id="__codelineno-111-7" name="__codelineno-111-7"></a><span class="w">    </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<a id="__codelineno-111-8" name="__codelineno-111-8"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-111-9" name="__codelineno-111-9"></a><span class="w">  </span><span class="nx">id?</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">;</span>
<a id="__codelineno-111-10" name="__codelineno-111-10"></a>
<a id="__codelineno-111-11" name="__codelineno-111-11"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-111-12" name="__codelineno-111-12"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-111-13" name="__codelineno-111-13"></a><span class="w">    </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<a id="__codelineno-111-14" name="__codelineno-111-14"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;first_name&#39;</span><span class="p">,</span>
<a id="__codelineno-111-15" name="__codelineno-111-15"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-111-16" name="__codelineno-111-16"></a><span class="w">  </span><span class="nx">firstName</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-111-17" name="__codelineno-111-17"></a>
<a id="__codelineno-111-18" name="__codelineno-111-18"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-111-19" name="__codelineno-111-19"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-111-20" name="__codelineno-111-20"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;last_name&#39;</span><span class="p">,</span>
<a id="__codelineno-111-21" name="__codelineno-111-21"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-111-22" name="__codelineno-111-22"></a><span class="w">  </span><span class="nx">lastName</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-111-23" name="__codelineno-111-23"></a>
<a id="__codelineno-111-24" name="__codelineno-111-24"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-111-25" name="__codelineno-111-25"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-111-26" name="__codelineno-111-26"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;middle_name&#39;</span><span class="p">,</span>
<a id="__codelineno-111-27" name="__codelineno-111-27"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-111-28" name="__codelineno-111-28"></a><span class="w">  </span><span class="nx">middleName?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-111-29" name="__codelineno-111-29"></a>
<a id="__codelineno-111-30" name="__codelineno-111-30"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-111-31" name="__codelineno-111-31"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-111-32" name="__codelineno-111-32"></a><span class="w">    </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<a id="__codelineno-111-33" name="__codelineno-111-33"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-111-34" name="__codelineno-111-34"></a><span class="w">  </span><span class="nx">username</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-111-35" name="__codelineno-111-35"></a>
<a id="__codelineno-111-36" name="__codelineno-111-36"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-111-37" name="__codelineno-111-37"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-111-38" name="__codelineno-111-38"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-111-39" name="__codelineno-111-39"></a><span class="w">  </span><span class="nx">email?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-111-40" name="__codelineno-111-40"></a>
<a id="__codelineno-111-41" name="__codelineno-111-41"></a><span class="w">  </span><span class="c1">// Auth provider - &#39;auth0&#39;</span>
<a id="__codelineno-111-42" name="__codelineno-111-42"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-111-43" name="__codelineno-111-43"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-111-44" name="__codelineno-111-44"></a><span class="w">    </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<a id="__codelineno-111-45" name="__codelineno-111-45"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;auth_provider&#39;</span><span class="p">,</span>
<a id="__codelineno-111-46" name="__codelineno-111-46"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-111-47" name="__codelineno-111-47"></a><span class="w">  </span><span class="nx">authProvider</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-111-48" name="__codelineno-111-48"></a>
<a id="__codelineno-111-49" name="__codelineno-111-49"></a><span class="w">  </span><span class="c1">// Id from external provider</span>
<a id="__codelineno-111-50" name="__codelineno-111-50"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-111-51" name="__codelineno-111-51"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-111-52" name="__codelineno-111-52"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;auth_id&#39;</span><span class="p">,</span>
<a id="__codelineno-111-53" name="__codelineno-111-53"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-111-54" name="__codelineno-111-54"></a><span class="w">  </span><span class="nx">authId?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-111-55" name="__codelineno-111-55"></a>
<a id="__codelineno-111-56" name="__codelineno-111-56"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-111-57" name="__codelineno-111-57"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-111-58" name="__codelineno-111-58"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;auth_token&#39;</span><span class="p">,</span>
<a id="__codelineno-111-59" name="__codelineno-111-59"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-111-60" name="__codelineno-111-60"></a><span class="w">  </span><span class="nx">authToken?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-111-61" name="__codelineno-111-61"></a>
<a id="__codelineno-111-62" name="__codelineno-111-62"></a><span class="w">  </span><span class="kd">@property</span><span class="p">({</span>
<a id="__codelineno-111-63" name="__codelineno-111-63"></a><span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<a id="__codelineno-111-64" name="__codelineno-111-64"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-111-65" name="__codelineno-111-65"></a><span class="w">  </span><span class="nx">password?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-111-66" name="__codelineno-111-66"></a>
<a id="__codelineno-111-67" name="__codelineno-111-67"></a><span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">data?</span><span class="o">:</span><span class="w"> </span><span class="kt">Partial</span><span class="o">&lt;</span><span class="nx">User</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-111-68" name="__codelineno-111-68"></a><span class="w">    </span><span class="k">super</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<a id="__codelineno-111-69" name="__codelineno-111-69"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-111-70" name="__codelineno-111-70"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Now bind this model to USER_MODEL key in application.ts</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-112-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-112-1" name="__codelineno-112-1"></a><span class="k">this</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">AuthenticationBindings</span><span class="p">.</span><span class="nx">USER_MODEL</span><span class="p">).</span><span class="nx">to</span><span class="p">(</span><span class="nx">User</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>Create CRUD repository for the above model. Use loopback CLI.</p>
<div class="language-sh highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-113-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-113-1" name="__codelineno-113-1"></a>lb4<span class="w"> </span>repository
</code></pre></div></td></tr></table></div>
<p>Add the verifier function for the strategy. You need to create a provider for the same. You can add your application specific business logic for client auth here. Here is a simple example.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-114-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-114-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-114-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-114-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-114-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-114-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-114-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-114-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-114-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-114-10">10</a></span>
<span class="normal"><a href="#__codelineno-114-11">11</a></span>
<span class="normal"><a href="#__codelineno-114-12">12</a></span>
<span class="normal"><a href="#__codelineno-114-13">13</a></span>
<span class="normal"><a href="#__codelineno-114-14">14</a></span>
<span class="normal"><a href="#__codelineno-114-15">15</a></span>
<span class="normal"><a href="#__codelineno-114-16">16</a></span>
<span class="normal"><a href="#__codelineno-114-17">17</a></span>
<span class="normal"><a href="#__codelineno-114-18">18</a></span>
<span class="normal"><a href="#__codelineno-114-19">19</a></span>
<span class="normal"><a href="#__codelineno-114-20">20</a></span>
<span class="normal"><a href="#__codelineno-114-21">21</a></span>
<span class="normal"><a href="#__codelineno-114-22">22</a></span>
<span class="normal"><a href="#__codelineno-114-23">23</a></span>
<span class="normal"><a href="#__codelineno-114-24">24</a></span>
<span class="normal"><a href="#__codelineno-114-25">25</a></span>
<span class="normal"><a href="#__codelineno-114-26">26</a></span>
<span class="normal"><a href="#__codelineno-114-27">27</a></span>
<span class="normal"><a href="#__codelineno-114-28">28</a></span>
<span class="normal"><a href="#__codelineno-114-29">29</a></span>
<span class="normal"><a href="#__codelineno-114-30">30</a></span>
<span class="normal"><a href="#__codelineno-114-31">31</a></span>
<span class="normal"><a href="#__codelineno-114-32">32</a></span>
<span class="normal"><a href="#__codelineno-114-33">33</a></span>
<span class="normal"><a href="#__codelineno-114-34">34</a></span>
<span class="normal"><a href="#__codelineno-114-35">35</a></span>
<span class="normal"><a href="#__codelineno-114-36">36</a></span>
<span class="normal"><a href="#__codelineno-114-37">37</a></span>
<span class="normal"><a href="#__codelineno-114-38">38</a></span>
<span class="normal"><a href="#__codelineno-114-39">39</a></span>
<span class="normal"><a href="#__codelineno-114-40">40</a></span>
<span class="normal"><a href="#__codelineno-114-41">41</a></span>
<span class="normal"><a href="#__codelineno-114-42">42</a></span>
<span class="normal"><a href="#__codelineno-114-43">43</a></span>
<span class="normal"><a href="#__codelineno-114-44">44</a></span>
<span class="normal"><a href="#__codelineno-114-45">45</a></span>
<span class="normal"><a href="#__codelineno-114-46">46</a></span>
<span class="normal"><a href="#__codelineno-114-47">47</a></span>
<span class="normal"><a href="#__codelineno-114-48">48</a></span>
<span class="normal"><a href="#__codelineno-114-49">49</a></span>
<span class="normal"><a href="#__codelineno-114-50">50</a></span>
<span class="normal"><a href="#__codelineno-114-51">51</a></span>
<span class="normal"><a href="#__codelineno-114-52">52</a></span>
<span class="normal"><a href="#__codelineno-114-53">53</a></span>
<span class="normal"><a href="#__codelineno-114-54">54</a></span>
<span class="normal"><a href="#__codelineno-114-55">55</a></span>
<span class="normal"><a href="#__codelineno-114-56">56</a></span>
<span class="normal"><a href="#__codelineno-114-57">57</a></span>
<span class="normal"><a href="#__codelineno-114-58">58</a></span>
<span class="normal"><a href="#__codelineno-114-59">59</a></span>
<span class="normal"><a href="#__codelineno-114-60">60</a></span>
<span class="normal"><a href="#__codelineno-114-61">61</a></span>
<span class="normal"><a href="#__codelineno-114-62">62</a></span>
<span class="normal"><a href="#__codelineno-114-63">63</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-114-1" name="__codelineno-114-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">Provider</span><span class="p">,</span><span class="w"> </span><span class="nx">inject</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@loopback/context&#39;</span><span class="p">;</span>
<a id="__codelineno-114-2" name="__codelineno-114-2"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">repository</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@loopback/repository&#39;</span><span class="p">;</span>
<a id="__codelineno-114-3" name="__codelineno-114-3"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">HttpErrors</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@loopback/rest&#39;</span><span class="p">;</span>
<a id="__codelineno-114-4" name="__codelineno-114-4"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-114-5" name="__codelineno-114-5"></a><span class="w">  </span><span class="nx">AuthErrorKeys</span><span class="p">,</span>
<a id="__codelineno-114-6" name="__codelineno-114-6"></a><span class="w">  </span><span class="nx">IAuthUser</span><span class="p">,</span>
<a id="__codelineno-114-7" name="__codelineno-114-7"></a><span class="w">  </span><span class="nx">VerifyFunction</span><span class="p">,</span>
<a id="__codelineno-114-8" name="__codelineno-114-8"></a><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;loopback4-authentication&#39;</span><span class="p">;</span>
<a id="__codelineno-114-9" name="__codelineno-114-9"></a><span class="k">import</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">Auth0Strategy</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;passport-auth0&#39;</span><span class="p">;</span>
<a id="__codelineno-114-10" name="__codelineno-114-10"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-114-11" name="__codelineno-114-11"></a><span class="w">  </span><span class="nx">Auth0PostVerifyFn</span><span class="p">,</span>
<a id="__codelineno-114-12" name="__codelineno-114-12"></a><span class="w">  </span><span class="nx">Auth0PreVerifyFn</span><span class="p">,</span>
<a id="__codelineno-114-13" name="__codelineno-114-13"></a><span class="w">  </span><span class="nx">Auth0SignUpFn</span><span class="p">,</span>
<a id="__codelineno-114-14" name="__codelineno-114-14"></a><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../../../providers&#39;</span><span class="p">;</span>
<a id="__codelineno-114-15" name="__codelineno-114-15"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">SignUpBindings</span><span class="p">,</span><span class="w"> </span><span class="nx">VerifyBindings</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../../../providers/keys&#39;</span><span class="p">;</span>
<a id="__codelineno-114-16" name="__codelineno-114-16"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">UserCredentialsRepository</span><span class="p">,</span><span class="w"> </span><span class="nx">UserRepository</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../../../repositories&#39;</span><span class="p">;</span>
<a id="__codelineno-114-17" name="__codelineno-114-17"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">AuthUser</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../models&#39;</span><span class="p">;</span>
<a id="__codelineno-114-18" name="__codelineno-114-18"></a>
<a id="__codelineno-114-19" name="__codelineno-114-19"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">Auth0VerifyProvider</span><span class="w"> </span><span class="k">implements</span><span class="w"> </span><span class="nx">Provider</span><span class="o">&lt;</span><span class="nx">VerifyFunction</span><span class="p">.</span><span class="nx">Auth0Fn</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-114-20" name="__codelineno-114-20"></a><span class="w">  </span><span class="kr">constructor</span><span class="p">(</span>
<a id="__codelineno-114-21" name="__codelineno-114-21"></a><span class="w">    </span><span class="kd">@repository</span><span class="p">(</span><span class="nx">UserRepository</span><span class="p">)</span>
<a id="__codelineno-114-22" name="__codelineno-114-22"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nx">userRepository</span><span class="o">:</span><span class="w"> </span><span class="kt">UserRepository</span><span class="p">,</span>
<a id="__codelineno-114-23" name="__codelineno-114-23"></a><span class="w">    </span><span class="kd">@repository</span><span class="p">(</span><span class="nx">UserCredentialsRepository</span><span class="p">)</span>
<a id="__codelineno-114-24" name="__codelineno-114-24"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nx">userCredsRepository</span><span class="o">:</span><span class="w"> </span><span class="kt">UserCredentialsRepository</span><span class="p">,</span>
<a id="__codelineno-114-25" name="__codelineno-114-25"></a><span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-114-26" name="__codelineno-114-26"></a>
<a id="__codelineno-114-27" name="__codelineno-114-27"></a><span class="w">  </span><span class="nx">value</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">VerifyFunction</span><span class="p">.</span><span class="nx">Auth0Fn</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-114-28" name="__codelineno-114-28"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-114-29" name="__codelineno-114-29"></a><span class="w">      </span><span class="nx">accessToken</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span>
<a id="__codelineno-114-30" name="__codelineno-114-30"></a><span class="w">      </span><span class="nx">refreshToken</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span>
<a id="__codelineno-114-31" name="__codelineno-114-31"></a><span class="w">      </span><span class="nx">profile</span><span class="o">:</span><span class="w"> </span><span class="kt">Auth0Strategy.Profile</span><span class="p">,</span>
<a id="__codelineno-114-32" name="__codelineno-114-32"></a><span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-114-33" name="__codelineno-114-33"></a><span class="w">      </span><span class="kd">let</span><span class="w"> </span><span class="nx">user</span><span class="o">:</span><span class="w"> </span><span class="kt">IAuthUser</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">userRepository</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span>
<a id="__codelineno-114-34" name="__codelineno-114-34"></a><span class="w">        </span><span class="nx">where</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-114-35" name="__codelineno-114-35"></a><span class="w">          </span><span class="nx">email</span><span class="o">:</span><span class="w"> </span><span class="kt">profile._json.email</span><span class="p">,</span>
<a id="__codelineno-114-36" name="__codelineno-114-36"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-114-37" name="__codelineno-114-37"></a><span class="w">      </span><span class="p">});</span>
<a id="__codelineno-114-38" name="__codelineno-114-38"></a>
<a id="__codelineno-114-39" name="__codelineno-114-39"></a><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">user</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-114-40" name="__codelineno-114-40"></a><span class="w">          </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">HttpErrors</span><span class="p">.</span><span class="nx">Unauthorized</span><span class="p">(</span><span class="nx">AuthErrorKeys</span><span class="p">.</span><span class="nx">InvalidCredentials</span><span class="p">);</span>
<a id="__codelineno-114-41" name="__codelineno-114-41"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-114-42" name="__codelineno-114-42"></a><span class="w">      </span><span class="p">}</span>
<a id="__codelineno-114-43" name="__codelineno-114-43"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">creds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">userCredsRepository</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span>
<a id="__codelineno-114-44" name="__codelineno-114-44"></a><span class="w">        </span><span class="nx">where</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-114-45" name="__codelineno-114-45"></a><span class="w">          </span><span class="nx">userId</span><span class="o">:</span><span class="w"> </span><span class="kt">user.id</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span>
<a id="__codelineno-114-46" name="__codelineno-114-46"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-114-47" name="__codelineno-114-47"></a><span class="w">      </span><span class="p">});</span>
<a id="__codelineno-114-48" name="__codelineno-114-48"></a><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-114-49" name="__codelineno-114-49"></a><span class="w">        </span><span class="o">!</span><span class="nx">user</span><span class="w"> </span><span class="o">||</span>
<a id="__codelineno-114-50" name="__codelineno-114-50"></a><span class="w">        </span><span class="nx">user</span><span class="p">.</span><span class="nx">authProvider</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="s1">&#39;auth0&#39;</span><span class="w"> </span><span class="o">||</span>
<a id="__codelineno-114-51" name="__codelineno-114-51"></a><span class="w">        </span><span class="nx">user</span><span class="p">.</span><span class="nx">authId</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="nx">profile</span><span class="p">.</span><span class="nx">id</span>
<a id="__codelineno-114-52" name="__codelineno-114-52"></a><span class="w">      </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-114-53" name="__codelineno-114-53"></a><span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">HttpErrors</span><span class="p">.</span><span class="nx">Unauthorized</span><span class="p">(</span><span class="nx">AuthErrorKeys</span><span class="p">.</span><span class="nx">InvalidCredentials</span><span class="p">);</span>
<a id="__codelineno-114-54" name="__codelineno-114-54"></a><span class="w">      </span><span class="p">}</span>
<a id="__codelineno-114-55" name="__codelineno-114-55"></a>
<a id="__codelineno-114-56" name="__codelineno-114-56"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">authUser</span><span class="o">:</span><span class="w"> </span><span class="kt">AuthUser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">AuthUser</span><span class="p">(</span><span class="nx">user</span><span class="p">);</span>
<a id="__codelineno-114-57" name="__codelineno-114-57"></a><span class="w">      </span><span class="nx">authUser</span><span class="p">.</span><span class="nx">permissions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
<a id="__codelineno-114-58" name="__codelineno-114-58"></a><span class="w">      </span><span class="nx">authUser</span><span class="p">.</span><span class="nx">externalAuthToken</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">accessToken</span><span class="p">;</span>
<a id="__codelineno-114-59" name="__codelineno-114-59"></a><span class="w">      </span><span class="nx">authUser</span><span class="p">.</span><span class="nx">externalRefreshToken</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">refreshToken</span><span class="p">;</span>
<a id="__codelineno-114-60" name="__codelineno-114-60"></a><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">postVerifyProvider</span><span class="p">(</span><span class="nx">profile</span><span class="p">,</span><span class="w"> </span><span class="nx">authUser</span><span class="p">);</span>
<a id="__codelineno-114-61" name="__codelineno-114-61"></a><span class="w">    </span><span class="p">};</span>
<a id="__codelineno-114-62" name="__codelineno-114-62"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-114-63" name="__codelineno-114-63"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Please note the Verify function type <em>VerifyFunction.LocalPasswordFn</em></p>
<p>Now bind this provider to the application in application.ts.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-115-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-115-1" name="__codelineno-115-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">AuthenticationComponent</span><span class="p">,</span><span class="w"> </span><span class="nx">Strategies</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;loopback4-authentication&#39;</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-116-1">1</a></span>
<span class="normal"><a href="#__codelineno-116-2">2</a></span>
<span class="normal"><a href="#__codelineno-116-3">3</a></span>
<span class="normal"><a href="#__codelineno-116-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-116-1" name="__codelineno-116-1"></a><span class="c1">// Add authentication component</span>
<a id="__codelineno-116-2" name="__codelineno-116-2"></a><span class="k">this</span><span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="nx">AuthenticationComponent</span><span class="p">);</span>
<a id="__codelineno-116-3" name="__codelineno-116-3"></a><span class="c1">// Customize authentication verify handlers</span>
<a id="__codelineno-116-4" name="__codelineno-116-4"></a><span class="k">this</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">Strategies</span><span class="p">.</span><span class="nx">Passport</span><span class="p">.</span><span class="nx">AUTH0_VERIFIER</span><span class="p">).</span><span class="nx">toProvider</span><span class="p">(</span><span class="nx">Auth0VerifyProvider</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>Now, bind this provider to the application in application.ts.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-117-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-117-1" name="__codelineno-117-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">Auth0StrategyFactoryProvider</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;loopback4-authentication/passport-auth0&#39;</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-118-1">1</a></span>
<span class="normal"><a href="#__codelineno-118-2">2</a></span>
<span class="normal"><a href="#__codelineno-118-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-118-1" name="__codelineno-118-1"></a><span class="k">this</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">Strategies</span><span class="p">.</span><span class="nx">Passport</span><span class="p">.</span><span class="nx">AUTH0_STRATEGY_FACTORY</span><span class="p">).</span><span class="nx">toProvider</span><span class="p">(</span>
<a id="__codelineno-118-2" name="__codelineno-118-2"></a><span class="w">  </span><span class="nx">Auth0StrategyFactoryProvider</span><span class="p">,</span>
<a id="__codelineno-118-3" name="__codelineno-118-3"></a><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>Finally, add the authenticate function as a sequence action to sequence.ts.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-119-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-119-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-119-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-119-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-119-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-119-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-119-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-119-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-119-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-119-10">10</a></span>
<span class="normal"><a href="#__codelineno-119-11">11</a></span>
<span class="normal"><a href="#__codelineno-119-12">12</a></span>
<span class="normal"><a href="#__codelineno-119-13">13</a></span>
<span class="normal"><a href="#__codelineno-119-14">14</a></span>
<span class="normal"><a href="#__codelineno-119-15">15</a></span>
<span class="normal"><a href="#__codelineno-119-16">16</a></span>
<span class="normal"><a href="#__codelineno-119-17">17</a></span>
<span class="normal"><a href="#__codelineno-119-18">18</a></span>
<span class="normal"><a href="#__codelineno-119-19">19</a></span>
<span class="normal"><a href="#__codelineno-119-20">20</a></span>
<span class="normal"><a href="#__codelineno-119-21">21</a></span>
<span class="normal"><a href="#__codelineno-119-22">22</a></span>
<span class="normal"><a href="#__codelineno-119-23">23</a></span>
<span class="normal"><a href="#__codelineno-119-24">24</a></span>
<span class="normal"><a href="#__codelineno-119-25">25</a></span>
<span class="normal"><a href="#__codelineno-119-26">26</a></span>
<span class="normal"><a href="#__codelineno-119-27">27</a></span>
<span class="normal"><a href="#__codelineno-119-28">28</a></span>
<span class="normal"><a href="#__codelineno-119-29">29</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-119-1" name="__codelineno-119-1"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">MySequence</span><span class="w"> </span><span class="k">implements</span><span class="w"> </span><span class="nx">SequenceHandler</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-119-2" name="__codelineno-119-2"></a><span class="w">  </span><span class="kr">constructor</span><span class="p">(</span>
<a id="__codelineno-119-3" name="__codelineno-119-3"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">FIND_ROUTE</span><span class="p">)</span><span class="w"> </span><span class="k">protected</span><span class="w"> </span><span class="nx">findRoute</span><span class="o">:</span><span class="w"> </span><span class="kt">FindRoute</span><span class="p">,</span>
<a id="__codelineno-119-4" name="__codelineno-119-4"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">PARSE_PARAMS</span><span class="p">)</span><span class="w"> </span><span class="k">protected</span><span class="w"> </span><span class="nx">parseParams</span><span class="o">:</span><span class="w"> </span><span class="kt">ParseParams</span><span class="p">,</span>
<a id="__codelineno-119-5" name="__codelineno-119-5"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">INVOKE_METHOD</span><span class="p">)</span><span class="w"> </span><span class="k">protected</span><span class="w"> </span><span class="nx">invoke</span><span class="o">:</span><span class="w"> </span><span class="kt">InvokeMethod</span><span class="p">,</span>
<a id="__codelineno-119-6" name="__codelineno-119-6"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">SEND</span><span class="p">)</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="nx">send</span><span class="o">:</span><span class="w"> </span><span class="kt">Send</span><span class="p">,</span>
<a id="__codelineno-119-7" name="__codelineno-119-7"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">SequenceActions</span><span class="p">.</span><span class="nx">REJECT</span><span class="p">)</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="nx">reject</span><span class="o">:</span><span class="w"> </span><span class="kt">Reject</span><span class="p">,</span>
<a id="__codelineno-119-8" name="__codelineno-119-8"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">AuthenticationBindings</span><span class="p">.</span><span class="nx">USER_AUTH_ACTION</span><span class="p">)</span>
<a id="__codelineno-119-9" name="__codelineno-119-9"></a><span class="w">    </span><span class="k">protected</span><span class="w"> </span><span class="nx">authenticateRequest</span><span class="o">:</span><span class="w"> </span><span class="kt">AuthenticateFn</span><span class="o">&lt;</span><span class="nx">AuthUser</span><span class="o">&gt;</span><span class="p">,</span>
<a id="__codelineno-119-10" name="__codelineno-119-10"></a><span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-119-11" name="__codelineno-119-11"></a>
<a id="__codelineno-119-12" name="__codelineno-119-12"></a><span class="w">  </span><span class="k">async</span><span class="w"> </span><span class="nx">handle</span><span class="p">(</span><span class="nx">context</span><span class="o">:</span><span class="w"> </span><span class="kt">RequestContext</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-119-13" name="__codelineno-119-13"></a><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-119-14" name="__codelineno-119-14"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="nx">request</span><span class="p">,</span><span class="w"> </span><span class="nx">response</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">context</span><span class="p">;</span>
<a id="__codelineno-119-15" name="__codelineno-119-15"></a>
<a id="__codelineno-119-16" name="__codelineno-119-16"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">route</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">findRoute</span><span class="p">(</span><span class="nx">request</span><span class="p">);</span>
<a id="__codelineno-119-17" name="__codelineno-119-17"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">parseParams</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span><span class="w"> </span><span class="nx">route</span><span class="p">);</span>
<a id="__codelineno-119-18" name="__codelineno-119-18"></a><span class="w">      </span><span class="nx">request</span><span class="p">.</span><span class="nx">body</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">args</span><span class="p">[</span><span class="nx">args</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">];</span>
<a id="__codelineno-119-19" name="__codelineno-119-19"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">authUser</span><span class="o">:</span><span class="w"> </span><span class="kt">AuthUser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">authenticateRequest</span><span class="p">(</span>
<a id="__codelineno-119-20" name="__codelineno-119-20"></a><span class="w">        </span><span class="nx">request</span><span class="p">,</span>
<a id="__codelineno-119-21" name="__codelineno-119-21"></a><span class="w">        </span><span class="nx">response</span><span class="p">,</span>
<a id="__codelineno-119-22" name="__codelineno-119-22"></a><span class="w">      </span><span class="p">);</span>
<a id="__codelineno-119-23" name="__codelineno-119-23"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">invoke</span><span class="p">(</span><span class="nx">route</span><span class="p">,</span><span class="w"> </span><span class="nx">args</span><span class="p">);</span>
<a id="__codelineno-119-24" name="__codelineno-119-24"></a><span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">response</span><span class="p">,</span><span class="w"> </span><span class="nx">result</span><span class="p">);</span>
<a id="__codelineno-119-25" name="__codelineno-119-25"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-119-26" name="__codelineno-119-26"></a><span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">reject</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">);</span>
<a id="__codelineno-119-27" name="__codelineno-119-27"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-119-28" name="__codelineno-119-28"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-119-29" name="__codelineno-119-29"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>After this, you can use decorator to apply auth to controller functions wherever needed. See below.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-120-1">  1</a></span>
<span class="normal"><a href="#__codelineno-120-2">  2</a></span>
<span class="normal"><a href="#__codelineno-120-3">  3</a></span>
<span class="normal"><a href="#__codelineno-120-4">  4</a></span>
<span class="normal"><a href="#__codelineno-120-5">  5</a></span>
<span class="normal"><a href="#__codelineno-120-6">  6</a></span>
<span class="normal"><a href="#__codelineno-120-7">  7</a></span>
<span class="normal"><a href="#__codelineno-120-8">  8</a></span>
<span class="normal"><a href="#__codelineno-120-9">  9</a></span>
<span class="normal"><a href="#__codelineno-120-10"> 10</a></span>
<span class="normal"><a href="#__codelineno-120-11"> 11</a></span>
<span class="normal"><a href="#__codelineno-120-12"> 12</a></span>
<span class="normal"><a href="#__codelineno-120-13"> 13</a></span>
<span class="normal"><a href="#__codelineno-120-14"> 14</a></span>
<span class="normal"><a href="#__codelineno-120-15"> 15</a></span>
<span class="normal"><a href="#__codelineno-120-16"> 16</a></span>
<span class="normal"><a href="#__codelineno-120-17"> 17</a></span>
<span class="normal"><a href="#__codelineno-120-18"> 18</a></span>
<span class="normal"><a href="#__codelineno-120-19"> 19</a></span>
<span class="normal"><a href="#__codelineno-120-20"> 20</a></span>
<span class="normal"><a href="#__codelineno-120-21"> 21</a></span>
<span class="normal"><a href="#__codelineno-120-22"> 22</a></span>
<span class="normal"><a href="#__codelineno-120-23"> 23</a></span>
<span class="normal"><a href="#__codelineno-120-24"> 24</a></span>
<span class="normal"><a href="#__codelineno-120-25"> 25</a></span>
<span class="normal"><a href="#__codelineno-120-26"> 26</a></span>
<span class="normal"><a href="#__codelineno-120-27"> 27</a></span>
<span class="normal"><a href="#__codelineno-120-28"> 28</a></span>
<span class="normal"><a href="#__codelineno-120-29"> 29</a></span>
<span class="normal"><a href="#__codelineno-120-30"> 30</a></span>
<span class="normal"><a href="#__codelineno-120-31"> 31</a></span>
<span class="normal"><a href="#__codelineno-120-32"> 32</a></span>
<span class="normal"><a href="#__codelineno-120-33"> 33</a></span>
<span class="normal"><a href="#__codelineno-120-34"> 34</a></span>
<span class="normal"><a href="#__codelineno-120-35"> 35</a></span>
<span class="normal"><a href="#__codelineno-120-36"> 36</a></span>
<span class="normal"><a href="#__codelineno-120-37"> 37</a></span>
<span class="normal"><a href="#__codelineno-120-38"> 38</a></span>
<span class="normal"><a href="#__codelineno-120-39"> 39</a></span>
<span class="normal"><a href="#__codelineno-120-40"> 40</a></span>
<span class="normal"><a href="#__codelineno-120-41"> 41</a></span>
<span class="normal"><a href="#__codelineno-120-42"> 42</a></span>
<span class="normal"><a href="#__codelineno-120-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-120-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-120-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-120-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-120-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-120-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-120-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-120-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-120-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-120-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-120-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-120-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-120-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-120-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-120-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-120-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-120-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-120-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-120-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-120-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-120-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-120-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-120-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-120-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-120-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-120-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-120-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-120-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-120-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-120-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-120-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-120-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-120-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-120-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-120-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-120-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-120-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-120-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-120-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-120-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-120-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-120-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-120-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-120-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-120-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-120-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-120-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-120-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-120-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-120-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-120-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-120-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-120-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-120-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-120-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-120-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-120-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-120-100">100</a></span>
<span class="normal"><a href="#__codelineno-120-101">101</a></span>
<span class="normal"><a href="#__codelineno-120-102">102</a></span>
<span class="normal"><a href="#__codelineno-120-103">103</a></span>
<span class="normal"><a href="#__codelineno-120-104">104</a></span>
<span class="normal"><a href="#__codelineno-120-105">105</a></span>
<span class="normal"><a href="#__codelineno-120-106">106</a></span>
<span class="normal"><a href="#__codelineno-120-107">107</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-120-1" name="__codelineno-120-1"></a><span class="kd">@authenticateClient</span><span class="p">(</span><span class="nx">STRATEGY</span><span class="p">.</span><span class="nx">CLIENT_PASSWORD</span><span class="p">)</span>
<a id="__codelineno-120-2" name="__codelineno-120-2"></a><span class="w">  </span><span class="kd">@authenticate</span><span class="p">(</span>
<a id="__codelineno-120-3" name="__codelineno-120-3"></a><span class="w">   </span><span class="nx">STRATEGY</span><span class="p">.</span><span class="nx">AUTH0</span><span class="p">,</span>
<a id="__codelineno-120-4" name="__codelineno-120-4"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-120-5" name="__codelineno-120-5"></a><span class="w">      </span><span class="nx">domain</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.AUTH0_DOMAIN</span><span class="p">,</span>
<a id="__codelineno-120-6" name="__codelineno-120-6"></a><span class="w">      </span><span class="nx">clientID</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.AUTH0_CLIENT_ID</span><span class="p">,</span>
<a id="__codelineno-120-7" name="__codelineno-120-7"></a><span class="w">      </span><span class="nx">clientSecret</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.AUTH0_CLIENT_SECRET</span><span class="p">,</span>
<a id="__codelineno-120-8" name="__codelineno-120-8"></a><span class="w">      </span><span class="nx">callbackURL</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.AUTH0_CALLBACK_URL</span><span class="p">,</span>
<a id="__codelineno-120-9" name="__codelineno-120-9"></a><span class="w">      </span><span class="nx">state</span><span class="o">:</span><span class="w"> </span><span class="kt">false</span><span class="p">,</span>
<a id="__codelineno-120-10" name="__codelineno-120-10"></a><span class="w">      </span><span class="nx">profileFields</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;name&#39;</span><span class="p">],</span>
<a id="__codelineno-120-11" name="__codelineno-120-11"></a><span class="w">      </span><span class="nx">scope</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;openid email profile&#39;</span><span class="p">,</span>
<a id="__codelineno-120-12" name="__codelineno-120-12"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-120-13" name="__codelineno-120-13"></a><span class="w">    </span><span class="p">(</span><span class="nx">req</span><span class="o">:</span><span class="w"> </span><span class="kt">Request</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-120-14" name="__codelineno-120-14"></a><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-120-15" name="__codelineno-120-15"></a><span class="w">        </span><span class="nx">accessType</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;offline&#39;</span><span class="p">,</span>
<a id="__codelineno-120-16" name="__codelineno-120-16"></a><span class="w">        </span><span class="nx">state</span><span class="o">:</span><span class="w"> </span><span class="kt">Object.keys</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">)</span>
<a id="__codelineno-120-17" name="__codelineno-120-17"></a><span class="w">          </span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">key</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">key</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">&#39;=&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">[</span><span class="nx">key</span><span class="p">])</span>
<a id="__codelineno-120-18" name="__codelineno-120-18"></a><span class="w">          </span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;&amp;&#39;</span><span class="p">),</span>
<a id="__codelineno-120-19" name="__codelineno-120-19"></a><span class="w">      </span><span class="p">};</span>
<a id="__codelineno-120-20" name="__codelineno-120-20"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-120-21" name="__codelineno-120-21"></a><span class="w">  </span><span class="p">)</span>
<a id="__codelineno-120-22" name="__codelineno-120-22"></a><span class="w">  </span><span class="kd">@authorize</span><span class="p">([</span><span class="s1">&#39;*&#39;</span><span class="p">])</span>
<a id="__codelineno-120-23" name="__codelineno-120-23"></a><span class="w">  </span><span class="kd">@get</span><span class="p">(</span><span class="s1">&#39;/auth/auth0&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-120-24" name="__codelineno-120-24"></a><span class="w">    </span><span class="nx">responses</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-120-25" name="__codelineno-120-25"></a><span class="w">      </span><span class="p">[</span><span class="nx">STATUS_CODE</span><span class="p">.</span><span class="nx">OK</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-120-26" name="__codelineno-120-26"></a><span class="w">        </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Token Response&#39;</span><span class="p">,</span>
<a id="__codelineno-120-27" name="__codelineno-120-27"></a><span class="w">        </span><span class="nx">content</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-120-28" name="__codelineno-120-28"></a><span class="w">          </span><span class="p">[</span><span class="nx">CONTENT_TYPE</span><span class="p">.</span><span class="nb">JSON</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-120-29" name="__codelineno-120-29"></a><span class="w">            </span><span class="nx">schema</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="s1">&#39;x-ts-type&#39;</span><span class="o">:</span><span class="w"> </span><span class="nx">TokenResponse</span><span class="p">},</span>
<a id="__codelineno-120-30" name="__codelineno-120-30"></a><span class="w">          </span><span class="p">},</span>
<a id="__codelineno-120-31" name="__codelineno-120-31"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-120-32" name="__codelineno-120-32"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-120-33" name="__codelineno-120-33"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-120-34" name="__codelineno-120-34"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-120-35" name="__codelineno-120-35"></a><span class="w">  </span><span class="k">async</span><span class="w"> </span><span class="nx">loginViaAuth0</span><span class="p">(</span>
<a id="__codelineno-120-36" name="__codelineno-120-36"></a><span class="w">    </span><span class="kd">@param</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="kt">string</span><span class="p">(</span><span class="s1">&#39;client_id&#39;</span><span class="p">)</span>
<a id="__codelineno-120-37" name="__codelineno-120-37"></a><span class="w">    </span><span class="nx">clientId?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span>
<a id="__codelineno-120-38" name="__codelineno-120-38"></a><span class="w">    </span><span class="kd">@param</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="kt">string</span><span class="p">(</span><span class="s1">&#39;client_secret&#39;</span><span class="p">)</span>
<a id="__codelineno-120-39" name="__codelineno-120-39"></a><span class="w">    </span><span class="nx">clientSecret?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span>
<a id="__codelineno-120-40" name="__codelineno-120-40"></a><span class="w">  </span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nb">Promise</span><span class="o">&lt;</span><span class="ow">void</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-120-41" name="__codelineno-120-41"></a>
<a id="__codelineno-120-42" name="__codelineno-120-42"></a><span class="w">  </span><span class="kd">@authenticate</span><span class="p">(</span>
<a id="__codelineno-120-43" name="__codelineno-120-43"></a><span class="w">    </span><span class="nx">STRATEGY</span><span class="p">.</span><span class="nx">AUTH0</span><span class="p">,</span>
<a id="__codelineno-120-44" name="__codelineno-120-44"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-120-45" name="__codelineno-120-45"></a><span class="w">      </span><span class="nx">domain</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.AUTH0_DOMAIN</span><span class="p">,</span>
<a id="__codelineno-120-46" name="__codelineno-120-46"></a><span class="w">      </span><span class="nx">clientID</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.AUTH0_CLIENT_ID</span><span class="p">,</span>
<a id="__codelineno-120-47" name="__codelineno-120-47"></a><span class="w">      </span><span class="nx">clientSecret</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.AUTH0_CLIENT_SECRET</span><span class="p">,</span>
<a id="__codelineno-120-48" name="__codelineno-120-48"></a><span class="w">      </span><span class="nx">callbackURL</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.AUTH0_CALLBACK_URL</span><span class="p">,</span>
<a id="__codelineno-120-49" name="__codelineno-120-49"></a><span class="w">      </span><span class="nx">state</span><span class="o">:</span><span class="w"> </span><span class="kt">false</span><span class="p">,</span>
<a id="__codelineno-120-50" name="__codelineno-120-50"></a><span class="w">      </span><span class="nx">profileFields</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;name&#39;</span><span class="p">],</span>
<a id="__codelineno-120-51" name="__codelineno-120-51"></a><span class="w">      </span><span class="nx">scope</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;openid email profile&#39;</span><span class="p">,</span>
<a id="__codelineno-120-52" name="__codelineno-120-52"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-120-53" name="__codelineno-120-53"></a><span class="w">    </span><span class="p">(</span><span class="nx">req</span><span class="o">:</span><span class="w"> </span><span class="kt">Request</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-120-54" name="__codelineno-120-54"></a><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-120-55" name="__codelineno-120-55"></a><span class="w">        </span><span class="nx">accessType</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;offline&#39;</span><span class="p">,</span>
<a id="__codelineno-120-56" name="__codelineno-120-56"></a><span class="w">        </span><span class="nx">state</span><span class="o">:</span><span class="w"> </span><span class="kt">Object.keys</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">)</span>
<a id="__codelineno-120-57" name="__codelineno-120-57"></a><span class="w">          </span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">key</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="sb">`</span><span class="si">${</span><span class="nx">key</span><span class="si">}</span><span class="sb">=</span><span class="si">${</span><span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
<a id="__codelineno-120-58" name="__codelineno-120-58"></a><span class="w">          </span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;&amp;&#39;</span><span class="p">),</span>
<a id="__codelineno-120-59" name="__codelineno-120-59"></a><span class="w">      </span><span class="p">};</span>
<a id="__codelineno-120-60" name="__codelineno-120-60"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-120-61" name="__codelineno-120-61"></a><span class="w">  </span><span class="p">)</span>
<a id="__codelineno-120-62" name="__codelineno-120-62"></a><span class="w">  </span><span class="kd">@authorize</span><span class="p">([</span><span class="s1">&#39;*&#39;</span><span class="p">])</span>
<a id="__codelineno-120-63" name="__codelineno-120-63"></a><span class="w">  </span><span class="kd">@get</span><span class="p">(</span><span class="s1">&#39;/auth/auth0-auth-redirect&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-120-64" name="__codelineno-120-64"></a><span class="w">    </span><span class="nx">responses</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-120-65" name="__codelineno-120-65"></a><span class="w">      </span><span class="p">[</span><span class="nx">STATUS_CODE</span><span class="p">.</span><span class="nx">OK</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-120-66" name="__codelineno-120-66"></a><span class="w">        </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Token Response&#39;</span><span class="p">,</span>
<a id="__codelineno-120-67" name="__codelineno-120-67"></a><span class="w">        </span><span class="nx">content</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-120-68" name="__codelineno-120-68"></a><span class="w">          </span><span class="p">[</span><span class="nx">CONTENT_TYPE</span><span class="p">.</span><span class="nb">JSON</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-120-69" name="__codelineno-120-69"></a><span class="w">            </span><span class="nx">schema</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="s1">&#39;x-ts-type&#39;</span><span class="o">:</span><span class="w"> </span><span class="nx">TokenResponse</span><span class="p">},</span>
<a id="__codelineno-120-70" name="__codelineno-120-70"></a><span class="w">          </span><span class="p">},</span>
<a id="__codelineno-120-71" name="__codelineno-120-71"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-120-72" name="__codelineno-120-72"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-120-73" name="__codelineno-120-73"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-120-74" name="__codelineno-120-74"></a><span class="w">  </span><span class="p">})</span>
<a id="__codelineno-120-75" name="__codelineno-120-75"></a><span class="w">  </span><span class="k">async</span><span class="w"> </span><span class="nx">callback</span><span class="p">(</span>
<a id="__codelineno-120-76" name="__codelineno-120-76"></a><span class="w">    </span><span class="kd">@param</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="kt">string</span><span class="p">(</span><span class="s1">&#39;code&#39;</span><span class="p">)</span><span class="w"> </span><span class="nx">code</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span>
<a id="__codelineno-120-77" name="__codelineno-120-77"></a><span class="w">    </span><span class="kd">@param</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="kt">string</span><span class="p">(</span><span class="s1">&#39;state&#39;</span><span class="p">)</span><span class="w"> </span><span class="nx">state</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span>
<a id="__codelineno-120-78" name="__codelineno-120-78"></a><span class="w">    </span><span class="kd">@inject</span><span class="p">(</span><span class="nx">RestBindings</span><span class="p">.</span><span class="nx">Http</span><span class="p">.</span><span class="nx">RESPONSE</span><span class="p">)</span><span class="w"> </span><span class="nx">response</span><span class="o">:</span><span class="w"> </span><span class="kt">Response</span><span class="p">,</span>
<a id="__codelineno-120-79" name="__codelineno-120-79"></a><span class="w">  </span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nb">Promise</span><span class="o">&lt;</span><span class="ow">void</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-120-80" name="__codelineno-120-80"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">clientId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">URLSearchParams</span><span class="p">(</span><span class="nx">state</span><span class="p">).</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;client_id&#39;</span><span class="p">);</span>
<a id="__codelineno-120-81" name="__codelineno-120-81"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">clientId</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">user</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-120-82" name="__codelineno-120-82"></a><span class="w">      </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">HttpErrors</span><span class="p">.</span><span class="nx">Unauthorized</span><span class="p">(</span><span class="nx">AuthErrorKeys</span><span class="p">.</span><span class="nx">ClientInvalid</span><span class="p">);</span>
<a id="__codelineno-120-83" name="__codelineno-120-83"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-120-84" name="__codelineno-120-84"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">authClientRepository</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span>
<a id="__codelineno-120-85" name="__codelineno-120-85"></a><span class="w">      </span><span class="nx">where</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-120-86" name="__codelineno-120-86"></a><span class="w">        </span><span class="nx">clientId</span><span class="o">:</span><span class="w"> </span><span class="kt">clientId</span><span class="p">,</span>
<a id="__codelineno-120-87" name="__codelineno-120-87"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-120-88" name="__codelineno-120-88"></a><span class="w">    </span><span class="p">});</span>
<a id="__codelineno-120-89" name="__codelineno-120-89"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">client</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">!</span><span class="nx">client</span><span class="p">.</span><span class="nx">redirectUrl</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-120-90" name="__codelineno-120-90"></a><span class="w">      </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">HttpErrors</span><span class="p">.</span><span class="nx">Unauthorized</span><span class="p">(</span><span class="nx">AuthErrorKeys</span><span class="p">.</span><span class="nx">ClientInvalid</span><span class="p">);</span>
<a id="__codelineno-120-91" name="__codelineno-120-91"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-120-92" name="__codelineno-120-92"></a><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-120-93" name="__codelineno-120-93"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">codePayload</span><span class="o">:</span><span class="w"> </span><span class="kt">ClientAuthCode</span><span class="o">&lt;</span><span class="nx">User</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-120-94" name="__codelineno-120-94"></a><span class="w">        </span><span class="nx">clientId</span><span class="p">,</span>
<a id="__codelineno-120-95" name="__codelineno-120-95"></a><span class="w">        </span><span class="nx">user</span><span class="o">:</span><span class="w"> </span><span class="kt">this.user</span><span class="p">,</span>
<a id="__codelineno-120-96" name="__codelineno-120-96"></a><span class="w">      </span><span class="p">};</span>
<a id="__codelineno-120-97" name="__codelineno-120-97"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">jwt</span><span class="p">.</span><span class="nx">sign</span><span class="p">(</span><span class="nx">codePayload</span><span class="p">,</span><span class="w"> </span><span class="nx">client</span><span class="p">.</span><span class="nx">secret</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-120-98" name="__codelineno-120-98"></a><span class="w">        </span><span class="nx">expiresIn</span><span class="o">:</span><span class="w"> </span><span class="kt">client.authCodeExpiration</span><span class="p">,</span>
<a id="__codelineno-120-99" name="__codelineno-120-99"></a><span class="w">        </span><span class="nx">audience</span><span class="o">:</span><span class="w"> </span><span class="kt">clientId</span><span class="p">,</span>
<a id="__codelineno-120-100" name="__codelineno-120-100"></a><span class="w">        </span><span class="nx">subject</span><span class="o">:</span><span class="w"> </span><span class="kt">this.user.username</span><span class="p">,</span>
<a id="__codelineno-120-101" name="__codelineno-120-101"></a><span class="w">        </span><span class="nx">issuer</span><span class="o">:</span><span class="w"> </span><span class="kt">process.env.JWT_ISSUER</span><span class="p">,</span>
<a id="__codelineno-120-102" name="__codelineno-120-102"></a><span class="w">      </span><span class="p">});</span>
<a id="__codelineno-120-103" name="__codelineno-120-103"></a><span class="w">      </span><span class="nx">response</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">client</span><span class="p">.</span><span class="nx">redirectUrl</span><span class="si">}</span><span class="sb">?code=</span><span class="si">${</span><span class="nx">token</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<a id="__codelineno-120-104" name="__codelineno-120-104"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-120-105" name="__codelineno-120-105"></a><span class="w">      </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">HttpErrors</span><span class="p">.</span><span class="nx">InternalServerError</span><span class="p">(</span><span class="nx">AuthErrorKeys</span><span class="p">.</span><span class="nx">UnknownError</span><span class="p">);</span>
<a id="__codelineno-120-106" name="__codelineno-120-106"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-120-107" name="__codelineno-120-107"></a><span class="w">  </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Please note above that we are creating two new APIs for auth0 authentication. The first one is for UI clients to hit. We are authenticating client as well, then passing the details to the auth0. Then, the actual authentication is done by auth0 authorization url, which redirects to the second API we created after success. The first API method body is empty as we do not need to handle its response. The provider in this package will do the redirection for you automatically.</p>
<p>For accessing the authenticated AuthUser model reference, you can inject the CURRENT_USER provider, provided by the extension, which is populated by the auth action sequence above.</p>
<div class="language-ts highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-121-1">1</a></span>
<span class="normal"><a href="#__codelineno-121-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-121-1" name="__codelineno-121-1"></a><span class="w">  </span><span class="kd">@inject</span><span class="p">.</span><span class="nx">getter</span><span class="p">(</span><span class="nx">AuthenticationBindings</span><span class="p">.</span><span class="nx">CURRENT_USER</span><span class="p">)</span>
<a id="__codelineno-121-2" name="__codelineno-121-2"></a><span class="w">  </span><span class="k">private</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="nx">getCurrentUser</span><span class="o">:</span><span class="w"> </span><span class="kt">Getter</span><span class="o">&lt;</span><span class="nx">User</span><span class="o">&gt;</span><span class="p">,</span>
</code></pre></div></td></tr></table></div>
<h2 id="feedback">Feedback<a class="headerlink" href="#feedback" title="Permanent link">&para;</a></h2>
<p>If you've noticed a bug or have a question or have a feature request, <a href="https://github.com/sourcefuse/loopback4-authentication/issues">search the issue tracker</a> to see if someone else in the community has already created a ticket.
If not, go ahead and <a href="https://github.com/sourcefuse/loopback4-authentication/issues/new/choose">make one</a>!
All feature requests are welcome. Implementation time may vary. Feel free to contribute the same, if you can.
If you think this extension is useful, please <a href="https://help.github.com/en/articles/about-stars">star</a> it. Appreciation really helps in keeping this project alive.</p>
<h2 id="contributing">Contributing<a class="headerlink" href="#contributing" title="Permanent link">&para;</a></h2>
<p>Please read <a href="https://github.com/sourcefuse/loopback4-authentication/blob/master/.github/CONTRIBUTING.md">CONTRIBUTING.md</a> for details on the process for submitting pull requests to us.</p>
<h2 id="code-of-conduct">Code of conduct<a class="headerlink" href="#code-of-conduct" title="Permanent link">&para;</a></h2>
<p>Code of conduct guidelines <a href="https://github.com/sourcefuse/loopback4-authentication/blob/master/.github/CODE_OF_CONDUCT.md">here</a>.</p>
<h2 id="license">License<a class="headerlink" href="#license" title="Permanent link">&para;</a></h2>
<p><a href="https://github.com/sourcefuse/loopback4-authentication/blob/master/LICENSE">MIT</a></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../loopback4-audit-log/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Index">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Index
              </div>
            </div>
          </a>
        
        
          
          <a href="../loopback4-authorization/" class="md-footer__link md-footer__link--next" aria-label="Next: Index">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Index
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; 2023 <a href="https://github.com/sourcefuse/arc-docs" target="_blank" rel="noopener">ARC</a>

    </div>
  
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/sourcefuse/loopback4-microservice-catalog" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.copy", "navigation.footer", "content.action.edit"], "search": "../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.92b07e13.min.js"></script>
      
        <script src="../../../search/main.js"></script>
      
    
  </body>
</html>